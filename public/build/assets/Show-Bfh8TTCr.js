import{d as ce,h as v,c as d,p as ve,g as r,F as N,i as O,f as h,e,j as le,t as m,x as ie,I as re,b as z,n as y,r as R,w as q,o,s as _e,u as Ie,a as Be,D as Te,l as ne,A as Le,k as ee,m as oe}from"./app-DVrDHbGt.js";import{a as Pe,u as ze,_ as Oe}from"./useIsMobile-BrGiTvVM.js";import{_ as Re,r as te}from"./DesktopShell.vue_vue_type_script_setup_true_lang-dSkPFJXH.js";import{_ as $e}from"./MobileToast.vue_vue_type_script_setup_true_lang-CxgnS5hK.js";import{_ as Ce}from"./ConfirmationModal.vue_vue_type_script_setup_true_lang-CRCUMdNS.js";import{m as ue,n as Ye,p as Me,f as de}from"./inputGuards-BV9ov3X1.js";import{_ as Ue}from"./MonthNavigator.vue_vue_type_script_setup_true_lang-B3hZMx86.js";import{g as Ze,_ as Se}from"./InstitutionAvatar.vue_vue_type_script_setup_true_lang-DL8_ZMay.js";const qe={key:0,class:"fixed inset-0 z-[90] bg-white"},Ge={class:"mx-auto w-full max-w-md px-5 pb-[calc(6rem+env(safe-area-inset-bottom))]"},He={class:"flex justify-center pt-2"},We={key:0,class:"h-7 w-7",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Je={key:1,class:"h-7 w-7",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ke={key:2,class:"h-7 w-7",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Qe={class:"mt-6 space-y-5"},Xe={class:"truncate"},et=["value"],tt={class:"grid grid-cols-3 gap-3"},lt={class:"flex gap-3"},at=["onClick","aria-label"],st={class:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-4"},nt={class:"flex items-center justify-between"},ot={class:"grid grid-cols-3 gap-4"},it=["onClick","aria-label"],rt={key:0,class:"h-6 w-6 text-slate-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ut={key:1,class:"h-6 w-6 text-slate-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},dt={key:2,class:"h-6 w-6 text-slate-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ct={class:"fixed inset-x-0 bottom-0 bg-white px-5 pb-[calc(1rem+env(safe-area-inset-bottom))] pt-3 shadow-[0_-18px_40px_-32px_rgba(15,23,42,0.45)]"},vt={class:"mx-auto w-full max-w-md"},mt=["disabled"],bt={class:"space-y-4"},pt={class:"grid grid-cols-2 gap-3"},xt=["onClick"],gt={key:0,class:"flex h-10 w-10 items-center justify-center rounded-2xl bg-white"},ft=["src","alt"],wt={class:"min-w-0 flex-1"},ht={class:"truncate text-sm font-semibold text-slate-900"},Fe=ce({__name:"NewAccountModal",props:{open:{type:Boolean},initial:{}},emits:["close","save"],setup(V,{emit:Y}){const g=V,I=Y,$=[{nome:"Banco Inter S.A",logo:"üü¢",cor:"#FF7A00",svgFile:"Banco Inter S.A/inter.svg"},{nome:"Bradesco S.A",logo:"üî¥",cor:"#CC092F",svgFile:"Bradesco S.A/bradesco com nome.svg"},{nome:"Banco do Brasil S.A",logo:"üü°",cor:"#FFDD00",svgFile:"Banco do Brasil S.A/banco-do-brasil-com-fundo.svg"},{nome:"Caixa Econ√¥mica Federal",logo:"üîµ",cor:"#0066B3",svgFile:"Caixa Econ√¥mica Federal/caixa-economica-federal-1.svg"},{nome:"Banco Santander Brasil S.A",logo:"üî¥",cor:"#EC0000",svgFile:"Banco Santander Brasil S.A/banco-santander-logo.svg"},{nome:"Banco C6 S.A",logo:"‚ö´",cor:"#000000",svgFile:"Banco C6 S.A/c6 bank- branco.svg"},{nome:"PicPay",logo:"üü¢",cor:"#21C25E",svgFile:"PicPay/Logo-PicPay -nome .svg"},{nome:"Neon",logo:"üîµ",cor:"#00D9E1",svgFile:"Neon/header-logo-neon.svg"},{nome:"Banco Safra S.A",logo:"üü†",cor:"#EC7000",svgFile:"Banco Safra S.A/logo-safra-nome.svg"},{nome:"Banco Votorantim",logo:"üü°",cor:"#FFD700",svgFile:"Banco Votorantim/banco-bv-logo.svg"},{nome:"Banco BTG Pacutal",logo:"üü£",cor:"#8B10AE",svgFile:"Banco BTG Pacutal/btg-pactual-nome .svg"},{nome:"Banco Original S.A",logo:"üü£",cor:"#7D3FF2",svgFile:"Banco Original S.A/banco-original-logo-branco-nome.svg"},{nome:"Banco Sofisa",logo:"üü°",cor:"#FFB81C",svgFile:"Banco Sofisa/logo-banco-sofisa-verde.svg"},{nome:"Banco Mercantil do Brasil S.A",logo:"üü†",cor:"#EA5F1A",svgFile:"Banco Mercantil do Brasil S.A/banco-mercantil-novo-azul.svg"},{nome:"Banco Daycoval",logo:"üü¶",cor:"#0066CC",svgFile:"Banco Daycoval/logo-Daycoval- maior.svg"},{nome:"Banco Paulista",logo:"üü¢",cor:"#00AA00",svgFile:"Banco Paulista/banco-paulista-nome.svg"},{nome:"BRB - Banco de Brasilia",logo:"üü¶",cor:"#0051BA",svgFile:"BRB - Banco de Brasilia/brb-logo-abreviado.svg"},{nome:"Banco da Amaz√¥nia S.A",logo:"üü©",cor:"#009639",svgFile:"Banco da Amaz√¥nia S.A/banco-da-amazonia.svg"},{nome:"Banco do Nordeste do Brasil S.A",logo:"üü•",cor:"#E71930",svgFile:"Banco do Nordeste do Brasil S.A/Logo_BNB.svg"},{nome:"Outro",logo:"‚ö™",cor:"#64748B",svgFile:null}],n=["#14B8A6","#10B981","#3B82F6","#8B5CF6","#F59E0B","#EF4444"],p=["bank","phone","home"],f=v(!1),C=v(""),k=v(null),_=v(""),D=v(""),w=v("corrente"),E=v("#14B8A6"),M=v(!0),b=v("bank"),u=d(()=>{const x=C.value.trim().toLowerCase();return x?$.filter(a=>a.nome.toLowerCase().includes(x)):$}),B=d(()=>k.value||"Selecione"),S=d(()=>_.value.trim().length>0),j=x=>{const a=x??"",s=a.split(" - ").map(F=>F.trim()).filter(Boolean);return s.length>=2?{institution:s[0]??null,nickname:s.slice(1).join(" - ")}:{institution:null,nickname:a.trim()}},G=x=>{const a=x.target;D.value=de(a.value)},H=d(()=>ue(D.value)),Q=()=>I("close"),W=()=>{if(!g.initial?.id)return;const x=k.value&&k.value!=="Outro"?k.value:null,a=_.value.trim(),s=x?`${x}${a?` - ${a}`:""}`.trim():a;s&&I("save",{id:g.initial.id,name:s,icon:b.value,current_balance:H.value,color:E.value,incluir_soma:M.value,institution:x,bank_account_type:w.value})};return ve(()=>g.open,x=>{if(!x)return;const a=g.initial??null;if(C.value="",!a)return;const s=j(a.name);k.value=a.institution??s.institution??"Outro",_.value=s.nickname,D.value=Ye(Number(a.current_balance??0)),E.value=a.color??"#14B8A6",M.value=a.incluir_soma??!0;const F=String(a.bank_account_type??"corrente");w.value=F==="poupanca"?"poupanca":F==="salario"?"salario":"corrente";const X=String(a.icon??"bank");b.value=p.includes(X)?X:"bank"}),(x,a)=>(o(),r(N,null,[V.open?(o(),r("div",qe,[e("header",{class:"flex items-center gap-3 px-5 pb-4 pt-[calc(1rem+env(safe-area-inset-top))]"},[e("button",{type:"button",class:"flex h-10 w-10 items-center justify-center rounded-2xl bg-slate-100 text-slate-600","aria-label":"Voltar",onClick:Q},[...a[10]||(a[10]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M15 18l-6-6 6-6"})],-1)])]),a[11]||(a[11]=e("div",{class:"text-xl font-semibold tracking-tight text-slate-900"},"Editar conta",-1))]),e("main",Ge,[e("div",He,[e("div",{class:"flex h-16 w-16 items-center justify-center rounded-3xl text-white shadow-lg shadow-black/10",style:le({backgroundColor:E.value})},[b.value==="bank"?(o(),r("svg",We,[...a[12]||(a[12]=[e("path",{d:"M3 10h18"},null,-1),e("path",{d:"M5 10V8l7-5 7 5v2"},null,-1),e("path",{d:"M6 10v9"},null,-1),e("path",{d:"M18 10v9"},null,-1)])])):b.value==="phone"?(o(),r("svg",Je,[...a[13]||(a[13]=[e("rect",{x:"7",y:"2",width:"10",height:"20",rx:"2"},null,-1),e("path",{d:"M11 19h2"},null,-1)])])):(o(),r("svg",Ke,[...a[14]||(a[14]=[e("path",{d:"M3 10h18"},null,-1),e("path",{d:"M5 10V8l7-5 7 5v2"},null,-1),e("path",{d:"M6 10v9"},null,-1),e("path",{d:"M18 10v9"},null,-1)])]))],4)]),e("div",Qe,[e("div",null,[a[16]||(a[16]=e("div",{class:"mb-2 text-sm font-semibold text-slate-700"},"Institui√ß√£o financeira",-1)),e("button",{type:"button",class:"flex w-full items-center justify-between rounded-2xl border border-slate-200 bg-slate-50 px-4 py-4 text-left text-sm font-semibold text-slate-700",onClick:a[0]||(a[0]=s=>f.value=!0)},[e("span",Xe,m(B.value),1),a[15]||(a[15]=e("svg",{class:"h-5 w-5 text-slate-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M9 5l7 7-7 7"})],-1))])]),e("div",null,[a[17]||(a[17]=e("div",{class:"mb-2 text-sm font-semibold text-slate-700"},"Nome da conta",-1)),ie(e("input",{"onUpdate:modelValue":a[1]||(a[1]=s=>_.value=s),type:"text",placeholder:"Ex: Conta pessoal",class:"w-full appearance-none rounded-2xl border border-slate-200 bg-slate-50 px-4 py-4 text-sm font-semibold text-slate-700 placeholder:text-slate-400 focus:border-teal-400 focus:outline-none focus:ring-0 focus-visible:outline-none"},null,512),[[re,_.value]])]),e("div",null,[a[18]||(a[18]=e("div",{class:"mb-2 text-sm font-semibold text-slate-700"},"Saldo atual",-1)),e("input",{value:D.value,type:"text",inputmode:"numeric",pattern:"[0-9]*",placeholder:"0,00",class:"w-full appearance-none rounded-2xl border border-slate-200 bg-slate-50 px-4 py-4 text-sm font-semibold text-slate-700 focus:border-teal-400 focus:outline-none focus:ring-0 focus-visible:outline-none",onInput:G,onKeydown:a[2]||(a[2]=(...s)=>z(Me)&&z(Me)(...s)),"aria-label":"Saldo atual"},null,40,et)]),e("div",null,[a[19]||(a[19]=e("div",{class:"mb-2 text-sm font-semibold text-slate-700"},"Tipo de conta",-1)),e("div",tt,[e("button",{type:"button",class:y(["rounded-2xl px-4 py-3 text-sm font-semibold",w.value==="corrente"?"bg-teal-500 text-white":"bg-white text-slate-500 ring-1 ring-slate-200"]),onClick:a[3]||(a[3]=s=>w.value="corrente")}," Corrente ",2),e("button",{type:"button",class:y(["rounded-2xl px-4 py-3 text-sm font-semibold",w.value==="poupanca"?"bg-teal-500 text-white":"bg-white text-slate-500 ring-1 ring-slate-200"]),onClick:a[4]||(a[4]=s=>w.value="poupanca")}," Poupan√ßa ",2),e("button",{type:"button",class:y(["rounded-2xl px-4 py-3 text-sm font-semibold",w.value==="salario"?"bg-teal-500 text-white":"bg-white text-slate-500 ring-1 ring-slate-200"]),onClick:a[5]||(a[5]=s=>w.value="salario")}," Sal√°rio ",2)])]),e("div",null,[a[20]||(a[20]=e("div",{class:"mb-2 text-sm font-semibold text-slate-700"},"Cor da conta",-1)),e("div",lt,[(o(),r(N,null,R(n,s=>e("button",{key:s,type:"button",class:y(["h-12 w-12 rounded-2xl border-2 transition",E.value===s?"border-slate-900 ring-2 ring-white ring-offset-2 ring-offset-slate-900":"border-transparent hover:border-slate-200"]),style:le({backgroundColor:s}),onClick:F=>E.value=s,"aria-label":`Cor ${s}`},null,14,at)),64))])]),e("div",st,[e("div",nt,[a[21]||(a[21]=e("div",{class:"text-sm font-semibold text-slate-700"},"Incluir na soma da tela inicial",-1)),e("button",{type:"button",class:y(["relative inline-flex h-6 w-11 items-center rounded-full transition",M.value?"bg-teal-500":"bg-slate-300"]),onClick:a[6]||(a[6]=s=>M.value=!M.value),"aria-label":"Incluir na soma"},[e("span",{class:y(["inline-block h-5 w-5 transform rounded-full bg-white transition",M.value?"translate-x-5":"translate-x-0.5"])},null,2)],2)])]),e("div",null,[a[25]||(a[25]=e("div",{class:"mb-2 text-sm font-semibold text-slate-700"},"√çcone",-1)),e("div",ot,[(o(),r(N,null,R(p,s=>e("button",{key:s,type:"button",class:y(["flex h-14 w-full items-center justify-center rounded-2xl bg-slate-50 ring-1 ring-slate-200",b.value===s?"ring-2 ring-teal-400":""]),onClick:F=>b.value=s,"aria-label":`√çcone ${s}`},[s==="bank"?(o(),r("svg",rt,[...a[22]||(a[22]=[e("path",{d:"M3 10h18"},null,-1),e("path",{d:"M5 10V8l7-5 7 5v2"},null,-1),e("path",{d:"M6 10v9"},null,-1),e("path",{d:"M18 10v9"},null,-1)])])):s==="phone"?(o(),r("svg",ut,[...a[23]||(a[23]=[e("rect",{x:"7",y:"2",width:"10",height:"20",rx:"2"},null,-1),e("path",{d:"M11 19h2"},null,-1)])])):(o(),r("svg",dt,[...a[24]||(a[24]=[e("path",{d:"M4 19V5"},null,-1),e("path",{d:"M10 19V9"},null,-1),e("path",{d:"M16 19v-4"},null,-1),e("path",{d:"M22 19V7"},null,-1)])]))],10,it)),64))])])])]),e("footer",ct,[e("div",vt,[e("button",{type:"button",class:y(["w-full rounded-2xl py-4 text-base font-semibold text-white transition-all",S.value?"bg-teal-500 shadow-lg shadow-teal-500/25":"bg-slate-300 shadow-none cursor-not-allowed opacity-60"]),disabled:!S.value,onClick:W}," Salvar altera√ß√µes ",10,mt)])])])):O("",!0),h(Pe,{open:f.value,title:"Institui√ß√£o financeira",onClose:a[9]||(a[9]=s=>f.value=!1)},{default:q(()=>[e("div",bt,[ie(e("input",{"onUpdate:modelValue":a[7]||(a[7]=s=>C.value=s),type:"text",placeholder:"Buscar por nome",class:"w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-700 placeholder:text-slate-400 focus:border-teal-400 focus:outline-none focus:ring-0"},null,512),[[re,C.value]]),e("div",pt,[(o(!0),r(N,null,R(u.value,s=>(o(),r("button",{key:s.nome,type:"button",class:"flex items-center gap-3 rounded-2xl bg-slate-50 px-4 py-4 text-left ring-1 ring-slate-200/70",onClick:()=>{k.value=s.nome,f.value=!1}},[s.svgFile?(o(),r("div",gt,[e("img",{src:`/Bancos-em-SVG-main/${s.svgFile}`,alt:s.nome,class:"h-8 w-8 object-contain",onError:a[8]||(a[8]=F=>F.target.style.display="none")},null,40,ft)])):(o(),r("span",{key:1,class:"flex h-10 w-10 items-center justify-center rounded-2xl text-lg",style:le({backgroundColor:`${s.cor}22`,color:s.cor})},m(s.logo),5)),e("div",wt,[e("div",ht,m(s.nome),1)])],8,xt))),128))])])]),_:1},8,["open"])],64))}}),yt={key:0,class:"fixed inset-0 z-[90] bg-white flex flex-col"},kt={class:"border-b border-slate-200/70 px-5 pt-[calc(1rem+env(safe-area-inset-top))] pb-4 flex items-center gap-4"},_t={class:"flex-1 overflow-y-auto px-5 py-6 max-w-md mx-auto w-full"},Bt={class:"mb-6"},$t={class:"mb-6"},Ct=["value"],Mt={key:0,class:"mt-3 rounded-lg border-l-4 border-amber-400 bg-amber-50 p-4"},St={class:"mb-8"},Ft={class:"flex gap-3"},At=["onClick","aria-label"],Dt={class:"rounded-xl border border-slate-200 bg-slate-50 p-4 mb-4"},Et={class:"flex items-center justify-between"},jt=["aria-label"],Nt={class:"border-t border-slate-200/70 bg-white px-5 py-4 max-w-md mx-auto w-full"},Vt=["disabled"],Ae=ce({__name:"WalletEditModal",props:{open:{type:Boolean},wallet:{}},emits:["close","save"],setup(V,{emit:Y}){const g=V,I=Y,$=v(""),n=v(""),p=v("#14B8A6"),f=v(!0),C=v(0),k=["#14B8A6","#10B981","#3B82F6","#8B5CF6","#F59E0B","#EF4444"],_=d(()=>ue(n.value)!==C.value),D=d(()=>ue(n.value)),w=d(()=>$.value.trim().length>0),E=b=>{const u=b.target;n.value=de(u.value)},M=()=>{if(!g.wallet)return;const b={id:g.wallet.id,name:$.value.trim(),initial_balance:D.value,color:p.value};g.wallet.incluir_soma!==void 0&&(b.incluir_soma=f.value),I("save",b)};return ve(()=>g.open,b=>{if(!b||!g.wallet)return;$.value=g.wallet.name;const u=g.wallet.initial_balance??g.wallet.current_balance;C.value=u,n.value=de(String(u*100)),p.value=g.wallet.color??"#14B8A6",f.value=g.wallet.incluir_soma??!0}),(b,u)=>V.open?(o(),r("div",yt,[e("header",kt,[e("button",{type:"button",class:"text-slate-600 hover:text-slate-900 transition",onClick:u[0]||(u[0]=B=>I("close"))},[...u[3]||(u[3]=[e("svg",{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1)])]),u[4]||(u[4]=e("h1",{class:"text-lg font-semibold text-slate-900"},"Editar Carteira",-1))]),e("main",_t,[u[10]||(u[10]=_e('<div class="flex justify-center mb-8"><div class="flex h-20 w-20 items-center justify-center rounded-3xl bg-teal-50"><svg class="h-10 w-10 text-teal-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"></path><path d="M3 5v14a2 2 0 0 0 2 2h16v-5"></path><path d="M18 12a2 2 0 0 0 0 4h4v-4Z"></path></svg></div></div>',1)),e("div",Bt,[u[5]||(u[5]=e("label",{class:"block text-sm font-semibold text-slate-900 mb-2"},"Nome da carteira",-1)),ie(e("input",{"onUpdate:modelValue":u[1]||(u[1]=B=>$.value=B),type:"text",placeholder:"Ex: Carteira Principal",class:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-slate-900 placeholder-slate-400 transition focus:border-emerald-500 focus:outline-none"},null,512),[[re,$.value]])]),e("div",$t,[u[7]||(u[7]=e("label",{class:"block text-sm font-semibold text-slate-900 mb-2"},"Saldo inicial",-1)),e("input",{value:n.value,type:"text",inputmode:"decimal",placeholder:"R$ 0,00",class:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-slate-900 placeholder-slate-400 transition focus:border-emerald-500 focus:outline-none",onInput:E},null,40,Ct),_.value?(o(),r("div",Mt,[...u[6]||(u[6]=[_e('<div class="flex gap-2"><span class="flex-shrink-0 text-amber-600">‚ö†Ô∏è</span><div class="flex-1"><p class="text-sm font-semibold text-amber-900">Aten√ß√£o!</p><p class="mt-1 text-sm text-amber-800">Alterar o saldo inicial pode impactar a concilia√ß√£o de contas. Recomendamos criar uma transa√ß√£o de ajuste ao inv√©s de alterar diretamente.</p></div></div>',1)])])):O("",!0)]),e("div",St,[u[8]||(u[8]=e("label",{class:"block text-sm font-semibold text-slate-900 mb-3"},"Cor da carteira",-1)),e("div",Ft,[(o(),r(N,null,R(k,B=>e("button",{key:B,type:"button",style:le({backgroundColor:B}),class:y(["h-12 w-12 rounded-2xl border-2 transition",p.value===B?"border-slate-900 ring-2 ring-white ring-offset-2 ring-offset-slate-900":"border-transparent hover:border-slate-200"]),onClick:S=>p.value=B,"aria-label":`Select color ${B}`},null,14,At)),64))])]),e("div",Dt,[e("div",Et,[u[9]||(u[9]=e("label",{class:"text-sm font-semibold text-slate-900"},"Incluir na soma da tela inicial",-1)),e("button",{type:"button",class:y(["relative inline-flex h-6 w-11 items-center rounded-full transition",f.value?"bg-emerald-500":"bg-slate-300"]),onClick:u[2]||(u[2]=B=>f.value=!f.value),"aria-label":f.value?"Ativado":"Desativado"},[e("span",{class:y(["inline-block h-5 w-5 transform rounded-full bg-white transition",f.value?"translate-x-5":"translate-x-0.5"])},null,2)],10,jt)])])]),e("footer",Nt,[e("button",{type:"button",onClick:M,disabled:!w.value,class:y(["w-full rounded-xl py-3 font-semibold transition",w.value?"bg-emerald-500 text-white hover:bg-emerald-600 active:bg-emerald-700":"bg-slate-300 text-white shadow-none cursor-not-allowed opacity-60"])}," Salvar altera√ß√µes ",10,Vt)])])):O("",!0)}}),It={class:"flex items-center justify-between pt-2"},Tt={class:"text-center"},Lt={key:0,class:"text-[11px] font-bold uppercase tracking-wide text-slate-400"},Pt={key:1,class:"text-[11px] font-bold uppercase tracking-wide text-slate-400"},zt={class:"mt-1 flex items-center justify-center gap-2"},Ot={class:"text-lg font-semibold text-slate-900"},Rt={class:"relative"},Yt={class:"mt-6"},Ut={key:0,class:"mt-6 rounded-lg border-l-4 border-amber-500 bg-amber-50 p-3"},Zt={class:"mt-6 rounded-3xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60"},qt={class:"text-[11px] font-bold uppercase tracking-wide text-slate-400"},Gt={key:0,class:"mt-2 h-9 w-48 animate-pulse rounded-lg bg-slate-200"},Ht={key:1,class:"mt-2 text-3xl font-bold tracking-tight text-slate-900"},Wt={key:2,class:"mt-2 text-xs text-slate-400"},Jt={key:3,class:"mt-5 grid grid-cols-2 gap-3"},Kt={key:4,class:"mt-5 grid grid-cols-2 gap-3"},Qt={class:"rounded-2xl bg-emerald-50 p-4 ring-1 ring-emerald-100"},Xt={class:"mt-1 text-base font-semibold text-emerald-700"},el={class:"rounded-2xl bg-red-50 p-4 ring-1 ring-red-100"},tl={class:"mt-1 text-base font-semibold text-red-600"},ll={class:"mt-8 pb-[calc(2rem+env(safe-area-inset-bottom))]"},al={key:0,class:"mt-4 rounded-3xl border border-dashed border-slate-200 bg-slate-50 px-5 py-10 text-center"},sl={key:1,class:"mt-4 space-y-4"},nl={class:"px-5 py-4 text-xs font-bold uppercase tracking-wide text-slate-400"},ol={class:"divide-y divide-slate-100"},il={class:"min-w-0"},rl={class:"truncate text-sm font-semibold text-slate-900"},ul={class:"mt-1 text-xs font-semibold text-slate-400"},dl={key:0,class:"mt-1 text-[11px] font-semibold text-slate-400"},cl={class:"space-y-8"},vl={class:"flex items-center gap-4"},ml={class:"flex flex-1 items-center justify-center gap-2"},bl={class:"text-xl font-semibold text-slate-900"},pl={class:"flex items-center gap-3"},xl={class:"grid gap-6 xl:grid-cols-[420px_1fr]"},gl={class:"rounded-2xl bg-white p-7 shadow-sm ring-1 ring-slate-200/60"},fl={key:0,class:"mt-3 h-9 w-48 animate-pulse rounded-lg bg-slate-200"},wl={key:1,class:"mt-3 text-3xl font-bold tracking-tight text-slate-900"},hl={class:"mt-6 rounded-2xl bg-slate-50 p-4 text-sm font-semibold text-slate-600"},yl={class:"rounded-2xl bg-white p-7 shadow-sm ring-1 ring-slate-200/60"},kl={class:"flex items-center justify-between"},_l={key:0,class:"mt-6 space-y-3"},Bl={class:"min-w-0"},$l={class:"truncate text-sm font-semibold text-slate-900"},Cl={class:"mt-1 text-xs font-semibold text-slate-400"},Ml={key:1,class:"mt-6 rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-6 py-10 text-center"},De="Isso ir√° excluir tamb√©m todas as transa√ß√µes vinculadas a esta conta. Esta a√ß√£o n√£o pode ser desfeita.",Il=ce({__name:"Show",props:{accountKey:{}},setup(V){const Y=V,g=ze(),I=Ie(),$=d(()=>I.props.bootstrap??{entries:[],goals:[],accounts:[],categories:[],tags:[]}),n=d(()=>$.value.accounts.find(l=>l.id===Y.accountKey)),p=d(()=>n.value?.name??"Conta"),f=d(()=>n.value?.institution??null),C=d(()=>n.value?.svgPath??Ze(f.value??p.value??null)),k=d(()=>n.value?.type==="wallet"||n.value?.icon==="wallet"),_=v(new Map),D=v(new Map),w=v(new Map),E=async l=>{if(l){_.value.delete(l),D.value.delete(l),w.value.set(l,!0);try{const[t,i]=l.split("-").map(Number),c=await te(`/api/contas-by-month?year=${t}&month=${i}`,{method:"GET"}),A=c?.accounts??c?.contas??[],K=Array.isArray(A)?A.find(Ve=>String(Ve.id)===String(Y.accountKey)):null,se=Number(K?.current_balance??K?.saldo_atual??K?.saldo??0);_.value.set(l,Number.isFinite(se)?se:0),c?.mode&&D.value.set(l,String(c.mode))}catch(t){console.error("Failed to load balance for month",t),_.value.set(l,0)}finally{w.value.set(l,!1)}}},M=d(()=>$.value.entries??[]),b=l=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(l),u=d(()=>{const l=new Date,t=[];for(let i=-120;i<=120;i+=1){const c=new Date(l.getFullYear(),l.getMonth()+i,1),A=new Intl.DateTimeFormat("pt-BR",{month:"short"}).format(c).replace(".","").toUpperCase();t.push({key:`${c.getFullYear()}-${c.getMonth()}`,label:A,date:c})}return t}),B=`${new Date().getFullYear()}-${new Date().getMonth()}`,S=v(u.value.find(l=>l.key===B)?.key??u.value[0]?.key??""),j=d(()=>u.value.find(l=>l.key===S.value)??u.value[0]);ve(S,l=>{E(l)},{immediate:!0});const G=d(()=>{const l=S.value;return w.value.get(l)?null:_.value.has(l)?_.value.get(l)??0:null}),H=d(()=>{const l=S.value;return l?w.value.get(l)??!1:!1}),Q=d(()=>{const l=p.value;return l?(M.value??[]).filter(t=>t.accountLabel===l):[]}),W=d(()=>{const l=j.value?.date?.getMonth(),t=j.value?.date?.getFullYear();return l==null||t==null?[]:Q.value.filter(c=>{if(!c.transactionDate)return!0;const A=new Date(c.transactionDate);return A.getMonth()===l&&A.getFullYear()===t}).sort((c,A)=>{const K=c.transactionDate?new Date(c.transactionDate).getTime():0;return(A.transactionDate?new Date(A.transactionDate).getTime():0)-K})}),x=d(()=>W.value.filter(l=>l.kind==="income").reduce((l,t)=>l+(Number(t.amount)||0),0)),a=d(()=>W.value.filter(l=>l.kind==="expense").reduce((l,t)=>l+(Number(t.amount)||0),0)),s=d(()=>{const l=new Date,t=j.value?.date;return t?t.getMonth()===l.getMonth()&&t.getFullYear()===l.getFullYear():!0}),F=d(()=>n.value?(G.value??0)-(x.value-a.value):0);d(()=>F.value+x.value-a.value);const X=d(()=>n.value?.type!=="wallet"||!s.value?!1:a.value>x.value),me=d(()=>{const l=new Map;for(const t of W.value){const i=t.dateLabel??"SEM DATA",c=l.get(i)??[];c.push(t),l.set(i,c)}return Array.from(l.entries()).map(([t,i])=>({dateLabel:t,list:i}))}),Ee=l=>{const t=l.transactionDate?new Date(l.transactionDate):new Date,i=String(t.getDate()).padStart(2,"0"),c=t.toLocaleString("pt-BR",{month:"short"}).replace(".","").toUpperCase();return`${i} ${c}`},be=d(()=>Q.value.map(l=>({id:l.id,day:Ee(l),title:l.title,amount:l.amount,kind:l.kind}))),J=v(!1),ae=v(""),U=l=>{ae.value=l,J.value=!0},T=v(!1),L=v(!1),Z=v(!1),P=v(!1),pe=d(()=>!n.value||n.value.type!=="bank"?null:{id:String(n.value.id),name:n.value.name,icon:n.value.icon??"bank",current_balance:Number(n.value.current_balance??0),color:n.value.color??"#14B8A6",incluir_soma:n.value.incluir_soma??!0,institution:n.value.institution??null,bank_account_type:n.value.bank_account_type??null}),xe=d(()=>`Tem certeza que deseja excluir a conta "${p.value}"?`),ge=async l=>{if(l.id)try{await te(`/api/contas/${l.id}`,{method:"PATCH",body:JSON.stringify({name:l.name,icon:l.icon,type:"bank",current_balance:l.current_balance,color:l.color,incluir_soma:l.incluir_soma,institution:l.institution,bank_account_type:l.bank_account_type})}),U("Conta atualizada"),L.value=!1,oe.reload()}catch{U("N√£o foi poss√≠vel atualizar a conta")}},fe=async()=>{if(n.value)try{await te(`/api/contas/${n.value.id}`,{method:"DELETE"}),U("Conta exclu√≠da"),oe.visit(route("accounts.index"))}catch{U("N√£o foi poss√≠vel excluir a conta")}finally{P.value=!1}},we=v(!1),he=v("income"),ye=v(null),je=()=>{he.value="income",ye.value={account:p.value},we.value=!0},Ne=()=>{he.value="transfer",ye.value={account:p.value},we.value=!0},ke=async l=>{try{const t={name:l.name,type:"wallet",icon:"wallet",initial_balance:l.initial_balance,color:l.color};l.incluir_soma!==void 0&&(t.incluir_soma=l.incluir_soma),await te(`/api/contas/${l.id}`,{method:"PATCH",body:JSON.stringify(t)}),U("Carteira atualizada"),Z.value=!1,oe.reload()}catch{U("N√£o foi poss√≠vel atualizar a carteira")}};return(l,t)=>(o(),r(N,null,[h(z(Te),{title:p.value},null,8,["title"]),z(g)?(o(),Be(Oe,{key:0,"show-nav":!1},{default:q(()=>[e("header",It,[h(z(ne),{href:l.route("dashboard"),class:"flex h-10 w-10 items-center justify-center rounded-2xl bg-white text-slate-600 shadow-sm ring-1 ring-slate-200/60","aria-label":"Voltar"},{default:q(()=>[...t[16]||(t[16]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M15 18l-6-6 6-6"})],-1)])]),_:1},8,["href"]),e("div",Tt,[n.value?.type!=="wallet"?(o(),r("div",Lt,"Conta")):(o(),r("div",Pt,"Carteira")),e("div",zt,[h(Se,{institution:f.value??p.value,"svg-path":C.value,"is-wallet":k.value,"fallback-icon":k.value?"wallet":"account","container-class":"flex h-9 w-9 items-center justify-center overflow-hidden rounded-2xl bg-white ring-1 ring-slate-200/60","img-class":"h-6 w-6 object-contain","fallback-icon-class":"h-5 w-5 text-slate-500"},null,8,["institution","svg-path","is-wallet","fallback-icon"]),e("div",Ot,m(p.value),1)])]),e("div",Rt,[e("button",{type:"button",class:"flex h-10 w-10 items-center justify-center rounded-2xl bg-white text-slate-600 shadow-sm ring-1 ring-slate-200/60","aria-label":"A√ß√µes",onClick:t[0]||(t[0]=i=>T.value=!T.value)},[...t[17]||(t[17]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 20a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"}),e("path",{d:"M12 13a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"}),e("path",{d:"M12 6a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"})],-1)])]),T.value?(o(),r("div",{key:0,class:"fixed inset-0 z-[65]",onClick:t[4]||(t[4]=i=>T.value=!1)},[e("div",{class:"absolute right-5 top-16 w-56 overflow-hidden rounded-2xl bg-white shadow-2xl ring-1 ring-slate-200/70",onClick:t[3]||(t[3]=Le(()=>{},["stop"]))},[e("button",{type:"button",class:"flex w-full items-center gap-3 px-4 py-3 text-left text-sm font-semibold text-slate-700 hover:bg-slate-50",onClick:t[1]||(t[1]=i=>n.value?.type==="wallet"?(Z.value=!0,T.value=!1):(L.value=!0,T.value=!1))},[t[18]||(t[18]=e("span",{class:"flex h-9 w-9 items-center justify-center rounded-xl bg-slate-100 text-slate-600"},[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 20h9"}),e("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4Z"})])],-1)),ee(" "+m(n.value?.type==="wallet"?"Editar carteira":"Editar conta"),1)]),e("button",{type:"button",class:"flex w-full items-center gap-3 px-4 py-3 text-left text-sm font-semibold text-red-600 hover:bg-red-50",onClick:t[2]||(t[2]=i=>{P.value=!0,T.value=!1})},[...t[19]||(t[19]=[e("span",{class:"flex h-9 w-9 items-center justify-center rounded-xl bg-red-50 text-red-500"},[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18"}),e("path",{d:"M8 6V4h8v2"}),e("path",{d:"M6 6l1 16h10l1-16"})])],-1),ee(" Excluir conta ",-1)])])])])):O("",!0)])]),e("div",Yt,[h(Ue,{modelValue:S.value,"onUpdate:modelValue":t[5]||(t[5]=i=>S.value=i),months:u.value},null,8,["modelValue","months"])]),X.value?(o(),r("div",Ut,[e("div",{class:"flex items-start gap-2"},[t[23]||(t[23]=e("div",{class:"text-lg"},"‚ö†Ô∏è",-1)),e("div",{class:"flex-1"},[t[22]||(t[22]=e("h3",{class:"text-sm font-semibold text-amber-900"}," Voc√™ registrou mais gastos do que tinha na carteira ",-1)),e("div",{class:"mt-3 grid grid-cols-2 gap-3"},[e("button",{type:"button",class:"flex items-center justify-center rounded-lg bg-white px-3 py-2 text-center text-sm font-semibold text-amber-700 hover:bg-amber-100",onClick:je},[...t[20]||(t[20]=[e("span",null,"Adicionar dinheiro",-1)])]),e("button",{type:"button",class:"flex items-center justify-center rounded-lg bg-white px-3 py-2 text-center text-sm font-semibold text-amber-700 hover:bg-amber-100",onClick:Ne},[...t[21]||(t[21]=[e("span",null,"Criar transfer√™ncia",-1)])])])])])])):O("",!0),e("section",Zt,[e("div",qt,m(s.value?"Saldo atual":"Balan√ßo final"),1),H.value?(o(),r("div",Gt)):(o(),r("div",Ht,m(b(G.value??0)),1)),!s.value&&n.value?.type==="wallet"?(o(),r("div",Wt," (in√≠cio: "+m(j.value?.date?.getDate()===1?"01":String(j.value?.date?.getDate()).padStart(2,"0"))+" - final: "+m(new Date(j.value?.date?.getFullYear()??2024,(j.value?.date?.getMonth()??0)+1,0).getDate())+") ",1)):O("",!0),H.value?(o(),r("div",Jt,[...t[24]||(t[24]=[e("div",{class:"rounded-2xl bg-emerald-50 p-4 ring-1 ring-emerald-100"},[e("div",{class:"flex items-center justify-between text-[10px] font-semibold uppercase tracking-wide text-emerald-700"},[e("span",null,"Entrou"),e("span",null,"‚Ä∫")]),e("div",{class:"mt-1 h-6 w-24 animate-pulse rounded bg-emerald-200"})],-1),e("div",{class:"rounded-2xl bg-red-50 p-4 ring-1 ring-red-100"},[e("div",{class:"flex items-center justify-between text-[10px] font-semibold uppercase tracking-wide text-red-600"},[e("span",null,"Saiu"),e("span",null,"‚Ä∫")]),e("div",{class:"mt-1 h-6 w-24 animate-pulse rounded bg-red-200"})],-1)])])):(o(),r("div",Kt,[e("div",Qt,[t[25]||(t[25]=e("div",{class:"flex items-center justify-between text-[10px] font-semibold uppercase tracking-wide text-emerald-700"},[e("span",null,"Entrou"),e("span",null,"‚Ä∫")],-1)),e("div",Xt,m(b(x.value)),1)]),e("div",el,[t[26]||(t[26]=e("div",{class:"flex items-center justify-between text-[10px] font-semibold uppercase tracking-wide text-red-600"},[e("span",null,"Saiu"),e("span",null,"‚Ä∫")],-1)),e("div",tl,m(b(a.value)),1)])]))]),e("section",ll,[t[28]||(t[28]=e("div",{class:"text-lg font-semibold text-slate-900"},"Movimenta√ß√µes",-1)),me.value.length===0?(o(),r("div",al,[...t[27]||(t[27]=[e("div",{class:"text-sm font-semibold text-slate-900"},"Sem lan√ßamentos",-1),e("div",{class:"mt-1 text-xs text-slate-500"},"Quando houver movimenta√ß√µes, elas aparecem aqui.",-1)])])):(o(),r("div",sl,[(o(!0),r(N,null,R(me.value,i=>(o(),r("div",{key:i.dateLabel,class:"rounded-3xl bg-white shadow-sm ring-1 ring-slate-200/60"},[e("div",nl,m(i.dateLabel),1),e("div",ol,[(o(!0),r(N,null,R(i.list,c=>(o(),r("div",{key:c.id,class:"flex items-center justify-between gap-4 px-5 py-4"},[e("div",il,[e("div",rl,m(c.title),1),e("div",ul,m(c.categoryLabel),1)]),e("div",{class:y(["text-right text-sm font-semibold",c.kind==="income"?"text-emerald-600":"text-red-500"])},[ee(m(c.kind==="income"?"+":"-")+" "+m(b(c.amount))+" ",1),c.installment?(o(),r("div",dl,m(c.installment),1)):O("",!0)],2)]))),128))])]))),128))]))]),h($e,{show:J.value,message:ae.value,onDismiss:t[6]||(t[6]=i=>J.value=!1)},null,8,["show","message"]),h(Fe,{open:L.value,initial:pe.value,onClose:t[7]||(t[7]=i=>L.value=!1),onSave:ge},null,8,["open","initial"]),h(Ae,{open:Z.value,wallet:n.value?{id:n.value.id,name:n.value.name,initial_balance:n.value.initial_balance,current_balance:n.value.current_balance,color:n.value.color??"#14B8A6",incluir_soma:n.value.incluir_soma??!0}:null,onClose:t[8]||(t[8]=i=>Z.value=!1),onSave:ke},null,8,["open","wallet"]),h(Ce,{open:P.value,title:"Excluir conta?",message:xe.value,warningText:De,danger:"",confirmLabel:"Excluir",onClose:t[9]||(t[9]=i=>P.value=!1),onConfirm:fe},null,8,["open","message"])]),_:1})):(o(),Be(Re,{key:1,title:p.value,subtitle:"Detalhes da conta","show-search":!1,"show-new-action":!1},{default:q(()=>[e("div",cl,[e("div",vl,[h(z(ne),{href:l.route("accounts.index"),class:"inline-flex h-11 w-11 items-center justify-center rounded-full border border-slate-200 bg-white text-slate-600 shadow-sm hover:bg-slate-50","aria-label":"Voltar"},{default:q(()=>[...t[29]||(t[29]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M15 18l-6-6 6-6"})],-1)])]),_:1},8,["href"]),e("div",ml,[h(Se,{institution:f.value??p.value,"svg-path":C.value,"is-wallet":k.value,"fallback-icon":k.value?"wallet":"account","container-class":"flex h-10 w-10 items-center justify-center overflow-hidden rounded-2xl bg-white ring-1 ring-slate-200/60","img-class":"h-7 w-7 object-contain","fallback-icon-class":"h-5 w-5 text-slate-500"},null,8,["institution","svg-path","is-wallet","fallback-icon"]),e("div",bl,m(p.value),1)]),e("div",pl,[e("button",{type:"button",class:"inline-flex h-11 items-center gap-2 rounded-xl border border-slate-200 bg-white px-4 text-sm font-semibold text-slate-600 hover:bg-slate-50",onClick:t[10]||(t[10]=i=>L.value=!0)}," Editar "),e("button",{type:"button",class:"inline-flex h-11 items-center gap-2 rounded-xl border border-red-200 bg-white px-4 text-sm font-semibold text-red-600 hover:bg-red-50",onClick:t[11]||(t[11]=i=>P.value=!0)}," Excluir ")])]),e("div",xl,[e("div",gl,[t[30]||(t[30]=e("div",{class:"text-xs font-semibold uppercase tracking-wide text-slate-400"},"Saldo atual",-1)),H.value?(o(),r("div",fl)):(o(),r("div",wl,m(b(G.value??0).replace("R$","R$")),1)),e("div",hl," Tipo: "+m(n.value?.type??"-"),1)]),e("div",yl,[e("div",kl,[t[32]||(t[32]=e("div",{class:"text-base font-semibold text-slate-900"},"Transa√ß√µes desta conta",-1)),h(z(ne),{href:l.route("accounts.index"),class:"text-sm font-semibold text-[#14B8A6]"},{default:q(()=>[...t[31]||(t[31]=[ee("Ver todas",-1)])]),_:1},8,["href"])]),be.value.length?(o(),r("div",_l,[(o(!0),r(N,null,R(be.value,i=>(o(),r("div",{key:i.id,class:"flex items-center justify-between rounded-2xl border border-slate-100 bg-white px-5 py-4"},[e("div",Bl,[e("div",$l,m(i.title),1),e("div",Cl,m(i.day),1)]),e("div",{class:y(["text-sm font-semibold",i.kind==="income"?"text-emerald-600":"text-red-500"])},m(i.kind==="income"?"+":"-")+m(b(i.amount).replace("R$","R$")),3)]))),128))])):(o(),r("div",Ml,[...t[33]||(t[33]=[e("div",{class:"text-sm font-semibold text-slate-900"},"Sem lan√ßamentos",-1),e("div",{class:"mt-1 text-xs text-slate-500"},"Adicione movimenta√ß√µes para ver o extrato.",-1)])]))])])]),h(Fe,{open:L.value,initial:pe.value,onClose:t[12]||(t[12]=i=>L.value=!1),onSave:ge},null,8,["open","initial"]),h(Ae,{open:Z.value,wallet:n.value?{id:n.value.id,name:n.value.name,initial_balance:n.value.initial_balance,current_balance:n.value.current_balance,color:n.value.color??"#14B8A6",incluir_soma:n.value.incluir_soma??!0}:null,onClose:t[13]||(t[13]=i=>Z.value=!1),onSave:ke},null,8,["open","wallet"]),h(Ce,{open:P.value,title:"Excluir conta?",message:xe.value,warningText:De,danger:"",confirmLabel:"Excluir",onClose:t[14]||(t[14]=i=>P.value=!1),onConfirm:fe},null,8,["open","message"]),h($e,{show:J.value,message:ae.value,onDismiss:t[15]||(t[15]=i=>J.value=!1)},null,8,["show","message"])]),_:1},8,["title"]))],64))}});export{Il as default};
