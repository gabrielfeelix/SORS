import{d as T,c as r,u as H,h as g,g as a,f as C,a as K,b as m,D as R,w as B,i as Z,e as t,o as l,l as J,x as _,I,F as N,r as U,n as Y,t as q,G,H as O,C as Q,m as W}from"./app-Pd0ejbZJ.js";import{_ as X,r as tt}from"./DesktopShell.vue_vue_type_script_setup_true_lang-CaKEcI4E.js";import{u as et,_ as ot}from"./useIsMobile-CRomRP0o.js";import{m as D,p as j,f as st}from"./inputGuards-BV9ov3X1.js";const lt={key:0,class:"relative flex items-center justify-center pt-2"},at={class:"mt-8 space-y-5 pb-[calc(6rem+env(safe-area-inset-bottom))] md:mx-auto md:max-w-md md:rounded-3xl md:bg-white md:p-6 md:pb-6 md:shadow-sm md:ring-1 md:ring-slate-200/60"},nt={class:"flex flex-wrap gap-3"},rt=["onClick","aria-label"],it={key:0,class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ut={key:1,class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},dt={key:2,class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},mt={key:3,class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ct={key:4,class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},pt={key:5,class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},vt=["value"],ft={class:"rounded-2xl border border-blue-100 bg-blue-50 px-4 py-4 text-sm font-semibold text-blue-700"},gt={class:"flex items-start gap-3"},yt=T({__name:"Edit",props:{goalId:{}},setup(y){const b=et(),A=r(()=>b.value?ot:X),V=r(()=>b.value?{showNav:!1}:{title:"Editar meta",showSearch:!1,showNewAction:!1}),S=H(),z=r(()=>S.props.bootstrap??{entries:[],goals:[],accounts:[],categories:[],tags:[]}),x=y,i=r(()=>{const s=z.value.goals.find(n=>n.id===x.goalId);if(!s)return{name:"Meta",icon:"home",target:"0,00",due:"Dezembro 2026",current:0};const e=s.icon==="plane"?"plane":s.icon==="car"?"car":"home",o=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(s.target);return{name:s.title,icon:e,target:o,due:s.due,current:Number(s.current??0)}}),h=g(i.value.name),c=g(i.value.icon),p=g(i.value.target),v=g(i.value.due),E=r(()=>Number(i.value.current??0)),M=r(()=>D(p.value)),F=r(()=>{const s=k(v.value);if(!s||!M.value)return 0;const[e,o]=s.split("-").map(L=>Number(L)),n=new Date(e,(o??1)-1,1),u=new Date,f=(n.getFullYear()-u.getFullYear())*12+(n.getMonth()-u.getMonth())+1,w=Math.max(1,f),d=Math.max(0,M.value-E.value);return Math.ceil(d/w)}),$=s=>{const e=s.target;p.value=st(e.value)},k=s=>{const e=s.trim().toLowerCase();if(!e)return null;const o={jan:1,janeiro:1,fev:2,fevereiro:2,mar:3,março:3,marco:3,abr:4,abril:4,mai:5,maio:5,jun:6,junho:6,jul:7,julho:7,ago:8,agosto:8,set:9,setembro:9,out:10,outubro:10,nov:11,novembro:11,dez:12,dezembro:12},n=e.split(/\s+/),u=n.find(d=>d.match(/^\d{4}$/)),f=n.find(d=>o[d]);if(!u||!f)return null;const w=o[f];return`${u}-${String(w).padStart(2,"0")}-01`},P=async()=>{const s=D(p.value);await tt(route("goals.update",x.goalId),{method:"PATCH",body:JSON.stringify({title:h.value.trim()||"Meta",target_amount:s,due_date:k(v.value),icon:c.value==="plane"?"plane":c.value==="car"?"car":"home"})}),W.visit(route("goals.show",{goalId:x.goalId}))};return(s,e)=>(l(),a(N,null,[C(m(R),{title:"Editar meta"}),(l(),K(Q(A.value),G(O(V.value)),{default:B(()=>[m(b)?(l(),a("header",lt,[C(m(J),{href:s.route("goals.show",{goalId:y.goalId}),class:"absolute left-0 flex h-10 w-10 items-center justify-center rounded-2xl bg-white text-slate-600 shadow-sm ring-1 ring-slate-200/60","aria-label":"Voltar"},{default:B(()=>[...e[3]||(e[3]=[t("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M15 18l-6-6 6-6"})],-1)])]),_:1},8,["href"]),e[4]||(e[4]=t("div",{class:"text-xl font-semibold tracking-tight text-slate-900"},"Editar meta",-1))])):Z("",!0),t("div",at,[t("div",null,[e[5]||(e[5]=t("div",{class:"mb-2 text-sm font-semibold text-slate-700"},"Nome da meta",-1)),_(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>h.value=o),type:"text",placeholder:"Ex: Casa própria...",class:"h-12 w-full rounded-2xl border border-slate-200 bg-white px-4 text-sm font-semibold text-slate-700 placeholder:text-slate-300 focus:border-[#14B8A6] focus:outline-none focus:ring-0"},null,512),[[I,h.value]])]),t("div",null,[e[12]||(e[12]=t("div",{class:"mb-2 text-sm font-semibold text-slate-700"},"Ícone",-1)),t("div",nt,[(l(),a(N,null,U(["home","car","plane","cap","bag","laptop"],o=>t("button",{key:o,type:"button",class:Y(["flex h-12 w-12 items-center justify-center rounded-full bg-slate-50 ring-1 ring-slate-200",c.value===o?"ring-2 ring-[#14B8A6] bg-emerald-50 text-[#14B8A6]":"text-slate-500"]),onClick:n=>c.value=o,"aria-label":o},[o==="home"?(l(),a("svg",it,[...e[6]||(e[6]=[t("path",{d:"M3 10.5L12 3l9 7.5"},null,-1),t("path",{d:"M5 10v10h14V10"},null,-1)])])):o==="car"?(l(),a("svg",ut,[...e[7]||(e[7]=[t("path",{d:"M5 16l1-5 1-3h10l1 3 1 5"},null,-1),t("path",{d:"M7 16h10"},null,-1),t("circle",{cx:"8",cy:"17",r:"1.5"},null,-1),t("circle",{cx:"16",cy:"17",r:"1.5"},null,-1)])])):o==="plane"?(l(),a("svg",dt,[...e[8]||(e[8]=[t("path",{d:"M2 16l20-8-20-8 6 8-6 8Z"},null,-1),t("path",{d:"M6 16v6l4-4"},null,-1)])])):o==="cap"?(l(),a("svg",mt,[...e[9]||(e[9]=[t("path",{d:"M22 10 12 5 2 10l10 5 10-5Z"},null,-1),t("path",{d:"M6 12v5c0 1.7 2.7 3 6 3s6-1.3 6-3v-5"},null,-1)])])):o==="bag"?(l(),a("svg",ct,[...e[10]||(e[10]=[t("path",{d:"M6 8h12l-1 13H7L6 8Z"},null,-1),t("path",{d:"M9 8V6a3 3 0 0 1 6 0v2"},null,-1)])])):(l(),a("svg",pt,[...e[11]||(e[11]=[t("rect",{x:"3",y:"4",width:"18",height:"12",rx:"2"},null,-1),t("path",{d:"M8 20h8"},null,-1),t("path",{d:"M12 16v4"},null,-1)])]))],10,rt)),64))])]),t("div",null,[e[13]||(e[13]=t("div",{class:"mb-2 text-sm font-semibold text-slate-700"},"Valor objetivo",-1)),t("input",{type:"text",inputmode:"numeric",pattern:"[0-9]*",value:p.value,onInput:$,placeholder:"0,00",class:"h-12 w-full rounded-2xl border border-slate-200 bg-white px-4 text-sm font-semibold text-slate-700 focus:border-[#14B8A6] focus:outline-none focus:ring-0",onKeydown:e[1]||(e[1]=(...o)=>m(j)&&m(j)(...o))},null,40,vt)]),t("div",null,[e[14]||(e[14]=t("div",{class:"mb-2 text-sm font-semibold text-slate-700"},"Prazo",-1)),_(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>v.value=o),type:"text",class:"h-12 w-full rounded-2xl border border-slate-200 bg-white px-4 text-sm font-semibold text-slate-700 focus:border-[#14B8A6] focus:outline-none focus:ring-0"},null,512),[[I,v.value]])]),t("div",ft,[t("div",gt,[e[15]||(e[15]=t("span",{class:"flex h-8 w-8 items-center justify-center rounded-full bg-blue-100 text-blue-600"},[t("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"12",cy:"12",r:"9"}),t("path",{d:"M12 10v6"}),t("path",{d:"M12 8h.01"})])],-1)),t("div",null,"R$ "+q(F.value)+",00/mês para atingir a meta no prazo.",1)])])]),t("div",{class:"fixed inset-x-0 bottom-0 bg-white px-5 pb-[calc(1rem+env(safe-area-inset-bottom))] pt-3 shadow-[0_-18px_40px_-32px_rgba(15,23,42,0.45)] md:static md:bg-transparent md:px-0 md:pb-0 md:pt-6 md:shadow-none"},[t("div",{class:"mx-auto w-full max-w-md md:mx-auto"},[t("button",{type:"button",class:"h-[52px] w-full rounded-2xl bg-[#14B8A6] text-base font-bold text-white shadow-[0_2px_8px_rgba(20,184,166,0.25)]",onClick:P}," Salvar alterações ")])])]),_:1},16))],64))}});export{yt as default};
