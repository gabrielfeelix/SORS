import{d as q,h as k,c as b,p as H,a as P,g as l,i as m,e,t as g,f as y,b as _,l as C,w as M,k as O,F as E,r as R,T as V,n as S,o as s,u as D,z as X,Q as L,s as z,L as N}from"./app-DvJ-vTb0.js";import{b as I}from"./useIsMobile-CMH_TBsk.js";const j=()=>document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")??"",U=async()=>{if(!(await fetch("/sanctum/csrf-cookie",{credentials:"same-origin"})).ok)throw new Error("Failed to refresh CSRF token");return j()},A=async(f,i={})=>{const w=async a=>{const d=String(i.method??"GET").toUpperCase(),x=["PATCH","PUT","DELETE"].includes(d),c={"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":a,...x?{"X-HTTP-Method-Override":d}:{},...i.headers??{}};return fetch(f,{credentials:"same-origin",...i,method:x?"POST":i.method??"GET",headers:c})};let o=await w(j());if(o.status===419)try{const a=await U();o=await w(a)}catch{throw window.location.reload(),new Error("Session expired. Reloading page...")}if(!o.ok){const a=await o.text();throw new Error(a||`Request failed: ${o.status}`)}return await o.json()},Le=async(f,i={})=>{const w=async a=>{const d=String(i.method??"GET").toUpperCase(),x=["PATCH","PUT","DELETE"].includes(d),c=new Headers(i.headers??{});c.set("X-Requested-With","XMLHttpRequest"),c.set("X-CSRF-TOKEN",a),x&&c.set("X-HTTP-Method-Override",d);let v=i.body;if(x&&v instanceof FormData){const u=new FormData;for(const[n,h]of v.entries())u.append(n,h);u.set("_method",d),v=u}return fetch(f,{credentials:"same-origin",...i,method:x?"POST":i.method??"GET",body:v,headers:c})};let o=await w(j());if(o.status===419)try{const a=await U();o=await w(a)}catch{throw window.location.reload(),new Error("Session expired. Reloading page...")}if(!o.ok){const a=await o.text();throw new Error(a||`Request failed: ${o.status}`)}return await o.json()},K={key:0,class:"fixed inset-0 z-[90]"},G={class:"absolute right-8 top-[76px] w-[420px] overflow-hidden rounded-3xl bg-white shadow-[0_30px_90px_-45px_rgba(15,23,42,0.55)] ring-1 ring-slate-200/60",role:"dialog","aria-modal":"true"},Z={class:"flex items-center justify-between border-b border-slate-100 px-5 py-4"},Q={class:"mt-0.5 text-xs font-semibold text-slate-400"},W={class:"flex items-center gap-2"},J=["disabled"],Y={class:"max-h-[420px] overflow-y-auto px-5 py-4"},ee={key:0,class:"rounded-2xl bg-slate-50 px-4 py-10 text-center text-sm font-semibold text-slate-500 ring-1 ring-slate-100"},te={key:1,class:"rounded-2xl bg-slate-50 px-4 py-10 text-center ring-1 ring-slate-100"},se={key:2,class:"space-y-3"},oe={class:"flex items-start justify-between gap-3"},le={class:"min-w-0"},ae={class:"mt-1 line-clamp-2 text-xs font-semibold text-slate-500"},ne={key:0,class:"mt-1 h-2 w-2 shrink-0 rounded-full bg-red-500"},re=q({__name:"DesktopNotificationsPopover",props:{open:{type:Boolean}},emits:["close","unread"],setup(f,{emit:i}){const w=f,o=i,a=k(!1),d=k([]),x=b(()=>d.value.filter(u=>!u.read_at).length),c=b(()=>d.value.slice(0,6)),v=async()=>{a.value=!0;try{const u=await A(route("api.notifications.index"));d.value=u.notifications??[],o("unread",x.value)}finally{a.value=!1}};return H(()=>w.open,u=>{u&&v()}),(u,n)=>(s(),P(V,{to:"body"},[f.open?(s(),l("div",K,[e("button",{class:"absolute inset-0 bg-black/10",type:"button","aria-label":"Fechar",onClick:n[0]||(n[0]=h=>o("close"))}),e("section",G,[e("div",Z,[e("div",null,[n[2]||(n[2]=e("div",{class:"text-sm font-semibold text-slate-900"},"Notificações",-1)),e("div",Q,g(x.value)+" não lidas",1)]),e("div",W,[e("button",{type:"button",class:"rounded-2xl bg-slate-100 px-3 py-2 text-xs font-semibold text-slate-600 disabled:opacity-60",disabled:a.value,onClick:v}," Atualizar ",8,J),y(_(C),{href:u.route("notifications.index"),class:"rounded-2xl bg-emerald-50 px-3 py-2 text-xs font-semibold text-emerald-700",onClick:n[1]||(n[1]=h=>o("close"))},{default:M(()=>[...n[3]||(n[3]=[O(" Ver todas ",-1)])]),_:1},8,["href"])])]),e("div",Y,[a.value?(s(),l("div",ee," Carregando… ")):c.value.length===0?(s(),l("div",te,[...n[4]||(n[4]=[e("div",{class:"text-sm font-semibold text-slate-900"},"Sem notificações",-1),e("div",{class:"mt-1 text-xs font-semibold text-slate-500"},"Quando algo importante acontecer, avisamos por aqui.",-1)])])):(s(),l("div",se,[(s(!0),l(E,null,R(c.value,h=>(s(),l("div",{key:h.id,class:"rounded-2xl bg-white px-4 py-3 ring-1 ring-slate-200/60"},[e("div",oe,[e("div",le,[e("div",{class:S(["truncate text-sm font-semibold",h.read_at?"text-slate-700":"text-slate-900"])},g(h.title),3),e("div",ae,g(h.body),1)]),h.read_at?m("",!0):(s(),l("span",ne))])]))),128))]))])])])):m("",!0)]))}}),ie={class:"min-h-screen bg-slate-50"},de={class:"flex min-h-screen"},ce={class:"hidden w-[280px] flex-col border-r border-slate-200/70 bg-white md:flex"},ue={class:"mt-8 flex-1 space-y-2 px-5","aria-label":"Menu principal"},he={key:0,class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},pe={key:1,class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},xe={key:2,class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},fe={key:3,class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ve={key:4,class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},we={key:5,class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ge={class:"text-sm font-semibold"},me={key:0,class:"ml-auto h-9 w-1.5 rounded-full bg-[#14B8A6]"},be={class:"px-5 pb-6"},ye={class:"flex items-center justify-between rounded-2xl bg-white px-4 py-4 ring-1 ring-slate-200/60"},ke={class:"flex items-center gap-3"},_e={class:"flex h-11 w-11 items-center justify-center overflow-hidden rounded-full bg-slate-200 text-sm font-bold text-slate-700"},Ce=["src"],Me={key:1},Te={class:"leading-tight"},$e={class:"text-sm font-semibold text-slate-900"},Be={class:"flex min-w-0 flex-1 flex-col"},Ee={class:"sticky top-0 z-30 border-b border-slate-200/70 bg-white/80 backdrop-blur"},Se={class:"flex items-center justify-between gap-4 px-6 py-4 md:px-10"},je={key:0,class:"text-lg font-semibold text-slate-900"},Ne={key:1,class:"text-sm font-medium text-slate-400"},qe={class:"flex items-center gap-3"},Pe={key:0,class:"hidden items-center gap-2 rounded-2xl bg-slate-50 px-4 py-2 ring-1 ring-slate-200/60 md:flex"},Re=["placeholder"],Ue=["aria-expanded"],Ae={key:0,class:"absolute right-2.5 top-2.5 h-2 w-2 rounded-full bg-red-500"},Fe=["src"],He={key:1},Oe={class:"flex-1 px-6 py-8 md:px-10"},Ve={class:"w-full"},ze=q({__name:"DesktopShell",props:{title:{default:""},subtitle:{default:""},showSearch:{type:Boolean,default:!0},searchPlaceholder:{default:"Buscar…"},showNewAction:{type:Boolean,default:!0},newActionLabel:{default:"Nova Transação"}},emits:["add"],setup(f,{emit:i}){const w=i,o=f,a=D(),d=b(()=>String(a.props?.auth?.user?.name??"")),x=b(()=>d.value.trim().split(/\s+/)[0]??d.value),c=b(()=>a.props?.auth?.user?.profile_photo_url??null),v=b(()=>{const p=d.value.trim().split(/\s+/).filter(Boolean),t=p[0]?.[0]??"K",r=p.length>1?p[p.length-1]?.[0]:"";return`${t}${r}`.toUpperCase()}),u=b(()=>[{label:"Dashboard",href:route("dashboard"),active:route().current("dashboard"),icon:"dashboard"},{label:"Minhas Contas",href:route("accounts.overview"),active:route().current("accounts.overview"),icon:"accounts"},{label:"Transações",href:route("accounts.index"),active:route().current("accounts.*")&&!route().current("accounts.overview"),icon:"cards"},{label:"Cartões de crédito",href:route("credit-cards.my-cards"),active:route().current("credit-cards.*"),icon:"credit"},{label:"Metas",href:route("goals.index"),active:route().current("goals.*"),icon:"target"},{label:"Relatórios",href:route("analysis"),active:route().current("analysis*"),icon:"chart"}]),n=k(!1),h=k(0),F=p=>{h.value=p},T=k(!1),$=async()=>{try{const p=await A(route("api.notifications.count-unread"));h.value=Number(p.count??0)}catch{}};let B=null;return X(()=>{$(),B=window.setInterval($,6e4)}),L(()=>{B&&window.clearInterval(B)}),(p,t)=>(s(),l(E,null,[e("div",ie,[e("div",de,[e("aside",ce,[t[14]||(t[14]=e("div",{class:"px-7 pt-7"},[e("div",{class:"flex items-center gap-3"},[e("div",{class:"flex h-12 w-12 items-center justify-center rounded-2xl bg-[#14B8A6] text-xl font-bold text-white"}," K "),e("div",{class:"text-xl font-semibold tracking-tight text-slate-900"},"Kitamo")])],-1)),e("nav",ue,[(s(!0),l(E,null,R(u.value,r=>(s(),P(_(C),{key:r.label,href:r.href,class:S(["group flex items-center gap-4 rounded-2xl px-4 py-3.5 ring-1 ring-transparent transition",r.active?"bg-emerald-50 text-slate-900 ring-emerald-100":"text-slate-500 hover:bg-slate-50 hover:text-slate-700"])},{default:M(()=>[e("span",{class:S(["flex h-11 w-11 items-center justify-center rounded-2xl",r.active?"bg-white text-emerald-600 ring-1 ring-emerald-100":"bg-slate-100 text-slate-400"])},[r.icon==="dashboard"?(s(),l("svg",he,[...t[5]||(t[5]=[e("rect",{x:"3",y:"3",width:"7",height:"7",rx:"2"},null,-1),e("rect",{x:"14",y:"3",width:"7",height:"7",rx:"2"},null,-1),e("rect",{x:"3",y:"14",width:"7",height:"7",rx:"2"},null,-1),e("rect",{x:"14",y:"14",width:"7",height:"7",rx:"2"},null,-1)])])):r.icon==="cards"?(s(),l("svg",pe,[...t[6]||(t[6]=[e("rect",{x:"3",y:"5",width:"18",height:"14",rx:"3"},null,-1),e("path",{d:"M3 10h18"},null,-1)])])):r.icon==="target"?(s(),l("svg",xe,[...t[7]||(t[7]=[e("circle",{cx:"12",cy:"12",r:"8"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1),e("path",{d:"M12 2v3"},null,-1),e("path",{d:"M22 12h-3"},null,-1),e("path",{d:"M12 22v-3"},null,-1),e("path",{d:"M2 12h3"},null,-1)])])):r.icon==="accounts"?(s(),l("svg",fe,[...t[8]||(t[8]=[e("path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4"},null,-1),e("path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5"},null,-1),e("path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z"},null,-1)])])):r.icon==="credit"?(s(),l("svg",ve,[...t[9]||(t[9]=[e("rect",{x:"2",y:"5",width:"20",height:"14",rx:"3"},null,-1),e("path",{d:"M2 10h20"},null,-1)])])):(s(),l("svg",we,[...t[10]||(t[10]=[e("path",{d:"M4 19V5"},null,-1),e("path",{d:"M10 19V9"},null,-1),e("path",{d:"M16 19v-4"},null,-1),e("path",{d:"M22 19V7"},null,-1)])]))],2),e("span",ge,g(r.label),1),r.active?(s(),l("span",me)):m("",!0)]),_:2},1032,["href","class"]))),128)),e("button",{type:"button",class:"group flex w-full items-center gap-4 rounded-2xl px-4 py-3.5 text-slate-500 transition hover:bg-slate-50 hover:text-slate-700","aria-label":"Menu",onClick:t[0]||(t[0]=r=>T.value=!0)},[...t[11]||(t[11]=[z('<span class="flex h-11 w-11 items-center justify-center rounded-2xl bg-slate-100 text-slate-400"><svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 6h16"></path><path d="M4 12h16"></path><path d="M4 18h16"></path></svg></span><span class="text-sm font-semibold">Menu</span>',2)])])]),e("div",be,[e("div",ye,[e("div",ke,[e("div",_e,[c.value?(s(),l("img",{key:0,src:c.value,alt:"",class:"h-full w-full object-cover"},null,8,Ce)):(s(),l("span",Me,g(v.value),1))]),e("div",Te,[e("div",$e,g(x.value||"Usuário"),1),t[12]||(t[12]=e("div",{class:"text-xs font-medium text-slate-400"},"Plano UI/UX",-1))])]),y(_(C),{href:p.route("settings"),class:"flex h-10 w-10 items-center justify-center rounded-2xl bg-slate-50 text-slate-600 ring-1 ring-slate-200/60","aria-label":"Configurações"},{default:M(()=>[...t[13]||(t[13]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 15.5A3.5 3.5 0 1 0 12 8.5a3.5 3.5 0 0 0 0 7Z"}),e("path",{d:"M19.4 15a7.9 7.9 0 0 0 .1-1 7.9 7.9 0 0 0-.1-1l2-1.6-2-3.4-2.4 1a7.4 7.4 0 0 0-1.7-1l-.4-2.6H9.1L8.7 8a7.4 7.4 0 0 0-1.7 1l-2.4-1-2 3.4 2 1.6a7.9 7.9 0 0 0-.1 1 7.9 7.9 0 0 0 .1 1l-2 1.6 2 3.4 2.4-1a7.4 7.4 0 0 0 1.7 1l.4 2.6h5.8l.4-2.6a7.4 7.4 0 0 0 1.7-1l2.4 1 2-3.4-2-1.6Z"})],-1)])]),_:1},8,["href"])])])]),e("div",Be,[e("header",Ee,[e("div",Se,[e("div",null,[o.title?(s(),l("div",je,g(o.title),1)):m("",!0),o.subtitle?(s(),l("div",Ne,g(o.subtitle),1)):m("",!0)]),e("div",qe,[o.showSearch?(s(),l("div",Pe,[t[15]||(t[15]=e("svg",{class:"h-5 w-5 text-slate-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"11",cy:"11",r:"7"}),e("path",{d:"M21 21l-4.3-4.3"})],-1)),e("input",{type:"text",placeholder:o.searchPlaceholder,class:"w-[260px] bg-transparent text-sm font-semibold text-slate-700 placeholder:text-slate-400 focus:outline-none"},null,8,Re)])):m("",!0),N(p.$slots,"headerActions"),e("button",{type:"button",class:"relative flex h-11 w-11 items-center justify-center rounded-2xl bg-white text-slate-600 ring-1 ring-slate-200/60","aria-label":"Notificações","aria-expanded":n.value?"true":"false",onClick:t[1]||(t[1]=r=>n.value=!n.value)},[t[16]||(t[16]=e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 7 3 7H3s3 0 3-7"}),e("path",{d:"M10 21a2 2 0 0 0 4 0"})],-1)),h.value>0?(s(),l("span",Ae)):m("",!0)],8,Ue),y(_(C),{href:p.route("settings"),class:"flex h-11 w-11 items-center justify-center overflow-hidden rounded-2xl bg-slate-200 text-sm font-bold text-slate-700 ring-1 ring-slate-200/60","aria-label":"Perfil"},{default:M(()=>[c.value?(s(),l("img",{key:0,src:c.value,alt:"",class:"h-full w-full object-cover"},null,8,Fe)):(s(),l("span",He,g(v.value),1))]),_:1},8,["href"]),o.showNewAction?(s(),l("button",{key:1,type:"button",class:"h-11 w-11 items-center justify-center rounded-full bg-[#14B8A6] text-white shadow-xl shadow-emerald-500/30 ring-1 ring-emerald-400/20 md:inline-flex","aria-label":"Nova transação",onClick:t[2]||(t[2]=r=>w("add"))},[...t[17]||(t[17]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14"}),e("path",{d:"M5 12h14"})],-1)])])):m("",!0)])])]),e("main",Oe,[e("div",Ve,[N(p.$slots,"default")])])])])]),y(re,{open:n.value,onClose:t[3]||(t[3]=()=>{n.value=!1,$()}),onUnread:F},null,8,["open"]),y(I,{open:T.value,onClose:t[4]||(t[4]=r=>T.value=!1)},null,8,["open"])],64))}});export{ze as _,Le as a,A as r};
