import{d as O,h as x,p as z,c as n,g as c,F,i as A,f as w,e as t,b as y,n as j,t as d,s as T,x as E,y as J,o as u,u as K,a as Z,D as H,w as S,l as I,j as q,r as G,k as U,G as W,H as Q,C as X}from"./app-CbuCxuU_.js";import{_ as Y,r as V}from"./DesktopShell.vue_vue_type_script_setup_true_lang-B_oLxcMm.js";import{u as tt,_ as et}from"./useIsMobile-eLMgQx8O.js";import{p as L,f as st}from"./inputGuards-BV9ov3X1.js";import{a as ot}from"./AccountPickerSheet.vue_vue_type_script_setup_true_lang-CbqwTzyl.js";import{_ as lt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as at}from"./MobileToast.vue_vue_type_script_setup_true_lang-DTyMSePK.js";const nt={key:0,class:"fixed inset-0 z-[80]"},it={class:"absolute inset-x-0 bottom-0 h-[650px] max-h-[calc(100vh-150px)] w-full overflow-hidden rounded-t-[24px] bg-white shadow-[0_-4px_20px_rgba(0,0,0,0.25)] md:inset-x-auto md:bottom-auto md:left-1/2 md:top-1/2 md:h-auto md:max-h-[92vh] md:w-[560px] md:-translate-x-1/2 md:-translate-y-1/2 md:rounded-[28px] md:shadow-[0_30px_90px_-45px_rgba(15,23,42,0.55)]"},rt={class:"flex h-full flex-col"},dt={class:"flex-1 overflow-y-auto px-6 pb-6"},ut={class:"mt-2"},ct={class:"flex h-[120px] items-center"},mt=["value"],pt={class:"mt-2 space-y-4"},vt={class:"text-sm font-semibold text-slate-900"},xt={key:0,class:"mt-1 text-xs font-semibold text-slate-400"},ft={class:"flex items-center justify-between rounded-2xl border border-slate-200 bg-white px-4 py-4"},bt={class:"px-6 pt-4 pb-[calc(24px+env(safe-area-inset-bottom))]"},ht=["disabled"],gt=O({__name:"AddMoneyModal",props:{open:{type:Boolean},accent:{},accounts:{}},emits:["close","confirm"],setup($,{emit:_}){const m=$,C=_,k=()=>C("close"),p=x(""),f=x(""),v=x(!1),a=x(!1);z(()=>m.open,l=>{if(!l)return;p.value="";const s=(m.accounts??[]).find(r=>r.type!=="credit_card")?.key??(m.accounts??[])[0]?.key??"";f.value=s,v.value=!1});const B=l=>{const s=l.target;p.value=st(s.value)},R=n(()=>{const l=String(p.value??"").length;return l<=6?"text-[56px]":l<=9?"text-[44px]":l<=12?"text-[36px]":"text-[30px]"}),b=n(()=>m.accent==="blue"?"bg-[#3B82F6]":"bg-[#14B8A6]"),D=n(()=>m.accent==="blue"?"shadow-[0_2px_8px_rgba(59,130,246,0.25)]":"shadow-[0_2px_8px_rgba(20,184,166,0.25)]"),h=n(()=>{const l=parseFloat(p.value.replace(/[^0-9,-]/g,"").replace(",","."));return!isNaN(l)&&l>0}),g=n(()=>(m.accounts??[]).find(l=>l.key===f.value)??null),M=l=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(l),N=n(()=>{const l=g.value;if(!l)return"";if(l.type==="credit_card"){const s=l.available??(l.limit!=null?Number(l.limit)-Number(l.used??0):null);return s==null?"":`Disponível: ${M(Math.max(0,s))}`}return l.balance==null?"":`Saldo: ${M(Number(l.balance))}`});return(l,s)=>(u(),c(F,null,[$.open?(u(),c("div",nt,[t("button",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm",type:"button",onClick:k,"aria-label":"Fechar"}),t("div",it,[t("div",rt,[t("header",{class:"relative flex h-14 items-center px-4"},[t("button",{class:"h-10 w-10 rounded-full bg-slate-100 text-slate-500",type:"button",onClick:k,"aria-label":"Fechar"},[...s[6]||(s[6]=[t("svg",{class:"mx-auto h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18"}),t("path",{d:"M6 6l12 12"})],-1)])]),s[7]||(s[7]=t("div",{class:"pointer-events-none absolute inset-0 flex items-center justify-center"},[t("div",{class:"text-[16px] font-bold text-[#1F2937]"},"Adicionar dinheiro")],-1))]),t("div",dt,[t("div",ut,[t("div",ct,[s[8]||(s[8]=t("div",{class:"w-10 text-base text-[#6B7280]"},"R$",-1)),t("input",{class:j(["amount-input h-[72px] w-full flex-1 bg-transparent text-center font-bold leading-none tracking-tight focus:outline-none focus:ring-0",R.value]),type:"text",inputmode:"numeric",pattern:"[0-9]*",autocomplete:"off",spellcheck:"false",value:p.value,onInput:B,onKeydown:s[0]||(s[0]=(...r)=>y(L)&&y(L)(...r)),placeholder:"0,00","aria-label":"Valor"},null,42,mt),s[9]||(s[9]=t("div",{class:"w-10"},null,-1))])]),t("div",pt,[t("div",null,[s[11]||(s[11]=t("div",{class:"mb-2 text-sm font-bold text-[#374151]"},"Retirar de",-1)),t("button",{type:"button",class:"flex w-full items-center justify-between rounded-2xl border border-slate-200 bg-white px-4 py-4 text-left shadow-sm",onClick:s[1]||(s[1]=r=>a.value=!0)},[t("div",null,[t("div",vt,d(g.value?.label??"Selecione"),1),N.value?(u(),c("div",xt,d(N.value),1)):A("",!0)]),s[10]||(s[10]=t("svg",{class:"h-5 w-5 text-slate-300",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M9 18l6-6-6-6"})],-1))])]),t("div",ft,[s[12]||(s[12]=T('<div class="flex items-center gap-3" data-v-5399a1d6><span class="flex h-10 w-10 items-center justify-center rounded-2xl bg-blue-50 text-blue-600" data-v-5399a1d6><svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-5399a1d6><rect x="3" y="4" width="18" height="18" rx="3" data-v-5399a1d6></rect><path d="M8 2v4" data-v-5399a1d6></path><path d="M16 2v4" data-v-5399a1d6></path><path d="M3 10h18" data-v-5399a1d6></path></svg></span><div class="text-sm font-semibold text-slate-900" data-v-5399a1d6>Repetir esse depósito mensalmente?</div></div>',1)),E(t("input",{"onUpdate:modelValue":s[2]||(s[2]=r=>v.value=r),type:"checkbox",class:"h-5 w-5 rounded-md border-slate-300 text-blue-600"},null,512),[[J,v.value]])])])]),t("footer",bt,[t("button",{type:"button",class:j(["h-[52px] w-full rounded-2xl text-base font-bold text-white transition-all",h.value?[b.value,D.value]:"bg-slate-300 shadow-none cursor-not-allowed opacity-60"]),disabled:!h.value,onClick:s[3]||(s[3]=r=>{C("confirm",{amount:p.value,from:f.value,repeat:v.value}),k()})}," Confirmar depósito ",10,ht)])])])])):A("",!0),w(ot,{open:a.value,options:m.accounts??[],title:"Retirar de",onClose:s[4]||(s[4]=r=>a.value=!1),onSelect:s[5]||(s[5]=r=>{f.value=r,a.value=!1})},null,8,["open","options"])],64))}}),wt=lt(gt,[["__scopeId","data-v-5399a1d6"]]),yt={key:0,class:"relative flex items-center justify-center pt-2"},_t={class:"text-base font-semibold text-slate-900"},kt={class:"flex flex-col items-center"},Mt={class:"flex h-20 w-20 items-center justify-center rounded-full bg-white/20 ring-1 ring-white/30"},$t={key:0,class:"h-9 w-9",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ct={key:1,class:"h-9 w-9",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Bt={key:2,class:"h-9 w-9",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Nt={class:"mt-2 text-4xl font-bold tracking-tight"},Rt={class:"align-middle"},Dt={class:"mt-6 w-full"},St={class:"flex items-center justify-between text-xs font-semibold opacity-90"},Ft={class:"mt-3 h-3 w-full rounded-full bg-black/20"},At={class:"-mt-7 grid grid-cols-2 gap-3 md:mx-auto md:max-w-md"},jt={class:"rounded-3xl bg-white p-4 shadow-sm ring-1 ring-slate-200/60"},It={class:"mt-2 text-lg font-semibold text-slate-900"},Vt={class:"rounded-3xl bg-white p-4 shadow-sm ring-1 ring-slate-200/60"},Lt={class:"mt-2 text-lg font-semibold text-slate-900"},Ot={class:"mt-7 pb-[calc(7rem+env(safe-area-inset-bottom))] md:mx-auto md:max-w-md"},Pt={class:"mt-4 space-y-3"},zt={class:"flex items-center gap-3"},Tt={class:"text-sm font-semibold text-slate-900"},Et={class:"mt-1 text-xs font-semibold text-slate-400"},Jt={class:"text-sm font-semibold text-emerald-600"},Kt={class:"fixed inset-x-0 bottom-0 bg-white px-5 pb-[calc(1rem+env(safe-area-inset-bottom))] pt-3 shadow-[0_-18px_40px_-32px_rgba(15,23,42,0.45)] md:static md:bg-transparent md:px-0 md:pb-0 md:pt-6 md:shadow-none"},Zt={class:"mx-auto w-full max-w-md"},Yt=O({__name:"Show",props:{goalId:{}},setup($){const _=tt(),m=n(()=>_.value?et:Y),C=n(()=>_.value?{showNav:!1}:{title:"Metas",subtitle:"Detalhes",showSearch:!1,showNewAction:!1}),k=K(),p=n(()=>k.props.bootstrap??{entries:[],goals:[],accounts:[],categories:[],tags:[]}),f=$,v=x(p.value.goals.find(o=>o.id===f.goalId)??null),a=n(()=>{const o=v.value;if(!o)return{id:f.goalId,title:"Meta",color:"teal",icon:"home",target:0,current:0,due:""};const e=o.icon==="plane"?"blue":o.icon==="car"?"orange":"teal",i=o.icon==="plane"?"plane":o.icon==="car"?"car":"home";return{id:o.id,title:o.title,color:e,icon:i,target:o.target,current:o.current,due:o.due}}),B=n(()=>Math.min(100,Math.round(a.value.current/a.value.target*100))),R=n(()=>Math.max(0,a.value.target-a.value.current)),b=o=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",maximumFractionDigits:0}).format(o),D=n(()=>a.value.color==="blue"?"bg-[#2563EB]":a.value.color==="orange"?"bg-[#F97316]":"bg-[#0D9488]"),h=x(!1),g=x(!1),M=x(""),N=o=>{M.value=o,g.value=!0},l=n(()=>v.value?.deposits??[]),s=async o=>{const e=Number(o.amount.replace(/\./g,"").replace(",","."))||0,i=await V(route("goals.deposits.store",a.value.id),{method:"POST",body:JSON.stringify({amount:e,title:"Depósito manual"})});v.value=i.goal,N("Valor adicionado")},r=n(()=>{const o=[];for(const e of p.value.accounts??[])e.type!=="credit_card"&&o.push({key:e.name,label:e.name,subtitle:e.type==="wallet"?"Carteira":"Conta",type:e.type,balance:Number(e.current_balance??0),customColor:e.color??void 0,icon:e.icon??void 0});return o}),P=async o=>{await s({amount:o.amount});const e=Number(o.amount.replace(/\./g,"").replace(",","."))||0;if(!(!o.from||!e))try{const i={kind:"expense",amount:e,description:`Depósito meta: ${a.value.title}`,category:"Metas",account:o.from,dateKind:"today",dateOther:"",isPaid:!0,isInstallment:!1,installmentCount:1,tags:[]};await V(route("transactions.store"),{method:"POST",body:JSON.stringify(i)})}catch{}};return(o,e)=>(u(),c(F,null,[w(y(H),{title:a.value.title},null,8,["title"]),(u(),Z(X(m.value),W(Q(C.value)),{default:S(()=>[y(_)?(u(),c("header",yt,[w(y(I),{href:o.route("goals.index"),class:"absolute left-0 flex h-10 w-10 items-center justify-center rounded-2xl bg-white text-slate-600 shadow-sm ring-1 ring-slate-200/60","aria-label":"Voltar"},{default:S(()=>[...e[3]||(e[3]=[t("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M15 18l-6-6 6-6"})],-1)])]),_:1},8,["href"]),t("div",_t,d(a.value.title),1),w(y(I),{href:o.route("goals.edit",{goalId:a.value.id}),class:"absolute right-0 flex h-10 w-10 items-center justify-center rounded-full bg-white text-slate-600 shadow-sm ring-1 ring-slate-200/60","aria-label":"Editar"},{default:S(()=>[...e[4]||(e[4]=[t("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M12 20h9"}),t("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L8 18l-4 1 1-4 11.5-11.5Z"})],-1)])]),_:1},8,["href"])])):A("",!0),t("div",{class:j(["-mx-5 mt-4 overflow-hidden rounded-b-[36px] px-5 pb-10 pt-8 text-white md:mx-0 md:rounded-3xl md:px-8 md:pb-12 md:pt-10",D.value])},[t("div",kt,[t("div",Mt,[a.value.icon==="home"?(u(),c("svg",$t,[...e[5]||(e[5]=[t("path",{d:"M3 10.5L12 3l9 7.5"},null,-1),t("path",{d:"M5 10v10h14V10"},null,-1)])])):a.value.icon==="plane"?(u(),c("svg",Ct,[...e[6]||(e[6]=[t("path",{d:"M2 16l20-8-20-8 6 8-6 8Z"},null,-1),t("path",{d:"M6 16v6l4-4"},null,-1)])])):(u(),c("svg",Bt,[...e[7]||(e[7]=[t("path",{d:"M5 16l1-5 1-3h10l1 3 1 5"},null,-1),t("path",{d:"M7 16h10"},null,-1),t("circle",{cx:"8",cy:"17",r:"1.5"},null,-1),t("circle",{cx:"16",cy:"17",r:"1.5"},null,-1)])]))]),e[9]||(e[9]=t("div",{class:"mt-6 text-sm font-semibold opacity-90"},"Total economizado",-1)),t("div",Nt,[e[8]||(e[8]=t("span",{class:"mr-2 align-middle text-2xl font-semibold opacity-90"},"R$",-1)),t("span",Rt,d(b(a.value.current).replace("R$","").trim()),1)]),t("div",Dt,[t("div",St,[t("div",null,d(B.value)+"%",1),t("div",null,"Meta: "+d(b(a.value.target).replace("R$","R$")),1)]),t("div",Ft,[t("div",{class:"h-3 rounded-full bg-white",style:q({width:`${B.value}%`})},null,4)])])])],2),t("div",At,[t("div",jt,[e[10]||(e[10]=t("div",{class:"text-[10px] font-semibold uppercase tracking-wide text-slate-400"},"FALTAM",-1)),t("div",It,d(b(R.value).replace("R$","R$")),1)]),t("div",Vt,[e[11]||(e[11]=t("div",{class:"text-[10px] font-semibold uppercase tracking-wide text-slate-400"},"PRAZO",-1)),t("div",Lt,d(a.value.due),1)])]),t("div",Ot,[e[13]||(e[13]=t("div",{class:"text-base font-semibold text-slate-900"},"Histórico de depósitos",-1)),t("div",Pt,[(u(!0),c(F,null,G(l.value,i=>(u(),c("div",{key:i.id,class:"flex items-center justify-between rounded-3xl bg-white px-4 py-4 shadow-sm ring-1 ring-slate-200/60"},[t("div",zt,[e[12]||(e[12]=t("span",{class:"flex h-11 w-11 items-center justify-center rounded-2xl bg-emerald-50 text-emerald-600"},[t("svg",{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M12 3v14"}),t("path",{d:"M7 12l5 5 5-5"})])],-1)),t("div",null,[t("div",Tt,d(i.title),1),t("div",Et,d(i.subtitle),1)])]),t("div",Jt,"+ "+d(b(i.amount).replace("R$","R$")),1)]))),128))])]),t("div",Kt,[t("div",Zt,[t("button",{type:"button",class:"flex h-[52px] w-full items-center justify-center gap-2 rounded-2xl bg-[#14B8A6] text-base font-bold text-white shadow-[0_2px_8px_rgba(20,184,166,0.25)]",onClick:e[0]||(e[0]=i=>h.value=!0)},[...e[14]||(e[14]=[t("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M12 5v14"}),t("path",{d:"M5 12h14"})],-1),U(" Adicionar valor ",-1)])])])]),w(wt,{open:h.value,accent:a.value.color==="blue"?"blue":"teal",accounts:r.value,onClose:e[1]||(e[1]=i=>h.value=!1),onConfirm:P},null,8,["open","accent","accounts"]),w(at,{show:g.value,message:M.value,onDismiss:e[2]||(e[2]=i=>g.value=!1)},null,8,["show","message"])]),_:1},16))],64))}});export{Yt as default};
