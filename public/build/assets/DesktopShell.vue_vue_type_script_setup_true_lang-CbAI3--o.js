import{d as X,h as E,c as g,p as V,a as A,g as a,i as b,e,t as y,f as C,b as M,l as T,w as $,k as F,F as j,r as O,T as L,n as q,o as s,u as G,z as K,R as I,s as z,M as P}from"./app-BblmX-k6.js";import{b as Z}from"./useIsMobile-DqUvSeEk.js";const H=()=>document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")??"",W=c=>{const v=`; ${document.cookie}`.split(`; ${c}=`);return v.length<2?"":v.pop().split(";").shift()??""},U=()=>{const c=W("XSRF-TOKEN");if(!c)return"";try{return decodeURIComponent(c)}catch{return c}},S=async()=>{if(!(await fetch("/sanctum/csrf-cookie",{credentials:"include"})).ok)throw new Error("Failed to refresh CSRF token");return{csrf:H(),xsrf:U()}},D=async(c,r={})=>{const v=async o=>{const m=String(r.method??"GET").toUpperCase(),u=["PATCH","PUT","DELETE"].includes(m),i={"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",...!o.xsrf?{"X-CSRF-TOKEN":o.csrf}:{},...o.xsrf?{"X-XSRF-TOKEN":o.xsrf}:{},...u?{"X-HTTP-Method-Override":m}:{},...r.headers??{}};return fetch(c,{credentials:"include",...r,method:u?"POST":r.method??"GET",headers:i})},n=String(r.method??"GET").toUpperCase(),p=n!=="GET"&&n!=="HEAD";let f={csrf:H(),xsrf:U()};if(p&&!f.xsrf)try{f=await S()}catch{}let l=await v(f);if(l.status===419)try{const o=await S();l=await v(o)}catch{throw window.location.reload(),new Error("Session expired. Reloading page...")}if(!l.ok){const o=await l.text();throw new Error(o||`Request failed: ${l.status}`)}return await l.json()},ze=async(c,r={})=>{const v=async o=>{const m=String(r.method??"GET").toUpperCase(),u=["PATCH","PUT","DELETE"].includes(m),h=!o.xsrf,i=new Headers(r.headers??{});i.set("X-Requested-With","XMLHttpRequest"),h&&o.csrf&&i.set("X-CSRF-TOKEN",o.csrf),o.xsrf&&i.set("X-XSRF-TOKEN",o.xsrf),u&&i.set("X-HTTP-Method-Override",m);let w=r.body;if(u&&w instanceof FormData){const k=new FormData;for(const[B,_]of w.entries())k.append(B,_);k.set("_method",m),w=k}return fetch(c,{credentials:"include",...r,method:u?"POST":r.method??"GET",body:w,headers:i})},n=String(r.method??"GET").toUpperCase(),p=n!=="GET"&&n!=="HEAD";let f={csrf:H(),xsrf:U()};if(p&&!f.xsrf)try{f=await S()}catch{}let l=await v(f);if(l.status===419)try{const o=await S();l=await v(o)}catch{throw window.location.reload(),new Error("Session expired. Reloading page...")}if(!l.ok){const o=await l.text();throw new Error(o||`Request failed: ${l.status}`)}return await l.json()},J={key:0,class:"fixed inset-0 z-[90]"},Q={class:"absolute right-8 top-[76px] w-[420px] overflow-hidden rounded-3xl bg-white shadow-[0_30px_90px_-45px_rgba(15,23,42,0.55)] ring-1 ring-slate-200/60",role:"dialog","aria-modal":"true"},Y={class:"flex items-center justify-between border-b border-slate-100 px-5 py-4"},ee={class:"mt-0.5 text-xs font-semibold text-slate-400"},te={class:"flex items-center gap-2"},se=["disabled"],oe={class:"max-h-[420px] overflow-y-auto px-5 py-4"},ae={key:0,class:"rounded-2xl bg-slate-50 px-4 py-10 text-center text-sm font-semibold text-slate-500 ring-1 ring-slate-100"},le={key:1,class:"rounded-2xl bg-slate-50 px-4 py-10 text-center ring-1 ring-slate-100"},re={key:2,class:"space-y-3"},ne={class:"flex items-start justify-between gap-3"},ie={class:"min-w-0"},de={class:"mt-1 line-clamp-2 text-xs font-semibold text-slate-500"},ce={key:0,class:"mt-1 h-2 w-2 shrink-0 rounded-full bg-red-500"},ue=X({__name:"DesktopNotificationsPopover",props:{open:{type:Boolean}},emits:["close","unread"],setup(c,{emit:r}){const v=c,n=r,p=E(!1),f=E([]),l=g(()=>f.value.filter(u=>!u.read_at).length),o=g(()=>f.value.slice(0,6)),m=async()=>{p.value=!0;try{const u=await D(route("api.notifications.index"));f.value=u.notifications??[],n("unread",l.value)}finally{p.value=!1}};return V(()=>v.open,u=>{u&&m()}),(u,h)=>(s(),A(L,{to:"body"},[c.open?(s(),a("div",J,[e("button",{class:"absolute inset-0 bg-black/10",type:"button","aria-label":"Fechar",onClick:h[0]||(h[0]=i=>n("close"))}),e("section",Q,[e("div",Y,[e("div",null,[h[2]||(h[2]=e("div",{class:"text-sm font-semibold text-slate-900"},"Notificações",-1)),e("div",ee,y(l.value)+" não lidas",1)]),e("div",te,[e("button",{type:"button",class:"rounded-2xl bg-slate-100 px-3 py-2 text-xs font-semibold text-slate-600 disabled:opacity-60",disabled:p.value,onClick:m}," Atualizar ",8,se),C(M(T),{href:u.route("notifications.index"),class:"rounded-2xl bg-emerald-50 px-3 py-2 text-xs font-semibold text-emerald-700",onClick:h[1]||(h[1]=i=>n("close"))},{default:$(()=>[...h[3]||(h[3]=[F(" Ver todas ",-1)])]),_:1},8,["href"])])]),e("div",oe,[p.value?(s(),a("div",ae," Carregando… ")):o.value.length===0?(s(),a("div",le,[...h[4]||(h[4]=[e("div",{class:"text-sm font-semibold text-slate-900"},"Sem notificações",-1),e("div",{class:"mt-1 text-xs font-semibold text-slate-500"},"Quando algo importante acontecer, avisamos por aqui.",-1)])])):(s(),a("div",re,[(s(!0),a(j,null,O(o.value,i=>(s(),a("div",{key:i.id,class:"rounded-2xl bg-white px-4 py-3 ring-1 ring-slate-200/60"},[e("div",ne,[e("div",ie,[e("div",{class:q(["truncate text-sm font-semibold",i.read_at?"text-slate-700":"text-slate-900"])},y(i.title),3),e("div",de,y(i.body),1)]),i.read_at?b("",!0):(s(),a("span",ce))])]))),128))]))])])])):b("",!0)]))}}),he={class:"min-h-screen bg-slate-50"},fe={class:"flex min-h-screen"},xe={class:"hidden w-[280px] flex-col border-r border-slate-200/70 bg-white md:flex"},pe={class:"mt-8 flex-1 space-y-2 px-5","aria-label":"Menu principal"},ve={key:0,class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},me={key:1,class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},we={key:2,class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ge={key:3,class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},be={key:4,class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ye={key:5,class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ke={class:"text-sm font-semibold"},_e={key:0,class:"ml-auto h-9 w-1.5 rounded-full bg-[#14B8A6]"},Ce={class:"px-5 pb-6"},Me={class:"flex items-center justify-between rounded-2xl bg-white px-4 py-4 ring-1 ring-slate-200/60"},Te={class:"flex items-center gap-3"},$e={class:"flex h-11 w-11 items-center justify-center overflow-hidden rounded-full bg-slate-200 text-sm font-bold text-slate-700"},Ee=["src"],Se={key:1},Be={class:"leading-tight"},Ne={class:"text-sm font-semibold text-slate-900"},Re={class:"flex min-w-0 flex-1 flex-col"},Ae={class:"sticky top-0 z-30 border-b border-slate-200/70 bg-white/80 backdrop-blur"},je={class:"flex items-center justify-between gap-4 px-6 py-4 md:px-10"},qe={key:0,class:"text-lg font-semibold text-slate-900"},He={key:1,class:"text-sm font-medium text-slate-400"},Ue={class:"flex items-center gap-3"},Pe={key:0,class:"hidden items-center gap-2 rounded-2xl bg-slate-50 px-4 py-2 ring-1 ring-slate-200/60 md:flex"},Xe=["placeholder"],Fe=["aria-expanded"],Oe={key:0,class:"absolute right-2.5 top-2.5 h-2 w-2 rounded-full bg-red-500"},De=["src"],Ve={key:1},Le={class:"flex-1 px-6 py-8 md:px-10"},Ge={class:"mx-auto w-full max-w-[1100px]"},Ze=X({__name:"DesktopShell",props:{title:{default:""},subtitle:{default:""},showSearch:{type:Boolean,default:!0},searchPlaceholder:{default:"Buscar…"},showNewAction:{type:Boolean,default:!0},newActionLabel:{default:"Nova Transação"}},emits:["add"],setup(c,{emit:r}){const v=r,n=c,p=G(),f=g(()=>String(p.props?.auth?.user?.name??"")),l=g(()=>f.value.trim().split(/\s+/)[0]??f.value),o=g(()=>p.props?.auth?.user?.avatar_url??p.props?.auth?.user?.profile_photo_url??null),m=g(()=>String(p.props?.auth?.user?.email??"")),u=g(()=>m.value.toLowerCase()==="contato@kitamo.com.br"),h=g(()=>{const x=f.value.trim().split(/\s+/).filter(Boolean),t=x[0]?.[0]??"K",d=x.length>1?x[x.length-1]?.[0]:"";return`${t}${d}`.toUpperCase()}),i=g(()=>[{label:"Painel",href:route("dashboard"),active:route().current("dashboard"),icon:"dashboard"},{label:"Minhas Contas",href:route("accounts.overview"),active:route().current("accounts.overview"),icon:"accounts"},{label:"Transações",href:route("accounts.index"),active:route().current("accounts.*")&&!route().current("accounts.overview"),icon:"cards"},{label:"Cartões de crédito",href:route("credit-cards.my-cards"),active:route().current("credit-cards.*"),icon:"credit"},{label:"Metas",href:route("goals.index"),active:route().current("goals.*"),icon:"target"},{label:"Relatórios",href:route("analysis"),active:route().current("analysis*"),icon:"chart"}]),w=E(!1),k=E(0),B=x=>{k.value=x},_=E(!1),N=async()=>{try{const x=await D(route("api.notifications.count-unread"));k.value=Number(x.count??0)}catch{}};let R=null;return K(()=>{N(),R=window.setInterval(N,6e4)}),I(()=>{R&&window.clearInterval(R)}),(x,t)=>(s(),a(j,null,[e("div",he,[e("div",fe,[e("aside",xe,[t[14]||(t[14]=e("div",{class:"px-7 pt-7"},[e("div",{class:"flex items-center gap-3"},[e("div",{class:"flex h-12 w-12 items-center justify-center rounded-2xl bg-[#14B8A6] text-xl font-bold text-white"}," K "),e("div",{class:"text-xl font-semibold tracking-tight text-slate-900"},"Kitamo")])],-1)),e("nav",pe,[(s(!0),a(j,null,O(i.value,d=>(s(),A(M(T),{key:d.label,href:d.href,class:q(["group flex items-center gap-4 rounded-2xl px-4 py-3.5 ring-1 ring-transparent transition",d.active?"bg-emerald-50 text-slate-900 ring-emerald-100":"text-slate-500 hover:bg-slate-50 hover:text-slate-700"])},{default:$(()=>[e("span",{class:q(["flex h-11 w-11 items-center justify-center rounded-2xl",d.active?"bg-white text-emerald-600 ring-1 ring-emerald-100":"bg-slate-100 text-slate-400"])},[d.icon==="dashboard"?(s(),a("svg",ve,[...t[5]||(t[5]=[e("rect",{x:"3",y:"3",width:"7",height:"7",rx:"2"},null,-1),e("rect",{x:"14",y:"3",width:"7",height:"7",rx:"2"},null,-1),e("rect",{x:"3",y:"14",width:"7",height:"7",rx:"2"},null,-1),e("rect",{x:"14",y:"14",width:"7",height:"7",rx:"2"},null,-1)])])):d.icon==="cards"?(s(),a("svg",me,[...t[6]||(t[6]=[e("rect",{x:"3",y:"5",width:"18",height:"14",rx:"3"},null,-1),e("path",{d:"M3 10h18"},null,-1)])])):d.icon==="target"?(s(),a("svg",we,[...t[7]||(t[7]=[e("circle",{cx:"12",cy:"12",r:"8"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1),e("path",{d:"M12 2v3"},null,-1),e("path",{d:"M22 12h-3"},null,-1),e("path",{d:"M12 22v-3"},null,-1),e("path",{d:"M2 12h3"},null,-1)])])):d.icon==="accounts"?(s(),a("svg",ge,[...t[8]||(t[8]=[e("path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4"},null,-1),e("path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5"},null,-1),e("path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z"},null,-1)])])):d.icon==="credit"?(s(),a("svg",be,[...t[9]||(t[9]=[e("rect",{x:"2",y:"5",width:"20",height:"14",rx:"3"},null,-1),e("path",{d:"M2 10h20"},null,-1)])])):(s(),a("svg",ye,[...t[10]||(t[10]=[e("path",{d:"M4 19V5"},null,-1),e("path",{d:"M10 19V9"},null,-1),e("path",{d:"M16 19v-4"},null,-1),e("path",{d:"M22 19V7"},null,-1)])]))],2),e("span",ke,y(d.label),1),d.active?(s(),a("span",_e)):b("",!0)]),_:2},1032,["href","class"]))),128)),e("button",{type:"button",class:"group flex w-full items-center gap-4 rounded-2xl px-4 py-3.5 text-slate-500 transition hover:bg-slate-50 hover:text-slate-700","aria-label":"Menu",onClick:t[0]||(t[0]=d=>_.value=!0)},[...t[11]||(t[11]=[z('<span class="flex h-11 w-11 items-center justify-center rounded-2xl bg-slate-100 text-slate-400"><svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 6h16"></path><path d="M4 12h16"></path><path d="M4 18h16"></path></svg></span><span class="text-sm font-semibold">Menu</span>',2)])])]),e("div",Ce,[e("div",Me,[e("div",Te,[e("div",$e,[o.value?(s(),a("img",{key:0,src:o.value,alt:"",class:"h-full w-full object-cover"},null,8,Ee)):(s(),a("span",Se,y(h.value),1))]),e("div",Be,[e("div",Ne,y(l.value||"Usuário"),1),t[12]||(t[12]=e("div",{class:"text-xs font-medium text-slate-400"},"Plano UI/UX",-1))])]),C(M(T),{href:x.route("settings"),class:"flex h-10 w-10 items-center justify-center rounded-2xl bg-slate-50 text-slate-600 ring-1 ring-slate-200/60","aria-label":"Configurações"},{default:$(()=>[...t[13]||(t[13]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 15.5A3.5 3.5 0 1 0 12 8.5a3.5 3.5 0 0 0 0 7Z"}),e("path",{d:"M19.4 15a7.9 7.9 0 0 0 .1-1 7.9 7.9 0 0 0-.1-1l2-1.6-2-3.4-2.4 1a7.4 7.4 0 0 0-1.7-1l-.4-2.6H9.1L8.7 8a7.4 7.4 0 0 0-1.7 1l-2.4-1-2 3.4 2 1.6a7.9 7.9 0 0 0-.1 1 7.9 7.9 0 0 0 .1 1l-2 1.6 2 3.4 2.4-1a7.4 7.4 0 0 0 1.7 1l.4 2.6h5.8l.4-2.6a7.4 7.4 0 0 0 1.7-1l2.4 1 2-3.4-2-1.6Z"})],-1)])]),_:1},8,["href"])])])]),e("div",Re,[e("header",Ae,[e("div",je,[e("div",null,[n.title?(s(),a("div",qe,y(n.title),1)):b("",!0),n.subtitle?(s(),a("div",He,y(n.subtitle),1)):b("",!0)]),e("div",Ue,[n.showSearch?(s(),a("div",Pe,[t[15]||(t[15]=e("svg",{class:"h-5 w-5 text-slate-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"11",cy:"11",r:"7"}),e("path",{d:"M21 21l-4.3-4.3"})],-1)),e("input",{type:"text",placeholder:n.searchPlaceholder,class:"w-[260px] bg-transparent text-sm font-semibold text-slate-700 placeholder:text-slate-400 focus:outline-none"},null,8,Xe)])):b("",!0),P(x.$slots,"headerActions"),e("button",{type:"button",class:"relative flex h-11 w-11 items-center justify-center rounded-2xl bg-white text-slate-600 ring-1 ring-slate-200/60","aria-label":"Notificações","aria-expanded":w.value?"true":"false",onClick:t[1]||(t[1]=d=>w.value=!w.value)},[t[16]||(t[16]=e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 7 3 7H3s3 0 3-7"}),e("path",{d:"M10 21a2 2 0 0 0 4 0"})],-1)),k.value>0?(s(),a("span",Oe)):b("",!0)],8,Fe),u.value?(s(),A(M(T),{key:1,href:x.route("admin.index"),class:"hidden items-center gap-2 rounded-2xl bg-white px-4 py-2 text-sm font-semibold text-slate-600 ring-1 ring-slate-200/60 transition hover:bg-slate-50 md:inline-flex","aria-label":"Administração"},{default:$(()=>[...t[17]||(t[17]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 15.5A3.5 3.5 0 1 0 12 8.5a3.5 3.5 0 0 0 0 7Z"}),e("path",{d:"M19.4 15a7.9 7.9 0 0 0 .1-1 7.9 7.9 0 0 0-.1-1l2-1.6-2-3.4-2.4 1a7.4 7.4 0 0 0-1.7-1l-.4-2.6H9.1L8.7 8a7.4 7.4 0 0 0-1.7 1l-2.4-1-2 3.4 2 1.6a7.9 7.9 0 0 0-.1 1 7.9 7.9 0 0 0 .1 1l-2 1.6 2 3.4 2.4-1a7.4 7.4 0 0 0 1.7 1l.4 2.6h5.8l.4-2.6a7.4 7.4 0 0 0 1.7-1l2.4 1 2-3.4-2-1.6Z"})],-1),F(" Administração ",-1)])]),_:1},8,["href"])):b("",!0),C(M(T),{href:x.route("settings"),class:"flex h-11 w-11 items-center justify-center overflow-hidden rounded-2xl bg-slate-200 text-sm font-bold text-slate-700 ring-1 ring-slate-200/60","aria-label":"Perfil"},{default:$(()=>[o.value?(s(),a("img",{key:0,src:o.value,alt:"",class:"h-full w-full object-cover"},null,8,De)):(s(),a("span",Ve,y(h.value),1))]),_:1},8,["href"]),n.showNewAction?(s(),a("button",{key:2,type:"button",class:"h-11 w-11 items-center justify-center rounded-full bg-[#14B8A6] text-white shadow-xl shadow-emerald-500/30 ring-1 ring-emerald-400/20 md:inline-flex","aria-label":"Nova transação",onClick:t[2]||(t[2]=d=>v("add"))},[...t[18]||(t[18]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14"}),e("path",{d:"M5 12h14"})],-1)])])):b("",!0)])])]),e("main",Le,[e("div",Ge,[P(x.$slots,"default")])])])])]),C(ue,{open:w.value,onClose:t[3]||(t[3]=()=>{w.value=!1,N()}),onUnread:B},null,8,["open"]),C(Z,{open:_.value,onClose:t[4]||(t[4]=d=>_.value=!1)},null,8,["open"])],64))}});export{Ze as _,ze as a,D as r};
