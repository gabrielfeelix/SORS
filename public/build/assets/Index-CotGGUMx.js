import{d as B,c as p,h as _,z as E,g as i,f as v,a as j,b as x,D as A,w as b,i as r,o as l,e as t,l as L,t as n,F as y,r as T,n as V,G as z,H as I,C as P}from"./app-DvJ-vTb0.js";import{u as R,_ as F}from"./useIsMobile-CMH_TBsk.js";import{_ as $,r as c}from"./DesktopShell.vue_vue_type_script_setup_true_lang-BVoVaQ94.js";const H={key:0,class:"flex items-center gap-3 pt-2"},O={class:"flex-1"},q={class:"text-xs font-semibold text-slate-400"},G={class:"flex items-center gap-2"},J=["disabled"],Q=["disabled"],W={key:1,class:"flex items-center justify-between"},K={class:"text-sm font-semibold text-slate-500"},U={class:"flex items-center gap-2"},X=["disabled"],Y=["disabled"],Z=["disabled"],tt={key:2,class:"mt-8 rounded-3xl border border-dashed border-slate-200 bg-slate-50 px-5 py-10 text-center md:mx-auto md:max-w-2xl"},et={key:3,class:"mt-6 space-y-3 md:mx-auto md:max-w-2xl"},st={class:"flex items-start justify-between gap-4"},at={class:"flex min-w-0 gap-3"},ot={class:"flex h-10 w-10 shrink-0 items-center justify-center rounded-2xl bg-slate-50 ring-1 ring-slate-200/60"},lt={class:"min-w-0"},it={class:"mt-1 text-xs text-slate-500"},dt={key:0,class:"mt-2 text-[11px] font-semibold text-slate-400"},nt={class:"flex items-center gap-2"},rt=["onClick"],ct=["onClick"],ut={key:1,class:"h-2 w-2 shrink-0 rounded-full bg-red-500"},ht=B({__name:"Index",setup(mt){const u=R(),g=p(()=>u.value?F:$),w=p(()=>u.value?{showNav:!1}:{title:"NotificaÃ§Ãµes",subtitle:"Central de alertas",showSearch:!1,showNewAction:!1}),d=_(!1),a=_([]),m=p(()=>a.value.filter(e=>!e.read_at).length),f=async()=>{d.value=!0;try{const e=await c(route("api.notifications.index"));a.value=e.notifications??[]}finally{d.value=!1}},k=e=>{try{return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}catch{return""}},C=e=>e==="vencimento"?"â°":e==="alerta_saldo"?"âš ï¸":e==="resumo_semanal"?"ðŸ“Š":"ðŸ””",M=async e=>{await c(route("api.notifications.read",e),{method:"PATCH"}),a.value=a.value.map(s=>s.id===e?{...s,read_at:new Date().toISOString()}:s)},h=async()=>{await c(route("api.notifications.read-all"),{method:"POST"});const e=new Date().toISOString();a.value=a.value.map(s=>s.read_at?s:{...s,read_at:e})},D=async()=>{await c(route("api.notifications.clear-read"),{method:"DELETE"}),a.value=a.value.filter(e=>!e.read_at)},N=async e=>{await c(route("api.notifications.delete",e),{method:"DELETE"}),a.value=a.value.filter(s=>s.id!==e)};return E(f),(e,s)=>(l(),i(y,null,[v(x(A),{title:"NotificaÃ§Ãµes"}),(l(),j(P(g.value),z(I(w.value)),{default:b(()=>[x(u)?(l(),i("header",H,[v(x(L),{href:e.route("dashboard"),class:"flex h-10 w-10 items-center justify-center rounded-2xl bg-white text-slate-600 shadow-sm ring-1 ring-slate-200/60","aria-label":"Voltar"},{default:b(()=>[...s[0]||(s[0]=[t("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M15 18l-6-6 6-6"})],-1)])]),_:1},8,["href"]),t("div",O,[s[1]||(s[1]=t("div",{class:"text-xl font-semibold tracking-tight text-slate-900"},"NotificaÃ§Ãµes",-1)),t("div",q,n(m.value)+" nÃ£o lidas",1)]),t("div",G,[t("button",{type:"button",class:"rounded-2xl bg-slate-100 px-4 py-2 text-xs font-semibold text-slate-600 disabled:opacity-60",onClick:h,disabled:d.value||m.value===0}," Marcar lidas ",8,J),t("button",{type:"button",class:"rounded-2xl bg-slate-100 px-4 py-2 text-xs font-semibold text-slate-600 disabled:opacity-60",onClick:f,disabled:d.value}," Atualizar ",8,Q)])])):r("",!0),x(u)?r("",!0):(l(),i("div",W,[t("div",K,n(m.value)+" nÃ£o lidas",1),t("div",U,[t("button",{type:"button",class:"rounded-2xl bg-slate-100 px-4 py-2 text-sm font-semibold text-slate-600 disabled:opacity-60",onClick:h,disabled:d.value||m.value===0}," Marcar todas como lidas ",8,X),t("button",{type:"button",class:"rounded-2xl bg-slate-100 px-4 py-2 text-sm font-semibold text-slate-600 disabled:opacity-60",onClick:D,disabled:d.value||a.value.every(o=>!o.read_at)}," Limpar lidas ",8,Y),t("button",{type:"button",class:"rounded-2xl bg-slate-100 px-4 py-2 text-sm font-semibold text-slate-600 disabled:opacity-60",onClick:f,disabled:d.value}," Atualizar ",8,Z)])])),!a.value.length&&!d.value?(l(),i("div",tt,[...s[2]||(s[2]=[t("div",{class:"mx-auto flex h-12 w-12 items-center justify-center rounded-2xl bg-white text-slate-400"},[t("svg",{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M15 17h5l-1.4-1.4A2 2 0 0 1 18 14V11a6 6 0 1 0-12 0v3a2 2 0 0 1-.6 1.6L4 17h5"}),t("path",{d:"M9 17a3 3 0 0 0 6 0"})])],-1),t("div",{class:"mt-3 text-sm font-semibold text-slate-900"},"Sem notificaÃ§Ãµes",-1),t("div",{class:"mt-1 text-xs text-slate-500"},"Quando algo importante acontecer, avisamos por aqui.",-1)])])):(l(),i("div",et,[(l(!0),i(y,null,T(a.value,o=>(l(),i("div",{key:o.id,class:"rounded-3xl bg-white px-5 py-4 shadow-sm ring-1 ring-slate-200/60"},[t("div",st,[t("div",at,[t("div",ot,n(C(o.type)),1),t("div",lt,[t("div",{class:V(["truncate text-sm font-semibold",o.read_at?"text-slate-700":"text-slate-900"])},n(o.title),3),t("div",it,n(o.body),1),o.created_at?(l(),i("div",dt,n(k(o.created_at)),1)):r("",!0)])]),t("div",nt,[o.read_at?r("",!0):(l(),i("button",{key:0,type:"button",class:"rounded-xl bg-slate-100 px-3 py-2 text-xs font-semibold text-slate-600",onClick:S=>M(o.id)}," Marcar lida ",8,rt)),t("button",{type:"button",class:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-100 text-slate-500","aria-label":"Excluir",onClick:S=>N(o.id)},[...s[3]||(s[3]=[t("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M3 6h18"}),t("path",{d:"M8 6V4h8v2"}),t("path",{d:"M19 6l-1 16H6L5 6"}),t("path",{d:"M10 11v6"}),t("path",{d:"M14 11v6"})],-1)])],8,ct),o.read_at?r("",!0):(l(),i("span",ut))])])]))),128))]))]),_:1},16))],64))}});export{ht as default};
