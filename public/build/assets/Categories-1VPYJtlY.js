import{d as q,c as B,h as u,g as a,f as m,a as G,b as H,D as Z,w as k,e,l as K,n as h,j as b,o as l,t as _,x as F,I as T,F as f,r as w,i as Q,G as W,H as X,C as Y}from"./app-DvJ-vTb0.js";import{u as ee,_ as te,a as I}from"./useIsMobile-CMH_TBsk.js";import{_ as se,r as N}from"./DesktopShell.vue_vue_type_script_setup_true_lang-BVoVaQ94.js";import{_ as oe}from"./MobileToast.vue_vue_type_script_setup_true_lang-C8uRLjf5.js";const le={class:"flex items-center justify-between pt-2"},ae={class:"mt-6 flex gap-3 rounded-2xl bg-slate-100 p-1"},ne={class:"space-y-4 pb-2"},ie={class:"flex justify-center pt-2"},re={class:"rounded-3xl bg-white p-6 shadow-sm ring-1 ring-slate-200/60"},de={class:"flex flex-col items-center gap-3"},ue={class:"h-8 w-8",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ce=["d"],ve={class:"text-sm font-semibold text-slate-900"},xe={class:"mt-3 flex gap-2"},he=["onClick"],fe={class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},pe=["d"],ge={class:"mt-3 flex gap-2"},me=["onClick"],be={key:0,class:"space-y-4 pb-2"},we={class:"flex justify-center pt-2"},Ce={class:"rounded-3xl bg-white p-6 shadow-sm ring-1 ring-slate-200/60"},ye={class:"flex flex-col items-center gap-3"},ke={class:"h-8 w-8",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},_e=["d"],Me={class:"text-sm font-semibold text-slate-900"},Be={class:"mb-3 flex items-center gap-2 text-xs font-bold uppercase tracking-wide text-slate-300"},Ne={class:"mt-3 flex gap-2"},je=["onClick"],$e={class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ee=["d"],ze={class:"mt-3 flex gap-2"},De=["onClick"],Se={key:0,class:"mt-6 grid grid-cols-2 gap-3 pb-8"},Ae=["onClick"],Oe={class:"h-7 w-7",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ve=["d"],He={class:"text-sm font-semibold text-slate-900"},Fe={key:1,class:"mt-8 rounded-3xl border border-dashed border-slate-200 bg-white px-5 py-8 text-center shadow-sm"},Re=q({__name:"Categories",props:{userCategories:{}},setup(L){const j=ee(),P=B(()=>j.value?te:se),J=B(()=>j.value?{showNav:!1}:{title:"Categorias",showSearch:!1,showNewAction:!1}),c=u(L.userCategories||[]),v=u("expense"),C=u(!1),p=u(!1),n=u(null),i=u(""),r=u("home"),d=u("#6B7280"),M=u(!1),$=u(""),x=o=>{$.value=o,M.value=!0},E=B(()=>c.value.filter(o=>o.type===v.value)),z=["home","food","car","game","heart"],D=["#6B7280","#EF4444","#F59E0B","#10B981","#3B82F6","#A855F7"],g=o=>{const t={home:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",food:"M3 2v7c0 1.1 1 2 2 2h14c1 0 2-.9 2-2V2M7 2v4M12 2v4M17 2v4",car:"M5 11l2-6h10l2 6M3 11h18v7H3zM7 15h2M15 15h2",game:"M6 7h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2zM8 13h2M14 13h2",heart:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z",money:"M2 7h20M2 17h20M6 2v20M18 2v20",trend:"M3 17l6-6 4 4 8-8M17 7h4v4"};return t[o]||t.home},S=()=>{i.value="",r.value="home",d.value="#6B7280",n.value=null,C.value=!0},R=o=>{n.value=o,i.value=o.name,r.value=o.icon,d.value=o.color,p.value=!0},A=async()=>{if(!i.value.trim()){x("Nome da categoria é obrigatório");return}try{if(n.value){const o=await N(`/api/categories/${n.value.id}`,{method:"PATCH",body:JSON.stringify({name:i.value.trim(),icon:r.value,color:d.value})}),t=c.value.findIndex(s=>s.id===n.value.id);t>=0&&(c.value[t]=o),p.value=!1,x("Categoria atualizada com sucesso!")}else{const o=await N("/api/categories",{method:"POST",body:JSON.stringify({name:i.value.trim(),type:v.value,icon:r.value,color:d.value})});c.value.push(o),C.value=!1,x("Categoria criada com sucesso!")}}catch{x("Erro ao salvar categoria")}},U=async()=>{if(n.value)try{await N(`/api/categories/${n.value.id}`,{method:"DELETE"}),c.value=c.value.filter(o=>o.id!==n.value.id),p.value=!1,x("Categoria excluída com sucesso!")}catch{x("Erro ao excluir categoria")}},O=()=>{C.value=!1,n.value=null},V=()=>{p.value=!1,n.value=null};return(o,t)=>(l(),a(f,null,[m(H(Z),{title:"Categorias"}),(l(),G(Y(P.value),W(X(J.value)),{default:k(()=>[e("header",le,[m(H(K),{href:o.route("dashboard"),class:"flex h-10 w-10 items-center justify-center rounded-2xl bg-white text-slate-600 shadow-sm ring-1 ring-slate-200/60","aria-label":"Voltar"},{default:k(()=>[...t[5]||(t[5]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M15 18l-6-6 6-6"})],-1)])]),_:1},8,["href"]),t[7]||(t[7]=e("div",{class:"text-center"},[e("div",{class:"text-lg font-semibold text-slate-900"},"Categorias")],-1)),e("button",{type:"button",class:"flex h-10 w-10 items-center justify-center rounded-2xl bg-[#14B8A6] text-white shadow-sm","aria-label":"Criar categoria",onClick:S},[...t[6]||(t[6]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14"}),e("path",{d:"M5 12h14"})],-1)])])]),e("div",ae,[e("button",{type:"button",class:h(["flex-1 rounded-xl px-4 py-2.5 text-sm font-semibold transition",v.value==="expense"?"bg-white text-slate-900 shadow-sm":"bg-transparent text-slate-400"]),onClick:t[0]||(t[0]=s=>v.value="expense")}," Despesas ",2),e("button",{type:"button",class:h(["flex-1 rounded-xl px-4 py-2.5 text-sm font-semibold transition",v.value==="income"?"bg-white text-slate-900 shadow-sm":"bg-transparent text-slate-400"]),onClick:t[1]||(t[1]=s=>v.value="income")}," Receitas ",2)]),m(I,{open:C.value,title:"Nova Categoria",onClose:O},{default:k(()=>[e("div",ne,[e("div",ie,[e("div",re,[e("div",de,[e("div",{class:"flex h-16 w-16 items-center justify-center rounded-2xl text-white shadow-md",style:b({backgroundColor:d.value})},[(l(),a("svg",ue,[e("path",{d:g(r.value)},null,8,ce)]))],4),e("div",ve,_(i.value||"Nova..."),1)])])]),e("div",null,[t[8]||(t[8]=e("div",{class:"mb-3 flex items-center gap-2 text-xs font-bold uppercase tracking-wide text-slate-300"},[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M4 7h16M10 3v4M14 3v4M4 11h16v8H4z"})]),e("span",null,"Nome da Categoria")],-1)),F(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>i.value=s),type:"text",placeholder:"Nome da Categoria",class:"h-12 w-full rounded-2xl bg-slate-50 px-4 text-sm font-semibold text-slate-900 placeholder:text-slate-400 ring-1 ring-slate-200/60 focus:outline-none focus:ring-2 focus:ring-[#14B8A6]"},null,512),[[T,i.value]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-xs font-bold uppercase tracking-wide text-slate-300"},"Ícone",-1)),e("div",xe,[(l(),a(f,null,w(z,s=>e("button",{key:s,type:"button",class:h(["flex h-12 w-12 items-center justify-center rounded-2xl bg-slate-800 text-white transition",r.value===s?"ring-2 ring-offset-2 ring-slate-900":""]),onClick:y=>r.value=s},[(l(),a("svg",fe,[e("path",{d:g(s)},null,8,pe)]))],10,he)),64))])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-xs font-bold uppercase tracking-wide text-slate-300"},"Cor",-1)),e("div",ge,[(l(),a(f,null,w(D,s=>e("button",{key:s,type:"button",class:h(["h-10 w-10 rounded-full transition",d.value===s?"ring-2 ring-offset-2 ring-slate-900":""]),style:b({backgroundColor:s}),onClick:y=>d.value=s},null,14,me)),64))])]),e("div",{class:"flex gap-3 pt-4"},[e("button",{type:"button",class:"flex-1 h-12 rounded-2xl bg-slate-100 text-sm font-semibold text-slate-600 transition hover:bg-slate-200",onClick:O}," Cancelar "),e("button",{type:"button",class:"flex-1 h-12 rounded-2xl bg-[#14B8A6] text-sm font-semibold text-white transition hover:bg-[#0D9488]",onClick:A}," Salvar ")])])]),_:1},8,["open"]),m(I,{open:p.value,title:"Editar Categoria",onClose:V},{default:k(()=>[n.value?(l(),a("div",be,[e("div",we,[e("div",Ce,[e("div",ye,[e("div",{class:"flex h-16 w-16 items-center justify-center rounded-2xl text-white shadow-md",style:b({backgroundColor:d.value})},[(l(),a("svg",ke,[e("path",{d:g(r.value)},null,8,_e)]))],4),e("div",Me,_(i.value||n.value.name),1)])])]),e("div",null,[e("div",Be,[t[11]||(t[11]=e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 20h9"}),e("path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z"})],-1)),e("span",null,_(i.value||n.value.name),1)]),F(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>i.value=s),type:"text",class:"h-12 w-full rounded-2xl bg-slate-50 px-4 text-sm font-semibold text-slate-900 ring-1 ring-slate-200/60 focus:outline-none focus:ring-2 focus:ring-[#14B8A6]"},null,512),[[T,i.value]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-xs font-bold uppercase tracking-wide text-slate-300"},"Ícone",-1)),e("div",Ne,[(l(),a(f,null,w(z,s=>e("button",{key:s,type:"button",class:h(["flex h-12 w-12 items-center justify-center rounded-2xl bg-slate-800 text-white transition",r.value===s?"ring-2 ring-offset-2 ring-slate-900":""]),onClick:y=>r.value=s},[(l(),a("svg",$e,[e("path",{d:g(s)},null,8,Ee)]))],10,je)),64))])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-xs font-bold uppercase tracking-wide text-slate-300"},"Cor",-1)),e("div",ze,[(l(),a(f,null,w(D,s=>e("button",{key:s,type:"button",class:h(["h-10 w-10 rounded-full transition",d.value===s?"ring-2 ring-offset-2 ring-slate-900":""]),style:b({backgroundColor:s}),onClick:y=>d.value=s},null,14,De)),64))])]),e("div",{class:"flex gap-3 pt-4"},[e("button",{type:"button",class:"flex-1 h-12 rounded-2xl bg-slate-100 text-sm font-semibold text-slate-600 transition hover:bg-slate-200",onClick:V}," Cancelar "),e("button",{type:"button",class:"flex-1 h-12 rounded-2xl bg-[#14B8A6] text-sm font-semibold text-white transition hover:bg-[#0D9488]",onClick:A}," Salvar ")]),e("button",{type:"button",class:"w-full py-2 text-center text-sm font-semibold text-red-500 transition hover:text-red-600",onClick:U}," Excluir Categoria ")])):Q("",!0)]),_:1},8,["open"]),E.value.length>0?(l(),a("div",Se,[(l(!0),a(f,null,w(E.value,s=>(l(),a("button",{key:s.id,type:"button",class:"flex flex-col items-center gap-3 rounded-3xl bg-white px-4 py-6 shadow-sm ring-1 ring-slate-200/60 transition hover:shadow-md",onClick:y=>R(s)},[e("div",{class:"flex h-14 w-14 items-center justify-center rounded-2xl text-white shadow-sm",style:b({backgroundColor:s.color})},[(l(),a("svg",Oe,[e("path",{d:g(s.icon)},null,8,Ve)]))],4),e("div",He,_(s.name),1)],8,Ae))),128)),e("button",{type:"button",class:"flex flex-col items-center justify-center gap-3 rounded-3xl border-2 border-dashed border-slate-200 bg-white px-4 py-6 transition hover:border-slate-300",onClick:S},[...t[14]||(t[14]=[e("div",{class:"flex h-14 w-14 items-center justify-center text-slate-300"},[e("svg",{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14"}),e("path",{d:"M5 12h14"})])],-1),e("div",{class:"text-sm font-semibold text-slate-400"},"Nova Categoria",-1)])])])):(l(),a("div",Fe,[...t[15]||(t[15]=[e("div",{class:"mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-slate-50 text-slate-400"},[e("svg",{class:"h-8 w-8",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 3h7l1 2h10v14H3z"})])],-1),e("div",{class:"mt-4 text-base font-semibold text-slate-900"},"Nenhuma categoria",-1),e("div",{class:"mt-2 text-sm text-slate-500"},"Crie sua primeira categoria para começar.",-1)])])),m(oe,{show:M.value,message:$.value,onDismiss:t[4]||(t[4]=s=>M.value=!1)},null,8,["show","message"])]),_:1},16))],64))}});export{Re as default};
