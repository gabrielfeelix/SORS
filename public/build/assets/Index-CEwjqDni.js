import{d as L,c as i,u as O,h as n,g as r,f as h,a as j,b as c,D as E,E as J,w as u,l as g,e as t,i as K,o as l,F as A,r as G,n as v,t as d,k as Z,j as H,B as Q,C as U,m as W}from"./app-DvJ-vTb0.js";import{_ as X,a as Y,r as ee}from"./DesktopShell.vue_vue_type_script_setup_true_lang-BVoVaQ94.js";import{T as te,e as se,h as S,b as ae,a as oe}from"./TransactionModal-CAPdfSRY.js";import{u as ne,_ as le}from"./useIsMobile-CMH_TBsk.js";import"./inputGuards-BTKUKM9N.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const re={class:"flex items-center justify-between pt-2"},ie={key:0,class:"text-2xl font-semibold tracking-tight text-slate-900"},ce={key:0,class:"mt-6 rounded-3xl border border-dashed border-slate-200 bg-white px-5 py-8 text-center shadow-sm"},ue={key:1,class:"mt-6 space-y-4 pb-4"},de={class:"flex items-start gap-4"},me={key:0,class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},fe={key:1,class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},he={key:2,class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ve={class:"flex-1"},pe={class:"flex items-start justify-between gap-3"},be={class:"text-base font-semibold text-slate-900"},xe={class:"mt-1 text-xs font-semibold text-slate-400"},ge={class:"mt-4 flex items-center justify-between text-sm font-semibold"},we={class:"text-slate-400"},ke={class:"mt-3 h-2 w-full rounded-full bg-slate-100"},ye={class:"mt-3 text-right text-[10px] font-semibold text-slate-400"},Ae=L({__name:"Index",setup(_e){const p=ne(),F=i(()=>p.value?le:X),R=i(()=>p.value?{showNav:!0}:{title:"Metas",showSearch:!1,showNewAction:!0}),$=O(),m=i(()=>$.props.bootstrap??{entries:[],goals:[],accounts:[],categories:[],tags:[]}),z=i(()=>{const s=new Map;for(const a of m.value.categories??[]){const e=a.type==="income"?"income":a.type==="expense"?"expense":void 0,o=s.get(a.name),x=o?.kind&&e&&o.kind!==e?void 0:o?.kind??e;s.set(a.name,{key:a.name,label:a.name,icon:"other",tone:"slate",kind:x})}return Array.from(s.values())}),D=i(()=>{const s=e=>{const o=e.toLowerCase();return o.includes("nubank")?"purple":o.includes("inter")?"amber":o.includes("carteira")||o.includes("dinheiro")?"emerald":"slate"},a=[];for(const e of m.value.accounts??[])e.type!=="credit_card"&&a.push({key:e.name,label:e.name,subtitle:e.type==="wallet"?"Carteira":"Conta",tone:s(e.name),type:e.type,balance:Number(e.current_balance??0),customColor:e.color??void 0,icon:e.icon??void 0});for(const e of m.value.accounts??[]){if(e.type!=="credit_card")continue;const o=Number(e.credit_limit??0),x=Math.max(0,Number(e.current_balance??0));a.push({key:e.name,label:e.name,subtitle:"Cartão de Crédito",tone:s(e.name),type:"credit_card",limit:o,used:x,available:o-x,customColor:e.color??void 0,icon:e.icon??void 0})}return a}),f=n(m.value.goals??[]),y=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",maximumFractionDigits:0}).format(s),_=s=>s.target?Math.min(100,Math.round(s.current/s.target*100)):0,M={on_track:{label:"No ritmo",cls:"bg-emerald-50 text-emerald-600",dot:"bg-emerald-500"},ahead:{label:"Adiantado",cls:"bg-blue-50 text-blue-600",dot:"bg-blue-500"},late:{label:"Atrasado",cls:"bg-red-50 text-red-500",dot:"bg-red-500"}},w=s=>M[s]??M.on_track,C=n("all");i(()=>C.value==="all"?f.value:f.value.filter(s=>(s.term??"long")===C.value)),n(!1);const N=n(null);i(()=>N.value?f.value.find(s=>s.id===N.value)??null:null),n(!1),n(!1);const b=n(!1),B=n("expense"),T=n(null),I=()=>{B.value="expense",T.value=null,b.value=!0},P=n(!1),V=n(""),k=s=>{V.value=s,P.value=!0},q=async s=>{if(s.kind==="transfer"){try{await se(s),k("Transferência realizada"),W.reload({only:["bootstrap"]})}catch{k("Não foi possível realizar a transferência")}return}await(S(s)?Y:ee)(route("transactions.store"),{method:"POST",body:S(s)?ae(s):JSON.stringify(oe(s))}),b.value=!1,k("Movimentação salva")};return(s,a)=>(l(),r(A,null,[h(c(E),{title:"Metas"}),(l(),j(U(F.value),Q(R.value,{onAdd:I}),J({default:u(()=>[t("header",re,[c(p)?(l(),r("div",ie,"Metas")):K("",!0),h(c(g),{href:s.route("goals.create"),class:"flex h-11 w-11 items-center justify-center rounded-2xl bg-white text-[#14B8A6] shadow-sm ring-1 ring-slate-200/60","aria-label":"Nova meta"},{default:u(()=>[...a[1]||(a[1]=[t("svg",{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M12 5v14"}),t("path",{d:"M5 12h14"})],-1)])]),_:1},8,["href"])]),f.value.length===0?(l(),r("div",ce,[h(c(g),{href:s.route("goals.create"),class:"mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-slate-50 text-slate-400","aria-label":"Nova meta"},{default:u(()=>[...a[2]||(a[2]=[t("svg",{class:"h-8 w-8",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M12 5v14"}),t("path",{d:"M5 12h14"})],-1)])]),_:1},8,["href"]),a[3]||(a[3]=t("div",{class:"mt-4 text-base font-semibold text-slate-900"},"Nova meta",-1)),a[4]||(a[4]=t("div",{class:"mt-2 text-sm text-slate-500"},"Crie um objetivo financeiro e acompanhe o progresso.",-1))])):(l(),r("div",ue,[(l(!0),r(A,null,G(f.value,e=>(l(),j(c(g),{key:e.id,href:s.route("goals.show",{goalId:e.id}),class:"block rounded-3xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60"},{default:u(()=>[t("div",de,[t("span",{class:v(["flex h-12 w-12 items-center justify-center rounded-2xl",e.icon==="home"?"bg-emerald-50 text-emerald-600":e.icon==="plane"?"bg-blue-50 text-blue-600":"bg-orange-50 text-orange-500"])},[e.icon==="home"?(l(),r("svg",me,[...a[5]||(a[5]=[t("path",{d:"M3 10.5L12 3l9 7.5"},null,-1),t("path",{d:"M5 10v10h14V10"},null,-1)])])):e.icon==="plane"?(l(),r("svg",fe,[...a[6]||(a[6]=[t("path",{d:"M2 16l20-8-20-8 6 8-6 8Z"},null,-1),t("path",{d:"M6 16v6l4-4"},null,-1)])])):(l(),r("svg",he,[...a[7]||(a[7]=[t("path",{d:"M5 16l1-5 1-3h10l1 3 1 5"},null,-1),t("path",{d:"M7 16h10"},null,-1),t("circle",{cx:"8",cy:"17",r:"1.5"},null,-1),t("circle",{cx:"16",cy:"17",r:"1.5"},null,-1)])]))],2),t("div",ve,[t("div",pe,[t("div",null,[t("div",be,d(e.title),1),t("div",xe,"Prazo: "+d(e.due),1)]),t("span",{class:v(["inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold",w(e.status).cls])},[t("span",{class:v(["h-2 w-2 rounded-full",w(e.status).dot])},null,2),Z(" "+d(w(e.status).label),1)],2)]),t("div",ge,[t("div",{class:v(e.status==="late"?"text-orange-500":"text-[#14B8A6]")},d(y(e.current).replace("R$","R$")),3),t("div",we,"de "+d(y(e.target).replace("R$","R$")),1)]),t("div",ke,[t("div",{class:v(["h-2 rounded-full",e.status==="late"?"bg-orange-500":"bg-[#14B8A6]"]),style:H({width:`${_(e)}%`})},null,6)]),t("div",ye,d(_(e))+"% concluído",1)])])]),_:2},1032,["href"]))),128))])),h(te,{open:b.value,kind:B.value,initial:T.value,categories:z.value,accounts:D.value,tags:m.value.tags,onClose:a[0]||(a[0]=e=>b.value=!1),onSave:q},null,8,["open","kind","initial","categories","accounts","tags"])]),_:2},[c(p)?{name:"fab",fn:u(()=>[h(c(g),{href:s.route("goals.create"),class:"fixed bottom-[calc(5.5rem+env(safe-area-inset-bottom)+1rem)] right-5 z-50 flex h-14 w-14 items-center justify-center rounded-full bg-teal-500 text-white shadow-xl shadow-teal-500/30","aria-label":"Criar meta"},{default:u(()=>[...a[8]||(a[8]=[t("svg",{class:"h-7 w-7",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M12 5v14"}),t("path",{d:"M5 12h14"})],-1)])]),_:1},8,["href"])]),key:"0"}:void 0]),1040))],64))}});export{Ae as default};
