import{d as _,h as m,c as y,g as d,i as E,e,x as D,I as L,F as C,r as B,t as f,o as u,s as V,p as J,b as F,n as $,j as K,f as N}from"./app-DvJ-vTb0.js";import{m as P,p as j,f as R}from"./inputGuards-BTKUKM9N.js";import{r as U}from"./DesktopShell.vue_vue_type_script_setup_true_lang-BVoVaQ94.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={key:0,class:"fixed inset-0 z-[60]"},H={class:"absolute inset-0 w-full bg-white",role:"dialog","aria-modal":"true"},Q={class:"flex h-full flex-col"},W={class:"flex items-center justify-between px-4 pt-[calc(0.5rem+env(safe-area-inset-top))] pb-4"},X={class:"flex-1 overflow-y-auto px-4 pb-[calc(1.5rem+env(safe-area-inset-bottom))]"},Y={class:"mb-4"},Z={class:"grid grid-cols-2 gap-3"},ee=["onClick"],te={class:"text-4xl"},oe={class:"text-sm font-semibold text-slate-900"},se=_({__name:"CreateCreditCardStep1",props:{open:{type:Boolean}},emits:["close","select"],setup(v,{emit:w}){const i=w,s=m(""),n=[{nome:"Nubank",logo:"üü£",cor:"#8B10AE"},{nome:"Banco Inter",logo:"üü¢",cor:"#FF7A00"},{nome:"Ita√∫",logo:"üü†",cor:"#EC7000"},{nome:"Bradesco",logo:"üî¥",cor:"#CC092F"},{nome:"Banco do Brasil",logo:"üü°",cor:"#FFDD00"},{nome:"Caixa",logo:"üîµ",cor:"#0066B3"},{nome:"Santander",logo:"üî¥",cor:"#EC0000"},{nome:"C6 Bank",logo:"‚ö´",cor:"#000000"},{nome:"Outro",logo:"‚ãØ",cor:"#64748B"}],b=y(()=>{const a=s.value.toLowerCase();return a?n.filter(l=>l.nome.toLowerCase().includes(a)):n}),c=a=>{i("select",a)};return(a,l)=>v.open?(u(),d("div",G,[e("button",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm",type:"button",onClick:l[0]||(l[0]=r=>a.$emit("close")),"aria-label":"Fechar"}),e("div",H,[e("div",Q,[e("header",W,[e("button",{class:"h-6 w-6 text-[#6B7280]",type:"button",onClick:l[1]||(l[1]=r=>a.$emit("close")),"aria-label":"Fechar"},[...l[3]||(l[3]=[e("svg",{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M18 6L6 18"}),e("path",{d:"M6 6l12 12"})],-1)])]),l[4]||(l[4]=e("div",{class:"text-[14px] font-bold text-[#1F2937]"},"Escolher Institui√ß√£o",-1)),l[5]||(l[5]=e("div",{class:"w-6"},null,-1))]),e("div",X,[e("div",Y,[D(e("input",{"onUpdate:modelValue":l[2]||(l[2]=r=>s.value=r),type:"text",placeholder:"Buscar banco...",class:"w-full appearance-none rounded-xl border border-[#E5E7EB] bg-[#F9FAFB] px-4 py-3 text-sm text-[#374151] placeholder:text-[#9CA3AF] focus:border-[#14B8A6] focus:outline-none focus:ring-0 focus-visible:outline-none"},null,512),[[L,s.value]])]),e("div",Z,[(u(!0),d(C,null,B(b.value,r=>(u(),d("button",{key:r.nome,type:"button",class:"relative flex flex-col items-center justify-center gap-2 rounded-2xl border border-slate-200 bg-white px-4 py-6 text-center transition hover:bg-slate-50 hover:border-slate-300",onClick:x=>c(r)},[e("div",te,f(r.logo),1),e("div",oe,f(r.nome),1)],8,ee))),128))])])])])])):E("",!0)}}),le={key:0,class:"fixed inset-0 z-[60]"},ne={class:"absolute inset-0 w-full bg-white",role:"dialog","aria-modal":"true"},ae={class:"flex h-full flex-col"},re={class:"flex items-center justify-between px-4 pt-[calc(0.5rem+env(safe-area-inset-top))] pb-4"},ie={class:"flex-1 overflow-y-auto px-6 pb-[calc(1.5rem+env(safe-area-inset-bottom))]"},de=_({__name:"CreateCreditCardStep2",props:{open:{type:Boolean},banco:{}},emits:["close","back","select-method"],setup(v,{emit:w}){return(i,s)=>v.open?(u(),d("div",le,[e("button",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm",type:"button",onClick:s[0]||(s[0]=n=>i.$emit("close")),"aria-label":"Fechar"}),e("div",ne,[e("div",ae,[e("header",re,[e("button",{class:"h-6 w-6 text-[#6B7280]",type:"button",onClick:s[1]||(s[1]=n=>i.$emit("back")),"aria-label":"Voltar"},[...s[4]||(s[4]=[e("svg",{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M15 18l-6-6 6-6"})],-1)])]),s[6]||(s[6]=e("div",{class:"text-[14px] font-bold text-[#1F2937]"},"Como adicionar?",-1)),e("button",{class:"h-6 w-6 text-[#6B7280]",type:"button",onClick:s[2]||(s[2]=n=>i.$emit("close")),"aria-label":"Fechar"},[...s[5]||(s[5]=[e("svg",{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M18 6L6 18"}),e("path",{d:"M6 6l12 12"})],-1)])])]),e("div",ie,[e("button",{type:"button",class:"mt-6 w-full rounded-2xl border-2 border-slate-200 bg-white px-5 py-6 text-left transition hover:border-teal-500 hover:bg-teal-50",onClick:s[3]||(s[3]=n=>i.$emit("select-method","manual"))},[...s[7]||(s[7]=[V('<div class="flex items-center justify-between"><div><div class="text-lg font-semibold text-slate-900">Preenchimento manual</div><div class="mt-1 text-sm text-slate-500">Insira os dados do cart√£o manualmente</div></div><svg class="h-5 w-5 text-slate-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 5l7 7-7 7"></path></svg></div>',1)])]),s[8]||(s[8]=V('<button type="button" disabled class="mt-4 w-full rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50 px-5 py-6 text-left opacity-50 cursor-not-allowed"><div class="flex items-center justify-between"><div><div class="text-lg font-semibold text-slate-900">Open Finance (em breve)</div><div class="mt-1 text-sm text-slate-500">Conecte sua conta automaticamente</div></div><svg class="h-5 w-5 text-slate-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 5l7 7-7 7"></path></svg></div></button>',1))])])])])):E("",!0)}}),ue={key:0,class:"fixed inset-0 z-[60]"},ce={class:"absolute inset-0 w-full bg-white",role:"dialog","aria-modal":"true"},ve={class:"flex h-full flex-col"},be={class:"relative flex items-center px-4 pt-[calc(0.5rem+env(safe-area-inset-top))] pb-3"},pe={class:"flex-1 overflow-y-auto px-6 pb-[calc(1.5rem+env(safe-area-inset-bottom))]"},me={key:0,class:"mt-6"},xe={class:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-4"},fe={class:"flex items-center gap-3"},ge={class:"text-3xl"},we={class:"font-semibold text-slate-900"},he={class:"mt-6"},Ce={class:"mt-6"},ye={class:"grid grid-cols-4 gap-3"},Be=["onClick"],ke={class:"text-2xl"},Fe={class:"mt-6"},$e={class:"flex h-11 items-center gap-1 rounded-lg border border-[#E5E7EB] bg-[#F9FAFB] px-3"},Ee=["value"],_e={class:"mt-6"},Ae={class:"grid grid-cols-2 gap-3"},Se={class:"relative"},Me=["value"],Ne=["value"],Ie={class:"relative"},Ve=["value"],je=["value"],De={class:"mt-6"},Le={class:"flex gap-2"},ze=["onClick","aria-label"],Oe={class:"mt-6 rounded-xl border border-[#E5E7EB] bg-[#F9FAFB] p-4"},Te={class:"flex items-center justify-between"},Je={class:"shrink-0 border-t border-slate-100 px-6 pt-4 pb-[calc(1rem+env(safe-area-inset-bottom))]"},Ke={class:"flex gap-3"},Pe=["disabled"],Re=_({__name:"CreateCreditCardStep3",props:{open:{type:Boolean},banco:{}},emits:["close","back","save"],setup(v,{emit:w}){const i=v,s=w,n=m(""),b=m("visa"),c=m(""),a=m(null),l=m(null),r=m("#8B5CF6"),x=m(!1),A=[{id:"visa",nome:"Visa",logo:"üí≥"},{id:"mastercard",nome:"Mastercard",logo:"üí≥"},{id:"elo",nome:"Elo",logo:"üí≥"},{id:"amex",nome:"Amex",logo:"üí≥"}],S=["#8B5CF6","#3B82F6","#10B981","#F59E0B","#EF4444","#1F2937"],g=Array.from({length:31},(p,t)=>t+1),h=p=>{const t=p.target;c.value=R(t.value)},M=y(()=>P(c.value)),I=y(()=>n.value.trim()!==""&&b.value!==null&&c.value.trim()!==""&&a.value!=null&&l.value!=null&&a.value>=1&&a.value<=31&&l.value>=1&&l.value<=31),z=()=>{n.value=i.banco?.nome??"",b.value="visa",c.value="",a.value=null,l.value=null,r.value=i.banco?.cor??"#8B5CF6",x.value=!1},k=m(!1),O=async()=>{if(I.value){k.value=!0;try{await U("/api/cartoes",{method:"POST",body:JSON.stringify({nome:n.value.trim(),bandeira:b.value,limite:M.value,dia_fechamento:a.value,dia_vencimento:l.value,cor:r.value,icone:"credit-card",is_primary:x.value})}),s("save")}catch(p){console.error("Erro ao salvar cart√£o:",p)}finally{k.value=!1}}};return J(()=>i.open,p=>{p&&z()}),(p,t)=>v.open?(u(),d("div",ue,[e("button",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm",type:"button",onClick:t[0]||(t[0]=o=>p.$emit("close")),"aria-label":"Fechar"}),e("div",ce,[e("div",ve,[e("header",be,[e("button",{class:"h-6 w-6 text-[#6B7280]",type:"button",onClick:t[1]||(t[1]=o=>p.$emit("back")),"aria-label":"Voltar"},[...t[9]||(t[9]=[e("svg",{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M15 18l-6-6 6-6"})],-1)])]),t[11]||(t[11]=e("div",{class:"pointer-events-none absolute inset-0 flex items-center justify-center"},[e("div",{class:"text-[14px] font-bold text-[#1F2937]"},"Novo Cart√£o")],-1)),e("button",{class:"ml-auto h-6 w-6 text-[#6B7280]",type:"button",onClick:t[2]||(t[2]=o=>p.$emit("close")),"aria-label":"Fechar"},[...t[10]||(t[10]=[e("svg",{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M18 6L6 18"}),e("path",{d:"M6 6l12 12"})],-1)])])]),e("div",pe,[v.banco?(u(),d("div",me,[t[12]||(t[12]=e("div",{class:"mb-2 text-xs font-semibold uppercase text-slate-500"},"Institui√ß√£o financeira",-1)),e("div",xe,[e("div",fe,[e("span",ge,f(v.banco.logo),1),e("span",we,f(v.banco.nome),1)])])])):E("",!0),e("div",he,[t[13]||(t[13]=e("div",{class:"mb-2 text-sm font-bold text-[#374151]"},"Nome do cart√£o",-1)),D(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>n.value=o),type:"text",placeholder:"Ex: Nubank Roxo",maxlength:"50",class:"h-11 w-full appearance-none rounded-lg border border-[#E5E7EB] bg-[#F9FAFB] px-3 text-base text-[#374151] placeholder:text-[#9CA3AF] focus:border-[#14B8A6] focus:outline-none focus:ring-0 focus-visible:outline-none"},null,512),[[L,n.value]])]),e("div",Ce,[t[14]||(t[14]=e("div",{class:"mb-3 text-sm font-bold text-[#374151]"},"Bandeira",-1)),e("div",ye,[(u(),d(C,null,B(A,o=>e("button",{key:o.id,type:"button",class:$(["flex h-14 items-center justify-center rounded-xl border-2 font-semibold transition",b.value===o.id?"border-[#14B8A6] bg-teal-50 text-[#14B8A6]":"border-[#E5E7EB] bg-white text-[#6B7280]"]),onClick:T=>b.value=o.id},[e("span",ke,f(o.logo),1)],10,Be)),64))])]),e("div",Fe,[t[16]||(t[16]=e("div",{class:"mb-2 text-sm font-bold text-[#374151]"},"Limite total",-1)),e("div",$e,[t[15]||(t[15]=e("span",{class:"text-base text-[#6B7280]"},"R$",-1)),e("input",{class:"h-full w-full flex-1 appearance-none border-0 bg-transparent text-center text-base text-[#374151] outline-none focus:outline-none focus:ring-0 focus-visible:outline-none",type:"text",inputmode:"numeric",pattern:"[0-9]*",autocomplete:"off",value:c.value,onInput:h,onKeydown:t[4]||(t[4]=(...o)=>F(j)&&F(j)(...o)),placeholder:"0,00","aria-label":"Limite"},null,40,Ee)])]),e("div",_e,[t[23]||(t[23]=e("div",{class:"mb-3 text-sm font-bold text-[#374151]"},"Datas",-1)),e("div",Ae,[e("div",null,[t[19]||(t[19]=e("label",{class:"mb-2 block text-xs text-[#6B7280]"},"Fechamento",-1)),e("div",Se,[e("select",{value:a.value??"",class:"h-11 w-full appearance-none rounded-lg border border-[#E5E7EB] bg-[#F9FAFB] px-3 pr-9 text-center text-base text-[#374151] focus:border-[#14B8A6] focus:outline-none focus:ring-0",onChange:t[5]||(t[5]=o=>{a.value=Number(o.target.value)||null})},[t[17]||(t[17]=e("option",{value:"",disabled:""},"Dia",-1)),(u(!0),d(C,null,B(F(g),o=>(u(),d("option",{key:o,value:o},f(o),9,Ne))),128))],40,Me),t[18]||(t[18]=e("span",{class:"pointer-events-none absolute inset-y-0 right-3 flex items-center text-slate-400"},[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M6 9l6 6 6-6"})])],-1))])]),e("div",null,[t[22]||(t[22]=e("label",{class:"mb-2 block text-xs text-[#6B7280]"},"Vencimento",-1)),e("div",Ie,[e("select",{value:l.value??"",class:"h-11 w-full appearance-none rounded-lg border border-[#E5E7EB] bg-[#F9FAFB] px-3 pr-9 text-center text-base text-[#374151] focus:border-[#14B8A6] focus:outline-none focus:ring-0",onChange:t[6]||(t[6]=o=>{l.value=Number(o.target.value)||null})},[t[20]||(t[20]=e("option",{value:"",disabled:""},"Dia",-1)),(u(!0),d(C,null,B(F(g),o=>(u(),d("option",{key:o,value:o},f(o),9,je))),128))],40,Ve),t[21]||(t[21]=e("span",{class:"pointer-events-none absolute inset-y-0 right-3 flex items-center text-slate-400"},[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M6 9l6 6 6-6"})])],-1))])])])]),e("div",De,[t[24]||(t[24]=e("div",{class:"mb-3 text-sm font-bold text-[#374151]"},"Cor do cart√£o",-1)),e("div",Le,[(u(),d(C,null,B(S,o=>e("button",{key:o,type:"button",class:$(["h-10 w-10 rounded-lg border-2 transition",r.value===o?"border-gray-800":"border-transparent"]),style:K({backgroundColor:o}),onClick:T=>r.value=o,"aria-label":`Cor ${o}`},null,14,ze)),64))])]),e("div",Oe,[e("div",Te,[t[25]||(t[25]=e("div",{class:"text-sm text-slate-700"},"Marcar como principal",-1)),e("button",{type:"button",class:$(["relative inline-flex h-6 w-11 items-center rounded-full transition",x.value?"bg-[#14B8A6]":"bg-[#E5E7EB]"]),onClick:t[7]||(t[7]=o=>x.value=!x.value),"aria-label":"Marcar como principal"},[e("span",{class:$(["inline-block h-5 w-5 transform rounded-full bg-white transition",x.value?"translate-x-5":"translate-x-0.5"])},null,2)],2)])])]),e("footer",Je,[e("div",Ke,[e("button",{class:"flex-1 rounded-xl border border-[#E5E7EB] py-3 text-sm font-semibold text-[#6B7280] transition hover:bg-slate-50",type:"button",onClick:t[8]||(t[8]=o=>p.$emit("close"))}," Cancelar "),e("button",{disabled:!I.value||k.value,class:"flex-1 rounded-xl bg-[#14B8A6] py-3 text-sm font-semibold text-white shadow-lg shadow-teal-500/20 transition hover:bg-[#0D9488] disabled:opacity-50 disabled:cursor-not-allowed",type:"button",onClick:O},f(k.value?"Adicionando...":"Adicionar cart√£o"),9,Pe)])])])])])):E("",!0)}}),Ue=q(Re,[["__scopeId","data-v-571765b0"]]),We=_({__name:"CreateCreditCardFlowModal",props:{open:{type:Boolean}},emits:["close","save"],setup(v,{emit:w}){const i=v,s=w,n=m(1),b=m(null),c=()=>s("close"),a=g=>{b.value=g,n.value=2},l=g=>{g==="manual"&&(n.value=3)},r=()=>{s("save"),c()},x=y(()=>i.open&&n.value===1),A=y(()=>i.open&&n.value===2),S=y(()=>i.open&&n.value===3);return(g,h)=>(u(),d(C,null,[N(se,{open:x.value,onClose:c,onSelect:a},null,8,["open"]),N(de,{open:A.value,banco:b.value,onClose:c,onBack:h[0]||(h[0]=M=>n.value=1),onSelectMethod:l},null,8,["open","banco"]),N(Ue,{open:S.value,banco:b.value,onClose:c,onBack:h[1]||(h[1]=M=>n.value=1),onSave:r},null,8,["open","banco"])],64))}});export{We as _};
