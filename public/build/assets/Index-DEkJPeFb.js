import{d as V,c as p,h as w,z,g as n,f as M,a as F,b as h,D as O,w as B,i as c,e as t,o as i,l as P,t as r,n as u,F as A,r as R,G as H,H as q,C as G}from"./app-nPHX7zkZ.js";import{u as J,_ as Q}from"./useIsMobile-kqNP1psy.js";import{_ as W,r as x}from"./DesktopShell.vue_vue_type_script_setup_true_lang-Dx7t6K8R.js";const Y={key:0,class:"flex items-center gap-3 pt-2"},K={class:"flex-1"},U={class:"text-xs font-semibold text-slate-400"},X={class:"flex items-center gap-2"},Z=["disabled"],tt=["disabled"],et={key:1,class:"flex items-center justify-between"},st={class:"text-sm font-semibold text-slate-500"},at={class:"flex items-center gap-2"},ot=["disabled"],lt=["disabled"],it=["disabled"],nt={class:"mt-4"},dt={class:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide"},rt={key:2,class:"mt-8 rounded-3xl border border-dashed border-slate-200 bg-slate-50 px-5 py-10 text-center md:mx-auto md:max-w-2xl"},ut={key:3,class:"mt-6 space-y-3 md:mx-auto md:max-w-2xl"},ct={class:"flex items-start justify-between gap-4"},xt={class:"flex min-w-0 gap-3"},mt={class:"flex h-10 w-10 shrink-0 items-center justify-center rounded-2xl bg-slate-50 ring-1 ring-slate-200/60"},ft={class:"min-w-0"},vt={class:"mt-1 text-xs text-slate-500"},bt={key:0,class:"mt-2 text-[11px] font-semibold text-slate-400"},pt={class:"flex items-center gap-2"},ht=["onClick"],yt=["onClick"],_t={key:1,class:"h-2 w-2 shrink-0 rounded-full bg-red-500"},Dt=V({__name:"Index",setup(gt){const m=J(),S=p(()=>m.value?Q:W),N=p(()=>m.value?{showNav:!1}:{title:"NotificaÃ§Ãµes",subtitle:"Central de alertas",showSearch:!1,showNewAction:!1}),d=w(!1),l=w([]),f=p(()=>l.value.filter(s=>!s.read_at).length),o=w("all"),y=s=>new Date(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0,0),k=(s,e)=>y(s).getTime()===y(e).getTime(),C=p(()=>{if(o.value==="all")return l.value;const e=y(new Date),a=new Date(e);a.setDate(a.getDate()-1);const v=o.value==="7d"?7:o.value==="30d"?30:0,b=v?new Date(e):null;return b&&b.setDate(b.getDate()-(v-1)),l.value.filter(L=>{const g=new Date(L.created_at);return o.value==="today"?k(g,e):o.value==="yesterday"?k(g,a):o.value==="7d"||o.value==="30d"?g>=b:!0})}),_=async()=>{d.value=!0;try{const s=await x(route("api.notifications.index"));l.value=s.notifications??[]}finally{d.value=!1}},T=s=>{try{return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(s))}catch{return""}},$=s=>s==="vencimento"?"â°":s==="alerta_saldo"?"âš ï¸":s==="resumo_semanal"?"ðŸ“Š":"ðŸ””",E=async s=>{await x(route("api.notifications.read",s),{method:"PATCH"}),l.value=l.value.map(e=>e.id===s?{...e,read_at:new Date().toISOString()}:e)},D=async()=>{await x(route("api.notifications.read-all"),{method:"POST"});const s=new Date().toISOString();l.value=l.value.map(e=>e.read_at?e:{...e,read_at:s})},j=async()=>{await x(route("api.notifications.clear-read"),{method:"DELETE"}),l.value=l.value.filter(s=>!s.read_at)},I=async s=>{await x(route("api.notifications.delete",s),{method:"DELETE"}),l.value=l.value.filter(e=>e.id!==s)};return z(_),(s,e)=>(i(),n(A,null,[M(h(O),{title:"NotificaÃ§Ãµes"}),(i(),F(G(S.value),H(q(N.value)),{default:B(()=>[h(m)?(i(),n("header",Y,[M(h(P),{href:s.route("dashboard"),class:"flex h-10 w-10 items-center justify-center rounded-2xl bg-white text-slate-600 shadow-sm ring-1 ring-slate-200/60","aria-label":"Voltar"},{default:B(()=>[...e[5]||(e[5]=[t("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M15 18l-6-6 6-6"})],-1)])]),_:1},8,["href"]),t("div",K,[e[6]||(e[6]=t("div",{class:"text-xl font-semibold tracking-tight text-slate-900"},"NotificaÃ§Ãµes",-1)),t("div",U,r(f.value)+" nÃ£o lidas",1)]),t("div",X,[t("button",{type:"button",class:"rounded-2xl bg-slate-100 px-4 py-2 text-xs font-semibold text-slate-600 disabled:opacity-60",onClick:D,disabled:d.value||f.value===0}," Marcar lidas ",8,Z),t("button",{type:"button",class:"rounded-2xl bg-slate-100 px-4 py-2 text-xs font-semibold text-slate-600 disabled:opacity-60",onClick:_,disabled:d.value}," Atualizar ",8,tt)])])):c("",!0),h(m)?c("",!0):(i(),n("div",et,[t("div",st,r(f.value)+" nÃ£o lidas",1),t("div",at,[t("button",{type:"button",class:"rounded-2xl bg-slate-100 px-4 py-2 text-sm font-semibold text-slate-600 disabled:opacity-60",onClick:D,disabled:d.value||f.value===0}," Marcar todas como lidas ",8,ot),t("button",{type:"button",class:"rounded-2xl bg-slate-100 px-4 py-2 text-sm font-semibold text-slate-600 disabled:opacity-60",onClick:j,disabled:d.value||l.value.every(a=>!a.read_at)}," Limpar lidas ",8,lt),t("button",{type:"button",class:"rounded-2xl bg-slate-100 px-4 py-2 text-sm font-semibold text-slate-600 disabled:opacity-60",onClick:_,disabled:d.value}," Atualizar ",8,it)])])),t("div",nt,[t("div",dt,[t("button",{type:"button",class:u(["shrink-0 rounded-full px-4 py-2 text-xs font-semibold transition",o.value==="today"?"bg-[#14B8A6] text-white":"bg-slate-100 text-slate-600"]),onClick:e[0]||(e[0]=a=>o.value="today")}," Hoje ",2),t("button",{type:"button",class:u(["shrink-0 rounded-full px-4 py-2 text-xs font-semibold transition",o.value==="yesterday"?"bg-[#14B8A6] text-white":"bg-slate-100 text-slate-600"]),onClick:e[1]||(e[1]=a=>o.value="yesterday")}," Ontem ",2),t("button",{type:"button",class:u(["shrink-0 rounded-full px-4 py-2 text-xs font-semibold transition",o.value==="7d"?"bg-[#14B8A6] text-white":"bg-slate-100 text-slate-600"]),onClick:e[2]||(e[2]=a=>o.value="7d")}," Ãšltimos 7 dias ",2),t("button",{type:"button",class:u(["shrink-0 rounded-full px-4 py-2 text-xs font-semibold transition",o.value==="30d"?"bg-[#14B8A6] text-white":"bg-slate-100 text-slate-600"]),onClick:e[3]||(e[3]=a=>o.value="30d")}," Ãšltimos 30 dias ",2),t("button",{type:"button",class:u(["shrink-0 rounded-full px-4 py-2 text-xs font-semibold transition",o.value==="all"?"bg-[#14B8A6] text-white":"bg-slate-100 text-slate-600"]),onClick:e[4]||(e[4]=a=>o.value="all")}," Todos ",2)])]),!C.value.length&&!d.value?(i(),n("div",rt,[...e[7]||(e[7]=[t("div",{class:"mx-auto flex h-12 w-12 items-center justify-center rounded-2xl bg-white text-slate-400"},[t("svg",{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M15 17h5l-1.4-1.4A2 2 0 0 1 18 14V11a6 6 0 1 0-12 0v3a2 2 0 0 1-.6 1.6L4 17h5"}),t("path",{d:"M9 17a3 3 0 0 0 6 0"})])],-1),t("div",{class:"mt-3 text-sm font-semibold text-slate-900"},"Sem notificaÃ§Ãµes",-1),t("div",{class:"mt-1 text-xs text-slate-500"},"Quando algo importante acontecer, avisamos por aqui.",-1)])])):(i(),n("div",ut,[(i(!0),n(A,null,R(C.value,a=>(i(),n("div",{key:a.id,class:"rounded-3xl bg-white px-5 py-4 shadow-sm ring-1 ring-slate-200/60"},[t("div",ct,[t("div",xt,[t("div",mt,r($(a.type)),1),t("div",ft,[t("div",{class:u(["truncate text-sm font-semibold",a.read_at?"text-slate-700":"text-slate-900"])},r(a.title),3),t("div",vt,r(a.body),1),a.created_at?(i(),n("div",bt,r(T(a.created_at)),1)):c("",!0)])]),t("div",pt,[a.read_at?c("",!0):(i(),n("button",{key:0,type:"button",class:"rounded-xl bg-slate-100 px-3 py-2 text-xs font-semibold text-slate-600",onClick:v=>E(a.id)}," Marcar lida ",8,ht)),t("button",{type:"button",class:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-100 text-slate-500","aria-label":"Excluir",onClick:v=>I(a.id)},[...e[8]||(e[8]=[t("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M3 6h18"}),t("path",{d:"M8 6V4h8v2"}),t("path",{d:"M19 6l-1 16H6L5 6"}),t("path",{d:"M10 11v6"}),t("path",{d:"M14 11v6"})],-1)])],8,yt),a.read_at?c("",!0):(i(),n("span",_t))])])]))),128))]))]),_:1},16))],64))}});export{Dt as default};
