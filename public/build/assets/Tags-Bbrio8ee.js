import{d as P,c as _,u as z,h as o,g as d,f as m,a as L,b as M,D as H,w as g,e,l as I,x as E,a2 as J,I as N,i as q,o as n,j as b,t as h,F as w,r as S,n as K,G as U,H as Z,C as G}from"./app-Pd0ejbZJ.js";import{u as R,_ as Q,a as W}from"./useIsMobile-CRomRP0o.js";import{_ as X,r as y}from"./DesktopShell.vue_vue_type_script_setup_true_lang-CaKEcI4E.js";import{_ as Y}from"./MobileToast.vue_vue_type_script_setup_true_lang-C2MZCjF4.js";const ee={class:"flex items-center justify-between pt-2"},te={class:"mt-6 flex items-center gap-3"},se={class:"relative flex-1"},ae={key:0,class:"space-y-4 pb-2"},le={class:"flex justify-center pt-2"},oe={class:"mb-3 flex items-center gap-2 text-xs font-bold uppercase tracking-wide text-slate-300"},ne={class:"mt-3 flex gap-2"},re=["onClick"],ie={key:0,class:"mt-6 space-y-3 pb-8"},ue={class:"flex flex-wrap gap-2"},de=["onClick"],ce={key:1,class:"mt-8 rounded-3xl border border-dashed border-slate-200 bg-white px-5 py-8 text-center shadow-sm"},ge=P({__name:"Tags",props:{userTags:{}},setup($){const k=R(),A=_(()=>k.value?Q:X),D=_(()=>k.value?{showNav:!1}:{title:"Tags",showSearch:!1,showNewAction:!1});z();const r=o($.userTags||[]),v=o(!1),l=o(null),p=o(""),i=o(""),c=o("#3B82F6"),f=o(!1),C=o(""),u=a=>{C.value=a,f.value=!0},x=["#3B82F6","#EF4444","#F59E0B","#10B981","#6B7280","#A855F7"],T=async()=>{if(p.value.trim())try{const a=x[Math.floor(Math.random()*x.length)],t=await y("/api/tags",{method:"POST",body:JSON.stringify({nome:p.value.trim(),cor:a})});r.value.push(t),p.value="",u("Tag criada com sucesso!")}catch{u("Erro ao criar tag")}},F=a=>{l.value=a,i.value=a.nome,c.value=a.cor,v.value=!0},V=async()=>{if(!i.value.trim()||!l.value){u("Nome da tag é obrigatório");return}try{const a=await y(`/api/tags/${l.value.id}`,{method:"PATCH",body:JSON.stringify({nome:i.value.trim(),cor:c.value})}),t=r.value.findIndex(s=>s.id===l.value.id);t>=0&&(r.value[t]=a),v.value=!1,u("Tag atualizada com sucesso!")}catch{u("Erro ao salvar tag")}},j=async()=>{if(l.value)try{await y(`/api/tags/${l.value.id}`,{method:"DELETE"}),r.value=r.value.filter(a=>a.id!==l.value.id),v.value=!1,u("Tag excluída com sucesso!")}catch{u("Erro ao excluir tag")}},B=()=>{v.value=!1,l.value=null};return(a,t)=>(n(),d(w,null,[m(M(H),{title:"Tags"}),(n(),L(G(A.value),U(Z(D.value)),{default:g(()=>[e("header",ee,[m(M(I),{href:a.route("dashboard"),class:"flex h-10 w-10 items-center justify-center rounded-2xl bg-white text-slate-600 shadow-sm ring-1 ring-slate-200/60","aria-label":"Voltar"},{default:g(()=>[...t[3]||(t[3]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M15 18l-6-6 6-6"})],-1)])]),_:1},8,["href"]),t[4]||(t[4]=e("div",{class:"text-center"},[e("div",{class:"text-lg font-semibold text-slate-900"},"Tags")],-1)),t[5]||(t[5]=e("div",{class:"w-10"},null,-1))]),e("div",te,[e("div",se,[t[6]||(t[6]=e("span",{class:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"},"#",-1)),E(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>p.value=s),type:"text",placeholder:"Criar nova tag...",class:"h-12 w-full rounded-2xl bg-white pl-10 pr-4 text-sm font-semibold text-slate-900 ring-1 ring-slate-200/60 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-[#14B8A6]",onKeyup:J(T,["enter"])},null,544),[[N,p.value]])]),e("button",{type:"button",class:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-2xl bg-[#14B8A6] text-white shadow-sm","aria-label":"Criar tag",onClick:T},[...t[7]||(t[7]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14"}),e("path",{d:"M5 12h14"})],-1)])])]),t[14]||(t[14]=e("div",{class:"mt-2 text-xs font-semibold text-slate-400"}," Toque em uma tag para editar ou excluir. ",-1)),m(W,{open:v.value,title:"Editar Tag",onClose:B},{default:g(()=>[l.value?(n(),d("div",ae,[e("div",le,[e("div",{class:"inline-flex items-center gap-2 rounded-full px-4 py-2.5 text-base font-semibold",style:b({backgroundColor:c.value+"20",color:c.value})},[t[8]||(t[8]=e("span",{class:"text-lg"},"#",-1)),e("span",null,h(i.value||l.value.nome),1)],4)]),e("div",null,[e("div",oe,[t[9]||(t[9]=e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 20h9"}),e("path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z"})],-1)),e("span",null,h(i.value||l.value.nome),1)]),E(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>i.value=s),type:"text",class:"h-12 w-full rounded-2xl bg-slate-50 px-4 text-sm font-semibold text-slate-900 ring-1 ring-slate-200/60 focus:outline-none focus:ring-2 focus:ring-[#14B8A6]"},null,512),[[N,i.value]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-xs font-bold uppercase tracking-wide text-slate-300"},"Cor da Tag",-1)),e("div",ne,[(n(),d(w,null,S(x,s=>e("button",{key:s,type:"button",class:K(["h-10 w-10 rounded-full transition",c.value===s?"ring-2 ring-offset-2 ring-slate-900":""]),style:b({backgroundColor:s}),onClick:O=>c.value=s},null,14,re)),64))])]),e("div",{class:"flex gap-3 pt-4"},[e("button",{type:"button",class:"flex-1 h-12 rounded-2xl bg-slate-100 text-sm font-semibold text-slate-600 transition hover:bg-slate-200",onClick:B}," Cancelar "),e("button",{type:"button",class:"flex-1 h-12 rounded-2xl bg-[#14B8A6] text-sm font-semibold text-white transition hover:bg-[#0D9488]",onClick:V}," Salvar ")]),e("button",{type:"button",class:"w-full py-2 text-center text-sm font-semibold text-red-500 transition hover:text-red-600",onClick:j}," Excluir Tag ")])):q("",!0)]),_:1},8,["open"]),r.value.length>0?(n(),d("div",ie,[t[12]||(t[12]=e("div",{class:"text-xs font-bold uppercase tracking-wide text-slate-400"},"Suas Tags",-1)),e("div",ue,[(n(!0),d(w,null,S(r.value,s=>(n(),d("button",{key:s.id,type:"button",class:"inline-flex items-center gap-1.5 rounded-full px-3 py-1.5 text-sm font-semibold transition hover:opacity-80",style:b({backgroundColor:s.cor+"20",color:s.cor}),onClick:O=>F(s)},[t[11]||(t[11]=e("span",{class:"text-base"},"#",-1)),e("span",null,h(s.nome),1)],12,de))),128))])])):(n(),d("div",ce,[...t[13]||(t[13]=[e("div",{class:"mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-slate-50 text-slate-400"},[e("svg",{class:"h-8 w-8",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M9 5H2v7l6.29 6.29c.94.94 2.48.94 3.42 0l3.58-3.58c.94-.94.94-2.48 0-3.42L9 5Z"}),e("path",{d:"M6 9.01V9"}),e("path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19"})])],-1),e("div",{class:"mt-4 text-base font-semibold text-slate-900"},"Nenhuma tag criada",-1),e("div",{class:"mt-2 text-sm text-slate-500"},"Crie sua primeira tag para organizar suas movimentações.",-1)])])),m(Y,{show:f.value,message:C.value,onDismiss:t[2]||(t[2]=s=>f.value=!1)},null,8,["show","message"])]),_:1},16))],64))}});export{ge as default};
