import{d as ge,h as c,p as Le,c as o,g as d,i as T,e,s as Oe,x as le,j,t as r,I as oe,n as he,o as u,u as Re,f as g,a as Ee,b as xe,D as ze,w as ie,l as Ue,A as qe,k as D,F as Y,r as re,G as He,H as Je,C as Ye,m as Z}from"./app-nPHX7zkZ.js";import{u as Ze,_ as Ke,a as Ge}from"./useIsMobile-kqNP1psy.js";import{_ as Qe,r as K,a as We}from"./DesktopShell.vue_vue_type_script_setup_true_lang-Dx7t6K8R.js";import{T as Xe,h as be,b as et,a as tt}from"./TransactionModal-BaebylTw.js";import{_ as st}from"./CreditCardModal.vue_vue_type_script_setup_true_lang-B2KxZ0NR.js";import{_ as at}from"./ConfirmationModal.vue_vue_type_script_setup_true_lang-DYFPnu_U.js";import{_ as nt}from"./MobileToast.vue_vue_type_script_setup_true_lang-BZagNPxY.js";import{_ as lt}from"./MonthNavigator.vue_vue_type_script_setup_true_lang-Bj-aqx2i.js";import{g as ot,_ as it}from"./InstitutionAvatar.vue_vue_type_script_setup_true_lang-WZ7dJzJM.js";import"./inputGuards-BV9ov3X1.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AccountPickerSheet.vue_vue_type_script_setup_true_lang-CZxILQHY.js";const rt={key:0,class:"fixed inset-0 z-[70]"},ut={class:"absolute inset-x-0 bottom-0 flex max-h-[calc(100vh-1.5rem)] flex-col rounded-t-3xl bg-white shadow-2xl",style:{height:"min(720px, calc(100vh - 1.5rem))"}},dt={class:"flex-1 overflow-y-auto px-5 pb-6 pt-5"},ct={class:"mt-6 rounded-3xl bg-slate-50 p-5 ring-1 ring-slate-200/60"},mt={class:"flex items-center justify-between"},vt={class:"h-5 w-5 text-slate-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ft={key:0,d:"M6 15l6-6 6 6"},pt={key:1,d:"M6 9l6 6 6-6"},xt={key:0,class:"mt-3 grid grid-cols-2 gap-3"},bt={class:"rounded-2xl bg-white p-4 ring-1 ring-slate-200/60"},gt={class:"mt-2 flex items-center gap-2"},ht={class:"rounded-2xl bg-white p-4 ring-1 ring-slate-200/60"},yt={class:"mt-2 flex items-center gap-2"},wt={class:"mt-5 rounded-3xl bg-slate-50 p-5 ring-1 ring-slate-200/60"},_t={class:"flex items-center justify-between text-sm font-semibold text-slate-500"},kt={class:"text-slate-700"},Ct={class:"mt-2 flex items-center justify-between text-sm font-semibold text-slate-500"},Mt={class:"text-amber-600"},$t={class:"mt-4 border-t border-slate-200/70 pt-4"},Dt={class:"flex items-center justify-between text-sm font-semibold text-slate-500"},Nt={class:"text-lg font-semibold text-slate-900"},Ft={class:"mt-2 flex items-center justify-between text-sm font-semibold text-slate-500"},St={class:"text-slate-700"},Bt=ge({__name:"InstallmentInvoiceSheet",props:{open:{type:Boolean},originalAmount:{},accentColor:{default:"#14B8A6"}},emits:["close","confirm"],setup(y,{emit:G}){const N=y,V=G,p=c(3),v=c(!1),i=c(4.5),m=c(12);Le(()=>N.open,h=>{h&&(p.value=3,v.value=!1,i.value=4.5,m.value=12)});const F=h=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(h),k=o(()=>{const h=Math.max(2,Math.min(12,p.value)),l=Math.max(0,Number(i.value)||0)/100,x=Math.max(0,Number(m.value)||0);return N.originalAmount*l*h+x}),L=o(()=>Math.max(0,N.originalAmount+k.value)),w=o(()=>p.value?L.value/p.value:0),S=()=>V("close"),O=()=>V("confirm",{installments:p.value,interestRate:Number(i.value)||0,fee:Number(m.value)||0});return(h,l)=>y.open?(u(),d("div",rt,[e("button",{type:"button",class:"absolute inset-0 bg-black/40 backdrop-blur-sm","aria-label":"Fechar",onClick:S}),e("div",ut,[l[16]||(l[16]=e("div",{class:"mx-auto mt-2 h-1.5 w-12 rounded-full bg-slate-200"},null,-1)),e("div",dt,[l[15]||(l[15]=Oe('<div class="mx-auto flex h-14 w-14 items-center justify-center rounded-2xl bg-amber-50 text-amber-600"><svg class="h-7 w-7" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 1v22"></path><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7H14a3.5 3.5 0 0 1 0 7H6"></path></svg></div><div class="mt-4 text-center"><div class="text-xl font-semibold text-slate-900">Parcelar fatura</div><div class="mt-1 text-sm font-semibold text-slate-400">Simule o parcelamento e veja os juros.</div></div>',2)),e("div",ct,[e("div",mt,[l[4]||(l[4]=e("div",{class:"text-sm font-semibold text-slate-600"},"Número de parcelas",-1)),e("div",{class:"text-2xl font-semibold",style:j({color:y.accentColor})},r(p.value)+"×",5)]),le(e("input",{"onUpdate:modelValue":l[0]||(l[0]=x=>p.value=x),type:"range",min:"2",max:"12",step:"1",class:"mt-5 h-2 w-full cursor-pointer appearance-none rounded-full bg-slate-200 accent-[#14B8A6]",style:j({accentColor:y.accentColor})},null,4),[[oe,p.value,void 0,{number:!0}]]),l[5]||(l[5]=e("div",{class:"mt-3 flex items-center justify-between text-xs font-semibold text-slate-400"},[e("span",null,"2×"),e("span",null,"12×")],-1))]),e("button",{type:"button",class:he(["mt-5 flex w-full items-center justify-between rounded-2xl px-2 py-3 text-sm font-semibold",v.value?"text-slate-700":"text-[#14B8A6]"]),onClick:l[1]||(l[1]=x=>v.value=!v.value)},[l[6]||(l[6]=e("span",{class:"uppercase tracking-wide"},"Personalizar taxas",-1)),(u(),d("svg",vt,[v.value?(u(),d("path",ft)):(u(),d("path",pt))]))],2),v.value?(u(),d("div",xt,[e("div",bt,[l[8]||(l[8]=e("div",{class:"text-[11px] font-bold uppercase tracking-wide text-slate-400"},"Juros (a.m)",-1)),e("div",gt,[le(e("input",{"onUpdate:modelValue":l[2]||(l[2]=x=>i.value=x),inputmode:"decimal",class:"w-full appearance-none border-0 bg-transparent text-base font-semibold text-slate-900 outline-none ring-0 focus:ring-0 focus-visible:outline-none"},null,512),[[oe,i.value,void 0,{number:!0}]]),l[7]||(l[7]=e("span",{class:"text-sm font-semibold text-slate-500"},"%",-1))])]),e("div",ht,[l[10]||(l[10]=e("div",{class:"text-[11px] font-bold uppercase tracking-wide text-slate-400"},"Multa/IOF",-1)),e("div",yt,[l[9]||(l[9]=e("span",{class:"text-sm font-semibold text-slate-500"},"R$",-1)),le(e("input",{"onUpdate:modelValue":l[3]||(l[3]=x=>m.value=x),inputmode:"decimal",class:"w-full appearance-none border-0 bg-transparent text-base font-semibold text-slate-900 outline-none ring-0 focus:ring-0 focus-visible:outline-none"},null,512),[[oe,m.value,void 0,{number:!0}]])])])])):T("",!0),e("div",wt,[e("div",_t,[l[11]||(l[11]=e("span",null,"Valor original",-1)),e("span",kt,r(F(y.originalAmount)),1)]),e("div",Ct,[l[12]||(l[12]=e("span",null,"Encargos (Juros + Multa)",-1)),e("span",Mt,"+ "+r(F(k.value)),1)]),e("div",$t,[e("div",Dt,[l[13]||(l[13]=e("span",null,"Valor da parcela",-1)),e("span",Nt,r(F(w.value)),1)]),e("div",Ft,[l[14]||(l[14]=e("span",null,"Total a pagar",-1)),e("span",St,r(F(L.value)),1)])])]),e("button",{type:"button",class:"mt-6 h-14 w-full rounded-2xl text-base font-semibold text-white shadow-lg shadow-teal-600/25",style:j({backgroundColor:y.accentColor}),onClick:O}," Confirmar parcelamento ",4)])])])):T("",!0)}}),Tt={class:"flex items-center justify-between pt-2"},jt={class:"text-center"},It={class:"mt-1 flex items-center justify-center gap-2"},At={class:"text-lg font-semibold text-slate-900"},Pt={class:"relative"},Vt={class:"mt-6"},Lt={class:"mt-6 rounded-3xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60"},Ot={class:"flex items-start justify-between"},Rt={class:"mt-2 text-3xl font-bold tracking-tight text-slate-900"},Et={class:"mt-5 grid grid-cols-2 gap-4 text-xs font-semibold text-slate-500"},zt={class:"text-slate-900"},Ut={class:"text-right"},qt={class:"text-slate-900"},Ht={class:"mt-3 h-2 overflow-hidden rounded-full bg-slate-100"},Jt={class:"mt-2 flex items-center justify-between text-[11px] font-semibold text-slate-400"},Yt={key:0,class:"mt-4 flex items-center gap-2 text-xs font-semibold text-slate-500"},Zt={class:"ml-auto inline-flex items-center gap-2 rounded-full bg-slate-50 px-3 py-1 text-[11px] font-bold text-slate-500 ring-1 ring-slate-200/60"},Kt={class:"mt-8 pb-[calc(7rem+env(safe-area-inset-bottom))]"},Gt={key:0,class:"mt-4 rounded-3xl border border-dashed border-slate-200 bg-slate-50 px-5 py-10 text-center"},Qt={key:1,class:"mt-4 space-y-4"},Wt={class:"px-5 py-4 text-xs font-bold uppercase tracking-wide text-slate-400"},Xt={class:"divide-y divide-slate-100"},es={class:"min-w-0"},ts={class:"truncate text-sm font-semibold text-slate-900"},ss={class:"mt-1 text-xs font-semibold text-slate-400"},as={class:"text-right text-sm font-semibold text-slate-900"},ns={key:0,class:"mt-1 text-[11px] font-semibold text-slate-400"},ls={class:"fixed inset-x-0 bottom-0 bg-white px-5 pb-[calc(1rem+env(safe-area-inset-bottom))] pt-3 shadow-[0_-18px_40px_-32px_rgba(15,23,42,0.45)]"},os={class:"mx-auto flex w-full max-w-md gap-3"},is=["disabled"],rs={class:"space-y-4"},us={class:"rounded-2xl bg-slate-50 px-4 py-4 ring-1 ring-slate-200/60"},ds={class:"text-xs font-semibold text-slate-500"},cs={class:"mt-2 text-2xl font-bold text-slate-900"},ms={class:"space-y-3"},vs=["disabled","onClick"],fs={class:"min-w-0 flex-1"},ps={class:"flex items-center gap-3"},xs={key:0,class:"h-3 w-3 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},bs={class:"truncate text-sm font-semibold text-slate-900"},gs={class:"mt-2 text-xs font-semibold text-slate-500"},hs={key:0,class:"mt-1 text-xs font-semibold text-amber-600"},ys={key:1,class:"mt-1 text-xs font-semibold text-emerald-600"},ws={class:"mt-2 flex gap-3"},_s=["disabled"],As=ge({__name:"Show",props:{accountId:{}},setup(y){const G=y,N=Ze(),V=o(()=>N.value?Ke:Qe),p=Re(),v=o(()=>p.props.bootstrap??{entries:[],goals:[],accounts:[],categories:[],tags:[]}),i=o(()=>v.value.accounts.find(s=>s.id===G.accountId)??null),m=o(()=>i.value?.name??"Cartão de crédito"),F=o(()=>N.value?{showNav:!1}:{title:"Cartão de crédito",subtitle:m.value,showSearch:!1,showNewAction:!1}),k=o(()=>String(i.value?.card_brand??"visa")),L=o(()=>k.value==="mastercard"?"Mastercard":k.value==="elo"?"Elo":k.value==="amex"?"Amex":"Visa"),w=o(()=>String(i.value?.color??"#8B5CF6")),S=o(()=>Number(i.value?.credit_limit??0)),O=o(()=>Number(i.value?.closing_day??0)||null),h=o(()=>Number(i.value?.due_day??0)||null),l=o(()=>i.value?.institution??null),x=o(()=>i.value?.svgPath??ot(l.value??m.value??null)),I=o(()=>{const s=new Date,t=[];for(let a=-3;a<=2;a+=1){const n=new Date(s.getFullYear(),s.getMonth()+a,1),f=new Intl.DateTimeFormat("pt-BR",{month:"short"}).format(n).replace(".","").toUpperCase();t.push({key:`${n.getFullYear()}-${n.getMonth()}`,label:f,date:n})}return t}),R=c(I.value.find(s=>s.date.getMonth()===new Date().getMonth())?.key??I.value[0]?.key??""),Q=o(()=>I.value.find(s=>s.key===R.value)??I.value[0]),W=o(()=>{const s=i.value?.name;return s?(v.value.entries??[]).filter(t=>t.accountLabel===s):[]}),ue=o(()=>{const s=Q.value?.date;if(!s)return null;const t=O.value??0,a=s.getFullYear(),n=s.getMonth(),f=new Date(a,n,1),ae=new Date(a,n+1,0).getDate(),H=t>0?Math.min(t,ae):0;if(!H){const Ve=new Date(a,n+1,0,23,59,59,999);return{start:f,end:Ve}}const J=new Date(a,n,H,23,59,59,999),ne=new Date(a,n,0).getDate();let B;return t>=ne?B=new Date(a,n,1):B=new Date(a,n-1,t+1),B.setHours(0,0,0,0),{start:B,end:J}}),X=o(()=>{const s=W.value.filter(a=>a.kind==="expense").filter(a=>a.status==="pending").reduce((a,n)=>a+(Number(n.amount)||0),0),t=W.value.filter(a=>a.kind==="income").filter(a=>a.status==="received").reduce((a,n)=>a+(Number(n.amount)||0),0);return Math.max(0,s-t)}),ye=o(()=>S.value?Math.max(0,S.value-X.value):0),de=o(()=>{const s=ue.value;return s?W.value.filter(t=>{if(!t.transactionDate)return!0;const a=new Date(t.transactionDate);return a>=s.start&&a<=s.end}):[]}),C=o(()=>de.value.filter(s=>s.kind==="expense").filter(s=>s.status==="pending").reduce((s,t)=>s+(Number(t.amount)||0),0)),we=o(()=>{const s=ue.value;return s&&new Date().getTime()>s.end.getTime()?"Fechada":"Aberta"}),ce=o(()=>S.value?Math.min(100,Math.max(0,X.value/S.value*100)):0),_e=o(()=>`${ce.value.toFixed(2)}%`),me=o(()=>{if(!h.value)return"";const s=Q.value?.date;if(!s)return"";const t=O.value??0,a=h.value??0;if(!a)return"";let n=s.getFullYear(),f=s.getMonth();t>0&&a<=t&&(f+=1,f>11&&(f=0,n+=1));const ae=new Date(n,f+1,0).getDate(),H=Math.min(a,ae),J=new Date(n,f,H),ne=String(J.getDate()).padStart(2,"0"),B=new Intl.DateTimeFormat("pt-BR",{month:"short"}).format(J).replace(".","").toUpperCase();return`${ne} ${B}`}),ve=o(()=>{const s=new Map;for(const t of de.value){const a=t.dateLabel??"SEM DATA",n=s.get(a)??[];n.push(t),s.set(a,n)}return Array.from(s.entries()).map(([t,a])=>({dateLabel:t,list:a}))}),M=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(s),$=c(!1),ee=c(!1),fe=c(null),te=c(!1),E=c(!1),z=c(!1),se=c(!1),pe=c(""),b=s=>{pe.value=s,se.value=!0},A=c(!1),_=c(""),U=c(!1),ke=o(()=>{const s=Q.value?.date;if(!s)return"";const t=new Intl.DateTimeFormat("pt-BR",{month:"long",year:"numeric"}).format(s);return t.charAt(0).toUpperCase()+t.slice(1)}),q=o(()=>(v.value.accounts??[]).filter(s=>s.type!=="credit_card").map(s=>({key:s.name,label:s.name,balance:Number(s.current_balance??0)}))),P=s=>s<C.value,Ce=()=>{if(!C.value){b("Fatura já está zerada");return}const s=q.value.find(t=>!P(t.balance));_.value=s?.key??"",A.value=!0},Me=async()=>{if(!i.value)return;const s=q.value.find(n=>n.key===_.value)??null;if(!s||P(s.balance))return;const[t,a]=R.value.split("-").map(Number);U.value=!0;try{await K(route("api.cartoes.pay-invoice",{cartao:i.value.id}),{method:"POST",body:JSON.stringify({year:t,month:a,pay_account:_.value})}),A.value=!1,b("Fatura paga"),Z.reload({only:["bootstrap"]})}catch{b("Não foi possível pagar a fatura")}finally{U.value=!1}},$e=()=>{$.value=!1,fe.value={kind:"expense",amount:0,description:"",category:"Alimentação",account:m.value,dateKind:"today",dateOther:"",isInstallment:!1,installmentCount:1,isPaid:!1,tags:[],receiptFile:null,receiptUrl:null,receiptName:null,removeReceipt:!1,transferFrom:"",transferTo:"",transferDescription:""},ee.value=!0},De=()=>{$.value=!1,te.value=!0},Ne=()=>{$.value=!1,E.value=!0},Fe=o(()=>i.value?{id:String(i.value.id),nome:i.value.name??"Cartão",bandeira:k.value??"visa",limite:Number(i.value.credit_limit??0),dia_fechamento:Number(i.value.closing_day??10),dia_vencimento:Number(i.value.due_day??17),cor:w.value,institution:i.value.institution??null}:null),Se=async s=>{try{const t=await(be(s)?We:K)(route("transactions.store"),{method:"POST",body:be(s)?et(s):JSON.stringify(tt(s))});return b("Movimentação adicionada"),Z.reload({only:["bootstrap"]}),t}catch{return b("Não foi possível adicionar"),null}},Be=async s=>{if(s.id)try{await K(`/api/cartoes/${s.id}`,{method:"PATCH",body:JSON.stringify(s)}),b("Cartão atualizado"),Z.reload({only:["bootstrap"]})}catch{b("Não foi possível atualizar")}},Te=async()=>{if(i.value)try{await K(`/api/cartoes/${i.value.id}`,{method:"DELETE"}),b("Cartão excluído"),Z.visit(route("dashboard"))}catch{b("Não foi possível excluir")}finally{E.value=!1}},je=()=>{z.value=!0},Ie=s=>{z.value=!1,b("Em breve: parcelamento de fatura")},Ae=o(()=>{const s=new Map;for(const t of v.value.categories??[]){const a=t.type==="income"?"income":t.type==="expense"?"expense":void 0,n=s.get(t.name),f=n?.kind&&a&&n.kind!==a?void 0:n?.kind??a;s.set(t.name,{key:t.name,label:t.name,icon:n?.icon&&n.icon!=="other"?n.icon:t.icon??"other",customColor:n?.customColor??t.color??void 0,kind:f})}return Array.from(s.values())}),Pe=o(()=>(v.value.accounts??[]).map(s=>{const t=s.type,a=Number(s.credit_limit??0),n=Math.max(0,Number(s.current_balance??0));return{key:s.name,label:s.name,subtitle:s.type==="wallet"?"Carteira":s.type==="bank"?"Conta":"Cartão de Crédito",type:t,balance:s.type==="credit_card"?void 0:Number(s.current_balance??0),limit:s.type==="credit_card"?a:void 0,used:s.type==="credit_card"?n:void 0,available:s.type==="credit_card"?a-n:void 0,customColor:s.color??void 0,icon:s.icon??void 0}}));return(s,t)=>(u(),d(Y,null,[g(xe(ze),{title:m.value},null,8,["title"]),(u(),Ee(Ye(V.value),He(Je(F.value)),{default:ie(()=>[e("header",Tt,[g(xe(Ue),{href:s.route("dashboard"),class:"flex h-10 w-10 items-center justify-center rounded-2xl bg-white text-slate-600 shadow-sm ring-1 ring-slate-200/60","aria-label":"Voltar"},{default:ie(()=>[...t[11]||(t[11]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M15 18l-6-6 6-6"})],-1)])]),_:1},8,["href"]),e("div",jt,[t[12]||(t[12]=e("div",{class:"text-[11px] font-bold uppercase tracking-wide text-slate-400"},"Cartão de crédito",-1)),e("div",It,[g(it,{institution:l.value??m.value,"svg-path":x.value,"fallback-icon":"credit-card","container-class":"flex h-9 w-9 items-center justify-center overflow-hidden rounded-2xl bg-white ring-1 ring-slate-200/60","img-class":"h-6 w-6 object-contain","fallback-icon-class":"h-5 w-5 text-slate-500"},null,8,["institution","svg-path"]),e("div",At,r(m.value),1)])]),e("div",Pt,[e("button",{type:"button",class:"flex h-10 w-10 items-center justify-center rounded-2xl bg-white text-slate-600 shadow-sm ring-1 ring-slate-200/60","aria-label":"Ações",onClick:t[0]||(t[0]=a=>$.value=!$.value)},[...t[13]||(t[13]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 20a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"}),e("path",{d:"M12 13a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"}),e("path",{d:"M12 6a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"})],-1)])]),$.value?(u(),d("div",{key:0,class:"fixed inset-0 z-[65]",onClick:t[2]||(t[2]=a=>$.value=!1)},[e("div",{class:"absolute right-5 top-16 w-60 overflow-hidden rounded-2xl bg-white shadow-2xl ring-1 ring-slate-200/70",onClick:t[1]||(t[1]=qe(()=>{},["stop"]))},[e("button",{type:"button",class:"flex w-full items-center gap-3 px-4 py-3 text-left text-sm font-semibold text-slate-700 hover:bg-slate-50",onClick:$e},[...t[14]||(t[14]=[e("span",{class:"flex h-9 w-9 items-center justify-center rounded-xl bg-emerald-50 text-emerald-600"},[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14"}),e("path",{d:"M5 12h14"})])],-1),D(" Adicionar movimentação ",-1)])]),e("button",{type:"button",class:"flex w-full items-center gap-3 px-4 py-3 text-left text-sm font-semibold text-slate-700 hover:bg-slate-50",onClick:De},[...t[15]||(t[15]=[e("span",{class:"flex h-9 w-9 items-center justify-center rounded-xl bg-slate-100 text-slate-600"},[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 20h9"}),e("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4Z"})])],-1),D(" Editar cartão ",-1)])]),e("button",{type:"button",class:"flex w-full items-center gap-3 px-4 py-3 text-left text-sm font-semibold text-red-600 hover:bg-red-50",onClick:Ne},[...t[16]||(t[16]=[e("span",{class:"flex h-9 w-9 items-center justify-center rounded-xl bg-red-50 text-red-500"},[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18"}),e("path",{d:"M8 6V4h8v2"}),e("path",{d:"M6 6l1 16h10l1-16"})])],-1),D(" Excluir cartão ",-1)])])])])):T("",!0)])]),e("div",Vt,[g(lt,{modelValue:R.value,"onUpdate:modelValue":t[3]||(t[3]=a=>R.value=a),months:I.value},null,8,["modelValue","months"])]),e("section",Lt,[e("div",Ot,[e("div",null,[t[17]||(t[17]=e("div",{class:"text-[11px] font-bold uppercase tracking-wide text-slate-400"},"Fatura atual",-1)),e("div",Rt,r(M(C.value)),1)]),e("span",{class:"rounded-full px-3 py-1 text-[11px] font-bold",style:j({backgroundColor:`${w.value}22`,color:w.value})},r(we.value),5)]),e("div",Et,[e("div",null,[t[18]||(t[18]=D(" Usado: ",-1)),e("span",zt,r(M(X.value)),1)]),e("div",Ut,[t[19]||(t[19]=D(" Disp: ",-1)),e("span",qt,r(M(ye.value)),1)])]),e("div",Ht,[e("div",{class:"h-2 rounded-full",style:j({width:`${ce.value}%`,backgroundColor:w.value})},null,4)]),e("div",Jt,[t[20]||(t[20]=e("span",null,null,-1)),e("span",null,r(_e.value),1)]),me.value?(u(),d("div",Yt,[t[21]||(t[21]=e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("rect",{x:"3",y:"4",width:"18",height:"18",rx:"3"}),e("path",{d:"M8 2v4"}),e("path",{d:"M16 2v4"}),e("path",{d:"M3 10h18"})],-1)),D(" Vence em "+r(me.value)+" ",1),e("span",Zt,r(L.value),1)])):T("",!0)]),e("section",Kt,[t[23]||(t[23]=e("div",{class:"text-lg font-semibold text-slate-900"},"Histórico da fatura",-1)),ve.value.length===0?(u(),d("div",Gt,[...t[22]||(t[22]=[e("div",{class:"text-sm font-semibold text-slate-900"},"Sem lançamentos",-1),e("div",{class:"mt-1 text-xs text-slate-500"},"Quando houver compras, elas aparecem aqui.",-1)])])):(u(),d("div",Qt,[(u(!0),d(Y,null,re(ve.value,a=>(u(),d("div",{key:a.dateLabel,class:"rounded-3xl bg-white shadow-sm ring-1 ring-slate-200/60"},[e("div",Wt,r(a.dateLabel),1),e("div",Xt,[(u(!0),d(Y,null,re(a.list,n=>(u(),d("div",{key:n.id,class:"flex items-center justify-between gap-4 px-5 py-4"},[e("div",es,[e("div",ts,r(n.title),1),e("div",ss,r(n.categoryLabel),1)]),e("div",as,[D(r(M(n.amount))+" ",1),n.installment?(u(),d("div",ns,r(n.installment),1)):T("",!0)])]))),128))])]))),128))]))]),e("footer",ls,[e("div",os,[e("button",{type:"button",class:"h-[52px] flex-1 rounded-2xl bg-slate-100 text-sm font-semibold text-slate-500",onClick:je}," Parcelar "),e("button",{type:"button",class:"h-[52px] flex-[1.2] rounded-2xl text-sm font-semibold text-white disabled:opacity-60",style:j({backgroundColor:w.value}),disabled:!C.value,onClick:Ce}," Pagar fatura ",12,is)])]),g(Xe,{open:ee.value,kind:"expense",initial:fe.value,categories:Ae.value,accounts:Pe.value,tags:v.value.tags,onClose:t[4]||(t[4]=a=>ee.value=!1),onSave:Se},null,8,["open","initial","categories","accounts","tags"]),g(st,{open:te.value,initial:Fe.value,onClose:t[5]||(t[5]=a=>te.value=!1),onSave:Be},null,8,["open","initial"]),g(at,{open:E.value,title:"Excluir cartão de crédito?",message:`Tem certeza que deseja excluir o cartão “${m.value}”?`,warningText:"ATENÇÃO: Isso irá excluir também todas as transações vinculadas a este cartão. Esta ação não pode ser desfeita.",danger:"",confirmLabel:"Excluir",onClose:t[6]||(t[6]=a=>E.value=!1),onConfirm:Te},null,8,["open","message"]),g(Bt,{open:z.value,"original-amount":C.value,"accent-color":w.value,onClose:t[7]||(t[7]=a=>z.value=!1),onConfirm:Ie},null,8,["open","original-amount","accent-color"]),g(Ge,{open:A.value,title:"Pagar fatura",onClose:t[9]||(t[9]=a=>A.value=!1)},{default:ie(()=>[e("div",rs,[e("div",us,[e("div",ds,r(m.value)+" • "+r(ke.value),1),e("div",cs,r(M(C.value)),1),t[24]||(t[24]=e("div",{class:"mt-1 text-xs font-semibold text-slate-400"},"Valor da fatura",-1))]),t[26]||(t[26]=e("div",{class:"text-xs font-bold uppercase tracking-wide text-slate-400"},"De qual conta pagar?",-1)),e("div",ms,[(u(!0),d(Y,null,re(q.value,a=>(u(),d("button",{key:a.key,type:"button",class:"flex w-full items-start justify-between gap-4 rounded-2xl bg-slate-50 px-4 py-4 text-left ring-1 ring-slate-200/70 disabled:opacity-60",disabled:P(a.balance),onClick:n=>_.value=a.key},[e("div",fs,[e("div",ps,[e("span",{class:he(["mt-0.5 flex h-5 w-5 items-center justify-center rounded-full border-2",_.value===a.key?"border-emerald-500 bg-emerald-500":"border-slate-300 bg-white"]),"aria-hidden":"true"},[_.value===a.key?(u(),d("svg",xs,[...t[25]||(t[25]=[e("path",{d:"M20 6 9 17l-5-5"},null,-1)])])):T("",!0)],2),e("div",bs,r(a.label),1)]),e("div",gs,"Saldo: "+r(M(a.balance)),1),P(a.balance)?(u(),d("div",hs,"⚠️ Saldo insuficiente")):(u(),d("div",ys,"✓ Saldo disponível"))])],8,vs))),128))]),e("div",ws,[e("button",{type:"button",class:"flex-1 rounded-2xl bg-slate-100 py-3 text-sm font-semibold text-slate-600",onClick:t[8]||(t[8]=a=>A.value=!1)}," Cancelar "),e("button",{type:"button",class:"flex-1 rounded-2xl bg-emerald-500 py-3 text-sm font-semibold text-white disabled:opacity-60",disabled:U.value||!_.value||P(q.value.find(a=>a.key===_.value)?.balance??0),onClick:Me},r(U.value?"Pagando…":`Pagar ${M(C.value)}`),9,_s)])])]),_:1},8,["open"]),g(nt,{show:se.value,message:pe.value,onDismiss:t[10]||(t[10]=a=>se.value=!1)},null,8,["show","message"])]),_:1},16))],64))}});export{As as default};
