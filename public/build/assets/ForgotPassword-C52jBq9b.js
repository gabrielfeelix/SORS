import{d as $,J as O,h as m,c as V,p as H,z as J,v as Z,a as G,w as y,f as _,e,b as p,D as Q,g as n,i as E,o as a,n as g,t as k,l as S,k as C,A as W,x as T,I as F,F as X,r as Y}from"./app-nPHX7zkZ.js";import{A as ee}from"./AuthShell-CMfaH2pF.js";import{_ as te}from"./InputError.vue_vue_type_script_setup_true_lang-PEWHBa1T.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const se={class:"flex flex-1 flex-col justify-center lg:justify-start lg:pt-8"},le={class:"relative mx-auto w-full max-w-md lg:mx-0"},ae={key:0,class:"absolute left-1/2 top-0 z-20 w-[92%] -translate-x-1/2 rounded-2xl bg-slate-900 px-4 py-3 text-white shadow-[0_18px_35px_-25px_rgba(15,23,42,0.9)] lg:left-0 lg:translate-x-0"},oe={class:"flex items-start gap-3"},ne={class:"text-sm font-semibold"},ie={class:"text-xs text-slate-200"},re={class:"mt-6 text-center lg:text-left"},de={key:0,class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ue={key:1,class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ce={class:"mt-4 text-2xl font-semibold text-slate-900"},me={class:"mt-2 text-sm text-slate-500"},pe={key:0},fe={key:1},ve=["disabled"],ge={key:2,class:"mt-8 space-y-6"},xe={class:"flex items-center justify-center gap-3 lg:justify-start"},he=["onUpdate:modelValue","onFocus","onInput","onKeydown"],we={class:"text-center text-sm text-slate-400 lg:text-left"},be={key:0},ye={key:1},_e={key:0},ke=["disabled"],De=$({__name:"ForgotPassword",props:{status:{}},setup(q){const M=q,r=O({email:""}),d=m(M.status?"code":"email"),i=m(["","","",""]),w=m([]),B=m(null),I=V(()=>i.value.every(s=>s.length>0)),f=m(30),x=m(!1),j=m(!1);let u=null;const v=m(null);let h=null;const D=(s,t,c="info")=>{v.value={title:s,message:t,tone:c},h&&window.clearTimeout(h),h=window.setTimeout(()=>{v.value=null},2e3)},b=(s=30)=>{f.value=s,x.value=!0,u&&window.clearInterval(u),u=window.setInterval(()=>{if(f.value<=1){f.value=0,x.value=!1,u&&window.clearInterval(u),u=null;return}f.value-=1},1e3)},z=()=>{r.post(route("password.email"),{preserveScroll:!0,onSuccess:()=>{d.value="code",b()}})},K=()=>{if(x.value){D("Calma, respira!",`Espera mais ${f.value} segundos pra pedir outro.`,"info");return}if(!r.email){D("Ops!","Preenche seu e-mail pra reenviar.","info");return}j.value=!0,r.post(route("password.email"),{preserveScroll:!0,onSuccess:()=>{d.value="code",D("Enviado!","Codigo novo chegou no seu e-mail.","success"),b()},onFinish:()=>{j.value=!1}})},A=(s,t)=>{w.value[t]=s},N=(s,t)=>{const l=s.target.value.replace(/\D/g,"");if(!l){i.value[t]="";return}const o=l[l.length-1];i.value[t]=o,t<i.value.length-1&&w.value[t+1]?.focus()},R=(s,t)=>{s.key==="Backspace"&&!i.value[t]&&t>0&&w.value[t-1]?.focus()},L=s=>{const t=s.clipboardData?.getData("text").replace(/\D/g,"")??"";if(!t)return;s.preventDefault();const c=t.slice(0,4).split("");i.value=["","","",""].map((o,U)=>c[U]??"");const l=Math.min(c.length,4)-1;l>=0&&w.value[l]?.focus()},P=V(()=>d.value==="code"?"bg-amber-50 text-amber-500":"bg-emerald-50 text-emerald-500");return H(()=>M.status,s=>{s&&(d.value="code",b())}),J(()=>{M.status&&b()}),Z(()=>{u&&window.clearInterval(u),h&&window.clearTimeout(h)}),(s,t)=>(a(),G(ee,null,{aside:y(()=>[...t[2]||(t[2]=[e("div",{class:"relative flex h-full w-full flex-col justify-between overflow-hidden bg-[linear-gradient(160deg,#1ab7a6,#0b7f78)] px-10 py-10 text-white"},[e("div",{class:"pointer-events-none absolute -right-24 -top-20 h-80 w-80 rounded-full bg-white/10"}),e("div",{class:"pointer-events-none absolute -bottom-40 -right-16 h-[520px] w-[520px] rounded-full bg-white/10"}),e("div",{class:"pointer-events-none absolute -bottom-52 -left-28 h-[520px] w-[520px] rounded-full bg-white/10"}),e("div",{class:"relative z-10 space-y-10"},[e("div",{class:"flex items-center gap-3"},[e("div",{class:"flex h-11 w-11 items-center justify-center rounded-xl bg-white text-[var(--kitamo-accent)] text-lg font-bold"}," K "),e("div",{class:"text-lg font-semibold tracking-wide"},"Kitamo")]),e("div",{class:"space-y-4"},[e("h2",{class:"text-4xl font-semibold leading-tight"},"Deu branco? Acontece."),e("p",{class:"max-w-sm text-sm text-white/85"}," Relaxa, a gente recupera isso num instante. Seus dados continuam blindados e seguros com a gente. ")])]),e("div",{class:"relative z-10 mt-10 max-w-md rounded-3xl border border-white/15 bg-white/10 p-6 backdrop-blur"},[e("div",{class:"flex items-center gap-3 text-white"},[e("span",{class:"flex h-9 w-9 items-center justify-center rounded-2xl bg-white/15"},[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[e("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10Z"}),e("path",{d:"M9 12l2 2 4-4"})])]),e("div",{class:"text-sm font-semibold"},"Dica de Mestre")]),e("p",{class:"mt-3 text-sm text-white/80"}," Evite usar a mesma senha em varios sites. O Kitamo recomenda senhas unicas para proteger seu patrimonio. ")])],-1)])]),default:y(()=>[_(p(Q),{title:"Esqueceu a senha"}),e("div",se,[e("div",le,[v.value?(a(),n("div",ae,[e("div",oe,[e("span",{class:g(["flex h-8 w-8 items-center justify-center rounded-full",v.value.tone==="success"?"bg-emerald-500":"bg-emerald-600"])},[...t[3]||(t[3]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[e("path",{d:"M12 8v4"}),e("path",{d:"M12 16h.01"}),e("circle",{cx:"12",cy:"12",r:"9"})],-1)])],2),e("div",null,[e("div",ne,k(v.value.title),1),e("div",ie,k(v.value.message),1)])])])):E("",!0),_(p(S),{href:s.route("login"),class:"hidden items-center gap-2 text-sm font-semibold text-slate-500 lg:inline-flex"},{default:y(()=>[...t[4]||(t[4]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M15 18l-6-6 6-6"})],-1),C(" Voltar pro Login ",-1)])]),_:1},8,["href"]),_(p(S),{href:s.route("login"),class:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-slate-200 bg-white text-slate-400 shadow-sm lg:hidden","aria-label":"Voltar"},{default:y(()=>[...t[5]||(t[5]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M15 18l-6-6 6-6"})],-1)])]),_:1},8,["href"]),e("div",re,[e("div",{class:g(["flex h-14 w-14 items-center justify-center rounded-2xl",P.value])},[d.value==="email"?(a(),n("svg",de,[...t[6]||(t[6]=[e("circle",{cx:"10",cy:"14",r:"6"},null,-1),e("path",{d:"M14.5 9.5L18 6"},null,-1),e("path",{d:"M18 6h-4"},null,-1),e("path",{d:"M18 6v4"},null,-1)])])):(a(),n("svg",ue,[...t[7]||(t[7]=[e("path",{d:"M4 6h16v12H4z"},null,-1),e("path",{d:"m22 6-10 7L2 6"},null,-1)])]))],2),e("h1",ce,k(d.value==="email"?"Esqueceu a senha?":"Checa seu e-mail!"),1),e("p",me,[d.value==="email"?(a(),n("span",pe,[...t[8]||(t[8]=[e("span",{class:"lg:hidden"},"Relaxa, acontece nas melhores familias. Manda seu e-mail ai que a gente resolve.",-1),e("span",{class:"hidden lg:inline"},"Sem stress. Manda seu e-mail cadastrado ai.",-1)])])):(a(),n("span",fe,[...t[9]||(t[9]=[e("span",{class:"lg:hidden"},"Mandamos um codigo de 4 digitos. Digita ele aqui pra gente saber que e voce mesmo.",-1),e("span",{class:"hidden lg:inline"},"Mandamos um codigo de 4 digitos pra la.",-1)])]))])]),d.value==="email"?(a(),n("form",{key:1,class:"mt-8 space-y-5",onSubmit:W(z,["prevent"])},[e("div",null,[t[10]||(t[10]=e("label",{for:"email",class:"text-xs font-semibold text-slate-500"},[e("span",{class:"lg:hidden"},"E-mail cadastrado"),e("span",{class:"hidden lg:inline"},"E-mail de acesso")],-1)),T(e("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=c=>p(r).email=c),type:"email",class:"mt-2 w-full rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-700 placeholder:text-slate-400 focus:border-emerald-200 focus:outline-none focus:ring-2 focus:ring-emerald-100",placeholder:"ex: gabriel@email.com",required:"",autofocus:"",autocomplete:"username"},null,512),[[F,p(r).email]]),_(te,{class:"mt-1",message:p(r).errors.email},null,8,["message"])]),e("button",{type:"submit",class:g(["group flex h-14 w-full items-center justify-center gap-3 rounded-2xl bg-[var(--kitamo-accent)] text-sm font-semibold text-white shadow-[0_20px_35px_-22px_rgba(20,184,166,0.9)]",{"opacity-70":p(r).processing}]),disabled:p(r).processing},[...t[11]||(t[11]=[C(" Enviar codigo ",-1),e("span",{class:"flex items-center gap-2 text-white"},[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M5 12h14"}),e("path",{d:"M13 5l6 7-6 7"})])],-1)])],10,ve)],32)):(a(),n("div",ge,[e("div",xe,[(a(!0),n(X,null,Y(i.value,(c,l)=>T((a(),n("input",{key:l,ref_for:!0,ref:o=>A(o,l),"onUpdate:modelValue":o=>i.value[l]=o,inputmode:"numeric",maxlength:"1",class:g(["h-14 w-14 rounded-2xl border border-slate-200 bg-slate-50 text-center text-lg font-semibold text-slate-800 focus:border-emerald-300 focus:outline-none focus:ring-2 focus:ring-emerald-100",B.value===l?"border-emerald-400":""]),onFocus:o=>B.value=l,onBlur:t[1]||(t[1]=o=>B.value=null),onInput:o=>N(o,l),onKeydown:o=>R(o,l),onPaste:L},null,42,he)),[[F,i.value[l]]])),128))]),e("div",we,[t[13]||(t[13]=C(" Nao chegou? ",-1)),e("button",{type:"button",class:g(["ml-1 font-semibold",x.value?"text-slate-400":"text-emerald-600"]),onClick:K},[j.value?(a(),n("span",be,"Enviando...")):(a(),n("span",ye,[t[12]||(t[12]=C(" Reenviar",-1)),x.value?(a(),n("span",_e," ("+k(f.value)+"s)",1)):E("",!0)]))],2)]),e("button",{type:"button",class:g(["group flex h-14 w-full items-center justify-center gap-3 rounded-2xl bg-[var(--kitamo-accent)] text-sm font-semibold text-white shadow-[0_20px_35px_-22px_rgba(20,184,166,0.9)]",{"opacity-60":!I.value}]),disabled:!I.value}," Validar codigo ",10,ke)]))])])]),_:1}))}});export{De as default};
