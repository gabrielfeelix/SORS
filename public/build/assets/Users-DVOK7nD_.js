import{d as G,c as F,h,J as k,g as r,f as B,a as L,b as o,D as R,w as H,e as t,o as i,t as a,F as C,r as T,n as f,i as u,x as p,I as v,K as g,G as J,H as K,C as q,m as S}from"./app-BblmX-k6.js";import{u as O,_ as Q}from"./useIsMobile-DqUvSeEk.js";import{_ as W}from"./DesktopShell.vue_vue_type_script_setup_true_lang-CbAI3--o.js";import{_ as X}from"./AdminHeader.vue_vue_type_script_setup_true_lang-FyhXTSMg.js";const Y={class:"space-y-4"},Z={key:0,class:"rounded-3xl bg-white p-6 shadow-sm ring-1 ring-slate-200/60"},tt={class:"flex items-center justify-between"},et={class:"text-xs font-semibold text-slate-400"},st={class:"mt-5 overflow-x-auto"},lt={class:"min-w-full text-left text-sm"},ot={class:"divide-y divide-slate-100"},dt={class:"py-4 pr-4"},nt={class:"flex items-center gap-3"},at={class:"flex h-10 w-10 items-center justify-center overflow-hidden rounded-full bg-slate-200 text-xs font-bold text-slate-700"},it=["src"],rt={key:1},xt={class:"min-w-0"},pt={class:"truncate font-semibold text-slate-900"},ut={class:"truncate text-xs font-semibold text-slate-400"},bt={class:"py-4 pr-4 text-slate-600"},mt={class:"py-4 pr-4 text-slate-600"},ct={class:"py-4 pr-4 text-slate-600"},vt={class:"py-4 pr-4"},ft={class:"py-4 pr-4"},gt={class:"py-4 text-right"},yt={class:"inline-flex items-center justify-end gap-2"},_t=["onClick"],wt=["onClick"],ht=["onClick"],kt=["onClick"],Ct={key:0,class:"mt-4 rounded-2xl bg-slate-50 p-4 text-left ring-1 ring-slate-200/60"},St={class:"grid grid-cols-2 gap-3"},Ut={class:"col-span-2"},$t={key:0,class:"mt-1 text-xs font-semibold text-red-600"},Dt={class:"col-span-2"},Vt={class:"mt-4 flex justify-end gap-2"},At=["disabled","onClick"],Et={key:1,class:"mt-4 rounded-2xl bg-slate-50 p-4 text-left ring-1 ring-slate-200/60"},jt={class:"grid grid-cols-2 gap-3"},Nt={class:"col-span-2"},Pt={key:0,class:"mt-1 text-xs font-semibold text-red-600"},Ft={class:"col-span-2"},Bt={class:"mt-4 flex justify-end gap-2"},Tt=["disabled","onClick"],It={key:2,class:"mt-4 rounded-2xl border border-red-200 bg-red-50 p-4 text-left"},Mt={class:"mt-4 flex justify-end gap-2"},zt=["disabled","onClick"],Gt={key:1,class:"space-y-4"},Lt={class:"flex items-start justify-between gap-4"},Rt={class:"flex min-w-0 items-center gap-3"},Ht={class:"flex h-11 w-11 items-center justify-center overflow-hidden rounded-full bg-slate-200 text-xs font-bold text-slate-700"},Jt=["src"],Kt={key:1},qt={class:"min-w-0"},Ot={class:"truncate text-base font-semibold text-slate-900"},Qt={class:"truncate text-xs font-semibold text-slate-400"},Wt={class:"flex flex-col items-end gap-2"},Xt={class:"mt-4 grid grid-cols-2 gap-3 text-xs font-semibold text-slate-500"},Yt={class:"mt-1 text-slate-700"},Zt={class:"mt-1 text-slate-700"},te={class:"col-span-2"},ee={class:"mt-1 text-slate-700"},se={class:"mt-4 flex flex-wrap gap-2"},le=["onClick"],oe=["onClick"],de=["onClick"],ne=["onClick"],ae={key:0,class:"mt-4 rounded-2xl bg-slate-50 p-4 ring-1 ring-slate-200/60"},ie={class:"space-y-3"},re={key:0,class:"mt-1 text-xs font-semibold text-red-600"},xe={class:"grid grid-cols-2 gap-3"},pe={class:"flex justify-end gap-2"},ue=["disabled","onClick"],be={key:1,class:"mt-4 rounded-2xl bg-slate-50 p-4 ring-1 ring-slate-200/60"},me={class:"space-y-3"},ce={key:0,class:"mt-1 text-xs font-semibold text-red-600"},ve={class:"flex justify-end gap-2"},fe=["disabled","onClick"],ge={key:2,class:"mt-4 rounded-2xl border border-red-200 bg-red-50 p-4"},ye={class:"mt-4 flex justify-end gap-2"},_e=["disabled","onClick"],Se=G({__name:"Users",props:{users:{}},setup(I){const y=I,_=O(),M=F(()=>_.value?Q:W),z=F(()=>_.value?{showNav:!1}:{title:"Administração",showSearch:!1,showNewAction:!1}),U=n=>{if(!n)return"";const e=new Date(n);return Number.isFinite(e.getTime())?e.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}):String(n)},$=n=>{const e=String(n).trim().split(/\s+/).filter(Boolean),s=e[0]?.[0]??"U",l=e.length>1?e[e.length-1]?.[0]:"";return`${s}${l}`.toUpperCase()},b=h(null),m=h(null),d=k({name:"",phone:"",role:"user",status:"active"}),c=h(null),x=k({password:"",password_confirmation:""}),D=n=>{m.value=null,c.value=null,b.value=b.value===n.id?null:n.id,d.reset(),d.clearErrors(),d.name=n.name,d.phone=n.phone??"",d.role=n.role,d.status=n.status},V=n=>{d.patch(route("admin.users.update",n),{preserveScroll:!0,onSuccess:()=>{b.value=null,S.reload({only:["users"]})}})},A=n=>{d.reset(),d.clearErrors(),d.name=n.name,d.phone=n.phone??"",d.role=n.role,d.status=n.status==="disabled"?"active":"disabled",d.patch(route("admin.users.update",n.id),{preserveScroll:!0,onSuccess:()=>S.reload({only:["users"]})})},E=n=>{m.value=null,b.value=null,c.value=c.value===n.id?null:n.id,x.reset(),x.clearErrors()},j=n=>{x.patch(route("admin.users.password",n),{preserveScroll:!0,onSuccess:()=>{x.reset(),c.value=null}})},N=n=>{b.value=null,c.value=null,m.value=m.value===n?null:n},w=k({}),P=n=>{w.delete(route("admin.users.destroy",n),{preserveScroll:!0,onSuccess:()=>{m.value=null,S.reload({only:["users"]})}})};return(n,e)=>(i(),r(C,null,[B(o(R),{title:"Administração · Usuários"}),(i(),L(q(M.value),J(K(z.value)),{default:H(()=>[t("div",Y,[B(X,{description:"Gerencie usuários, papéis e status da conta."}),o(_)?(i(),r("div",Gt,[(i(!0),r(C,null,T(y.users,s=>(i(),r("div",{key:s.id,class:"rounded-3xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60"},[t("div",Lt,[t("div",Rt,[t("div",Ht,[s.avatar_url?(i(),r("img",{key:0,src:s.avatar_url,alt:"",class:"h-full w-full object-cover"},null,8,Jt)):(i(),r("span",Kt,a($(s.name)),1))]),t("div",qt,[t("div",Ot,a(s.name),1),t("div",Qt,a(s.email),1)])]),t("div",Wt,[t("span",{class:f(["rounded-full px-3 py-1 text-xs font-semibold",s.role==="admin"?"bg-emerald-50 text-emerald-700":"bg-slate-100 text-slate-600"])},a(s.role==="admin"?"Admin":"Usuário"),3),t("span",{class:f(["rounded-full px-3 py-1 text-xs font-semibold",s.status==="disabled"?"bg-red-50 text-red-600":"bg-emerald-50 text-emerald-700"])},a(s.status==="disabled"?"Desativado":"Ativo"),3)])]),t("div",Xt,[t("div",null,[e[30]||(e[30]=t("div",{class:"text-slate-400"},"Telefone",-1)),t("div",Yt,a(s.phone??"—"),1)]),t("div",null,[e[31]||(e[31]=t("div",{class:"text-slate-400"},"Plano",-1)),t("div",Zt,a(s.plan),1)]),t("div",te,[e[32]||(e[32]=t("div",{class:"text-slate-400"},"Criado em",-1)),t("div",ee,a(U(s.created_at)),1)])]),t("div",se,[t("button",{type:"button",class:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-700",onClick:l=>D(s)}," Editar ",8,le),t("button",{type:"button",class:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-700",onClick:l=>E(s)}," Senha ",8,oe),t("button",{type:"button",class:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-700",onClick:l=>A(s)},a(s.status==="disabled"?"Ativar":"Desativar"),9,de),t("button",{type:"button",class:"rounded-xl border border-red-200 bg-red-50 px-3 py-2 text-xs font-semibold text-red-700",onClick:l=>N(s.id)}," Excluir ",8,ne)]),b.value===s.id?(i(),r("div",ae,[t("div",ie,[t("div",null,[e[33]||(e[33]=t("label",{class:"text-xs font-semibold text-slate-500"},"Nome",-1)),p(t("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>o(d).name=l),type:"text",class:"mt-2 w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm font-semibold text-slate-800"},null,512),[[v,o(d).name]]),o(d).errors.name?(i(),r("div",re,a(o(d).errors.name),1)):u("",!0)]),t("div",null,[e[34]||(e[34]=t("label",{class:"text-xs font-semibold text-slate-500"},"Telefone",-1)),p(t("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>o(d).phone=l),type:"text",class:"mt-2 w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm font-semibold text-slate-800"},null,512),[[v,o(d).phone]])]),t("div",xe,[t("div",null,[e[36]||(e[36]=t("label",{class:"text-xs font-semibold text-slate-500"},"Papel",-1)),p(t("select",{"onUpdate:modelValue":e[11]||(e[11]=l=>o(d).role=l),class:"mt-2 h-11 w-full appearance-none rounded-xl border border-slate-200 bg-white bg-none px-4 pr-10 text-sm font-semibold text-slate-800"},[...e[35]||(e[35]=[t("option",{value:"user"},"Usuário",-1),t("option",{value:"admin"},"Admin",-1)])],512),[[g,o(d).role]])]),t("div",null,[e[38]||(e[38]=t("label",{class:"text-xs font-semibold text-slate-500"},"Status",-1)),p(t("select",{"onUpdate:modelValue":e[12]||(e[12]=l=>o(d).status=l),class:"mt-2 h-11 w-full appearance-none rounded-xl border border-slate-200 bg-white bg-none px-4 pr-10 text-sm font-semibold text-slate-800"},[...e[37]||(e[37]=[t("option",{value:"active"},"Ativo",-1),t("option",{value:"disabled"},"Desativado",-1)])],512),[[g,o(d).status]])])]),t("div",pe,[t("button",{type:"button",class:"rounded-xl border border-slate-200 bg-white px-4 py-2 text-xs font-semibold text-slate-700",onClick:e[13]||(e[13]=l=>b.value=null)},"Cancelar"),t("button",{type:"button",class:"rounded-xl bg-slate-900 px-4 py-2 text-xs font-semibold text-white disabled:opacity-50",disabled:o(d).processing,onClick:l=>V(s.id)},"Salvar",8,ue)])])])):u("",!0),c.value===s.id?(i(),r("div",be,[t("div",me,[t("div",null,[e[39]||(e[39]=t("label",{class:"text-xs font-semibold text-slate-500"},"Nova senha",-1)),p(t("input",{"onUpdate:modelValue":e[14]||(e[14]=l=>o(x).password=l),type:"password",class:"mt-2 w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm font-semibold text-slate-800"},null,512),[[v,o(x).password]]),o(x).errors.password?(i(),r("div",ce,a(o(x).errors.password),1)):u("",!0)]),t("div",null,[e[40]||(e[40]=t("label",{class:"text-xs font-semibold text-slate-500"},"Confirmar senha",-1)),p(t("input",{"onUpdate:modelValue":e[15]||(e[15]=l=>o(x).password_confirmation=l),type:"password",class:"mt-2 w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm font-semibold text-slate-800"},null,512),[[v,o(x).password_confirmation]])]),t("div",ve,[t("button",{type:"button",class:"rounded-xl border border-slate-200 bg-white px-4 py-2 text-xs font-semibold text-slate-700",onClick:e[16]||(e[16]=l=>c.value=null)},"Cancelar"),t("button",{type:"button",class:"rounded-xl bg-slate-900 px-4 py-2 text-xs font-semibold text-white disabled:opacity-50",disabled:o(x).processing,onClick:l=>j(s.id)},"Salvar senha",8,fe)])])])):u("",!0),m.value===s.id?(i(),r("div",ge,[e[41]||(e[41]=t("div",{class:"text-sm font-semibold text-red-700"},"Confirmar exclusão",-1)),e[42]||(e[42]=t("div",{class:"mt-1 text-xs font-semibold text-red-600"},"Essa ação é permanente.",-1)),t("div",ye,[t("button",{type:"button",class:"rounded-xl border border-red-200 bg-white px-4 py-2 text-xs font-semibold text-red-700",onClick:e[17]||(e[17]=l=>m.value=null)},"Cancelar"),t("button",{type:"button",class:"rounded-xl bg-red-600 px-4 py-2 text-xs font-semibold text-white disabled:opacity-50",disabled:o(w).processing,onClick:l=>P(s.id)},"Excluir",8,_e)])])):u("",!0)]))),128))])):(i(),r("div",Z,[t("div",tt,[e[18]||(e[18]=t("div",{class:"text-sm font-semibold text-slate-900"},"Usuários",-1)),t("div",et,a(y.users.length)+" usuários",1)]),t("div",st,[t("table",lt,[e[29]||(e[29]=t("thead",{class:"text-xs font-bold uppercase tracking-wide text-slate-400"},[t("tr",null,[t("th",{class:"py-3 pr-4"},"Usuário"),t("th",{class:"py-3 pr-4"},"Telefone"),t("th",{class:"py-3 pr-4"},"Plano"),t("th",{class:"py-3 pr-4"},"Criado em"),t("th",{class:"py-3 pr-4"},"Papel"),t("th",{class:"py-3 pr-4"},"Status"),t("th",{class:"py-3 text-right"},"Ações")])],-1)),t("tbody",ot,[(i(!0),r(C,null,T(y.users,s=>(i(),r("tr",{key:s.id,class:"align-top"},[t("td",dt,[t("div",nt,[t("div",at,[s.avatar_url?(i(),r("img",{key:0,src:s.avatar_url,alt:"",class:"h-full w-full object-cover"},null,8,it)):(i(),r("span",rt,a($(s.name)),1))]),t("div",xt,[t("div",pt,a(s.name),1),t("div",ut,a(s.email),1)])])]),t("td",bt,a(s.phone??"—"),1),t("td",mt,a(s.plan),1),t("td",ct,a(U(s.created_at)),1),t("td",vt,[t("span",{class:f(["rounded-full px-3 py-1 text-xs font-semibold",s.role==="admin"?"bg-emerald-50 text-emerald-700":"bg-slate-100 text-slate-600"])},a(s.role==="admin"?"Admin":"Usuário"),3)]),t("td",ft,[t("span",{class:f(["rounded-full px-3 py-1 text-xs font-semibold",s.status==="disabled"?"bg-red-50 text-red-600":"bg-emerald-50 text-emerald-700"])},a(s.status==="disabled"?"Desativado":"Ativo"),3)]),t("td",gt,[t("div",yt,[t("button",{type:"button",class:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:l=>D(s)}," Editar ",8,_t),t("button",{type:"button",class:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:l=>E(s)}," Senha ",8,wt),t("button",{type:"button",class:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:l=>A(s)},a(s.status==="disabled"?"Ativar":"Desativar"),9,ht),t("button",{type:"button",class:"rounded-xl border border-red-200 bg-red-50 px-3 py-2 text-xs font-semibold text-red-700 hover:bg-red-100",onClick:l=>N(s.id)}," Excluir ",8,kt)]),b.value===s.id?(i(),r("div",Ct,[t("div",St,[t("div",Ut,[e[19]||(e[19]=t("label",{class:"text-xs font-semibold text-slate-500"},"Nome",-1)),p(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>o(d).name=l),type:"text",class:"mt-2 w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm font-semibold text-slate-800"},null,512),[[v,o(d).name]]),o(d).errors.name?(i(),r("div",$t,a(o(d).errors.name),1)):u("",!0)]),t("div",Dt,[e[20]||(e[20]=t("label",{class:"text-xs font-semibold text-slate-500"},"Telefone",-1)),p(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>o(d).phone=l),type:"text",class:"mt-2 w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm font-semibold text-slate-800"},null,512),[[v,o(d).phone]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"text-xs font-semibold text-slate-500"},"Papel",-1)),p(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>o(d).role=l),class:"mt-2 h-11 w-full appearance-none rounded-xl border border-slate-200 bg-white bg-none px-4 pr-10 text-sm font-semibold text-slate-800"},[...e[21]||(e[21]=[t("option",{value:"user"},"Usuário",-1),t("option",{value:"admin"},"Admin",-1)])],512),[[g,o(d).role]])]),t("div",null,[e[24]||(e[24]=t("label",{class:"text-xs font-semibold text-slate-500"},"Status",-1)),p(t("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>o(d).status=l),class:"mt-2 h-11 w-full appearance-none rounded-xl border border-slate-200 bg-white bg-none px-4 pr-10 text-sm font-semibold text-slate-800"},[...e[23]||(e[23]=[t("option",{value:"active"},"Ativo",-1),t("option",{value:"disabled"},"Desativado",-1)])],512),[[g,o(d).status]])])]),t("div",Vt,[t("button",{type:"button",class:"rounded-xl border border-slate-200 bg-white px-4 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:e[4]||(e[4]=l=>b.value=null)}," Cancelar "),t("button",{type:"button",class:"rounded-xl bg-slate-900 px-4 py-2 text-xs font-semibold text-white disabled:opacity-50",disabled:o(d).processing,onClick:l=>V(s.id)}," Salvar ",8,At)])])):u("",!0),c.value===s.id?(i(),r("div",Et,[t("div",jt,[t("div",Nt,[e[25]||(e[25]=t("label",{class:"text-xs font-semibold text-slate-500"},"Nova senha",-1)),p(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>o(x).password=l),type:"password",class:"mt-2 w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm font-semibold text-slate-800"},null,512),[[v,o(x).password]]),o(x).errors.password?(i(),r("div",Pt,a(o(x).errors.password),1)):u("",!0)]),t("div",Ft,[e[26]||(e[26]=t("label",{class:"text-xs font-semibold text-slate-500"},"Confirmar senha",-1)),p(t("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>o(x).password_confirmation=l),type:"password",class:"mt-2 w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm font-semibold text-slate-800"},null,512),[[v,o(x).password_confirmation]])])]),t("div",Bt,[t("button",{type:"button",class:"rounded-xl border border-slate-200 bg-white px-4 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:e[7]||(e[7]=l=>c.value=null)}," Cancelar "),t("button",{type:"button",class:"rounded-xl bg-slate-900 px-4 py-2 text-xs font-semibold text-white disabled:opacity-50",disabled:o(x).processing,onClick:l=>j(s.id)}," Salvar senha ",8,Tt)])])):u("",!0),m.value===s.id?(i(),r("div",It,[e[27]||(e[27]=t("div",{class:"text-sm font-semibold text-red-700"},"Confirmar exclusão",-1)),e[28]||(e[28]=t("div",{class:"mt-1 text-xs font-semibold text-red-600"},"Essa ação é permanente.",-1)),t("div",Mt,[t("button",{type:"button",class:"rounded-xl border border-red-200 bg-white px-4 py-2 text-xs font-semibold text-red-700 hover:bg-red-100",onClick:e[8]||(e[8]=l=>m.value=null)}," Cancelar "),t("button",{type:"button",class:"rounded-xl bg-red-600 px-4 py-2 text-xs font-semibold text-white disabled:opacity-50",disabled:o(w).processing,onClick:l=>P(s.id)}," Excluir ",8,zt)])])):u("",!0)])]))),128))])])])]))])]),_:1},16))],64))}});export{Se as default};
