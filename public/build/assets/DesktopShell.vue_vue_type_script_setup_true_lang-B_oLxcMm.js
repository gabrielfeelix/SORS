import{d as F,h as _,c as g,p as K,a as q,g as o,i as x,e,t as b,f as T,b as E,l as S,w as $,k as D,F as H,r as L,T as G,n as B,o as s,u as z,z as Z,R as W,s as J,M as O}from"./app-CbuCxuU_.js";import{b as Q}from"./useIsMobile-eLMgQx8O.js";const P=()=>document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")??"",Y=r=>{const v=`; ${document.cookie}`.split(`; ${r}=`);return v.length<2?"":v.pop().split(";").shift()??""},U=()=>{const r=Y("XSRF-TOKEN");if(!r)return"";try{return decodeURIComponent(r)}catch{return r}},N=async()=>{let r=await fetch("/sanctum/csrf-cookie",{credentials:"include"});if(r.ok||(r=await fetch("/csrf-cookie",{credentials:"include"})),!r.ok)throw new Error("Failed to refresh CSRF token");return{csrf:P(),xsrf:U()}},V=async(r,d={})=>{const v=async a=>{const w=String(d.method??"GET").toUpperCase(),h=["PATCH","PUT","DELETE"].includes(w),u={"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",...!a.xsrf?{"X-CSRF-TOKEN":a.csrf}:{},...a.xsrf?{"X-XSRF-TOKEN":a.xsrf}:{},...h?{"X-HTTP-Method-Override":w}:{},...d.headers??{}};return fetch(r,{credentials:"include",...d,method:h?"POST":d.method??"GET",headers:u})},c=String(d.method??"GET").toUpperCase(),m=c!=="GET"&&c!=="HEAD";let f={csrf:P(),xsrf:U()};if(m&&!f.xsrf)try{f=await N()}catch{}let n=await v(f);if(n.status===419)try{const a=await N();n=await v(a)}catch{throw window.location.reload(),new Error("Session expired. Reloading page...")}if(!n.ok){const a=await n.text();throw new Error(a||`Request failed: ${n.status}`)}return await n.json()},lt=async(r,d={})=>{const v=async a=>{const w=String(d.method??"GET").toUpperCase(),h=["PATCH","PUT","DELETE"].includes(w),l=!a.xsrf,u=new Headers(d.headers??{});u.set("X-Requested-With","XMLHttpRequest"),l&&a.csrf&&u.set("X-CSRF-TOKEN",a.csrf),a.xsrf&&u.set("X-XSRF-TOKEN",a.xsrf),h&&u.set("X-HTTP-Method-Override",w);let y=d.body;if(h&&y instanceof FormData){const C=new FormData;for(const[k,M]of y.entries())C.append(k,M);C.set("_method",w),y=C}return fetch(r,{credentials:"include",...d,method:h?"POST":d.method??"GET",body:y,headers:u})},c=String(d.method??"GET").toUpperCase(),m=c!=="GET"&&c!=="HEAD";let f={csrf:P(),xsrf:U()};if(m&&!f.xsrf)try{f=await N()}catch{}let n=await v(f);if(n.status===419)try{const a=await N();n=await v(a)}catch{throw window.location.reload(),new Error("Session expired. Reloading page...")}if(!n.ok){const a=await n.text();throw new Error(a||`Request failed: ${n.status}`)}return await n.json()},ee={key:0,class:"fixed inset-0 z-[90]"},te={class:"absolute right-8 top-[76px] w-[420px] overflow-hidden rounded-3xl bg-white shadow-[0_30px_90px_-45px_rgba(15,23,42,0.55)] ring-1 ring-slate-200/60",role:"dialog","aria-modal":"true"},se={class:"flex items-center justify-between border-b border-slate-100 px-5 py-4"},oe={class:"mt-0.5 text-xs font-semibold text-slate-400"},le={class:"flex items-center gap-2"},ae=["disabled"],re={class:"max-h-[420px] overflow-y-auto px-5 py-4"},ne={key:0,class:"rounded-2xl bg-slate-50 px-4 py-10 text-center text-sm font-semibold text-slate-500 ring-1 ring-slate-100"},ie={key:1,class:"rounded-2xl bg-slate-50 px-4 py-10 text-center ring-1 ring-slate-100"},de={key:2,class:"space-y-3"},ce={class:"flex items-start justify-between gap-3"},ue={class:"min-w-0"},he={class:"mt-1 line-clamp-2 text-xs font-semibold text-slate-500"},fe={key:0,class:"mt-1 h-2 w-2 shrink-0 rounded-full bg-red-500"},pe=F({__name:"DesktopNotificationsPopover",props:{open:{type:Boolean}},emits:["close","unread"],setup(r,{emit:d}){const v=r,c=d,m=_(!1),f=_([]),n=g(()=>f.value.filter(h=>!h.read_at).length),a=g(()=>f.value.slice(0,6)),w=async()=>{m.value=!0;try{const h=await V(route("api.notifications.index"));f.value=h.notifications??[],c("unread",n.value)}finally{m.value=!1}};return K(()=>v.open,h=>{h&&w()}),(h,l)=>(s(),q(G,{to:"body"},[r.open?(s(),o("div",ee,[e("button",{class:"absolute inset-0 bg-black/10",type:"button","aria-label":"Fechar",onClick:l[0]||(l[0]=u=>c("close"))}),e("section",te,[e("div",se,[e("div",null,[l[2]||(l[2]=e("div",{class:"text-sm font-semibold text-slate-900"},"Notificações",-1)),e("div",oe,b(n.value)+" não lidas",1)]),e("div",le,[e("button",{type:"button",class:"rounded-2xl bg-slate-100 px-3 py-2 text-xs font-semibold text-slate-600 disabled:opacity-60",disabled:m.value,onClick:w}," Atualizar ",8,ae),T(E(S),{href:h.route("notifications.index"),class:"rounded-2xl bg-emerald-50 px-3 py-2 text-xs font-semibold text-emerald-700",onClick:l[1]||(l[1]=u=>c("close"))},{default:$(()=>[...l[3]||(l[3]=[D(" Ver todas ",-1)])]),_:1},8,["href"])])]),e("div",re,[m.value?(s(),o("div",ne," Carregando… ")):a.value.length===0?(s(),o("div",ie,[...l[4]||(l[4]=[e("div",{class:"text-sm font-semibold text-slate-900"},"Sem notificações",-1),e("div",{class:"mt-1 text-xs font-semibold text-slate-500"},"Quando algo importante acontecer, avisamos por aqui.",-1)])])):(s(),o("div",de,[(s(!0),o(H,null,L(a.value,u=>(s(),o("div",{key:u.id,class:"rounded-2xl bg-white px-4 py-3 ring-1 ring-slate-200/60"},[e("div",ce,[e("div",ue,[e("div",{class:B(["truncate text-sm font-semibold",u.read_at?"text-slate-700":"text-slate-900"])},b(u.title),3),e("div",he,b(u.body),1)]),u.read_at?x("",!0):(s(),o("span",fe))])]))),128))]))])])])):x("",!0)]))}}),xe={class:"min-h-screen bg-slate-50"},ve={class:"flex min-h-screen"},me={class:"px-5 pt-7"},we={class:"flex items-center gap-3"},ge={key:0,class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},be={key:1,class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ye={key:0,class:"text-xl font-semibold tracking-tight text-slate-900"},ke={class:"mt-5 px-5"},_e={key:0},Ce={class:"mt-6 flex-1 space-y-2 px-5","aria-label":"Menu principal"},Me={key:0,class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Te={key:1,class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ee={key:2,class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Se={key:3,class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},$e={key:4,class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Be={key:5,class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ne={key:0,class:"text-sm font-semibold"},Ae={key:1,class:"ml-auto h-9 w-1.5 rounded-full bg-[#14B8A6]"},Re={key:0,class:"text-sm font-semibold"},je={class:"px-5 pb-6"},qe={class:"flex items-center justify-between rounded-2xl bg-white px-4 py-4 ring-1 ring-slate-200/60"},He={class:"flex items-center gap-3"},Pe={class:"flex h-11 w-11 items-center justify-center overflow-hidden rounded-full bg-slate-200 text-sm font-bold text-slate-700"},Ue=["src"],Oe={key:1},Xe={key:0,class:"leading-tight"},Fe={class:"text-sm font-semibold text-slate-900"},De={class:"flex min-w-0 flex-1 flex-col"},Le={class:"sticky top-0 z-30 border-b border-slate-200/70 bg-white/80 backdrop-blur"},Ve={class:"flex items-center justify-between gap-4 px-6 py-4 md:px-10"},Ie={key:0,class:"text-lg font-semibold text-slate-900"},Ke={key:1,class:"text-sm font-medium text-slate-400"},Ge={class:"flex items-center gap-3"},ze={key:0,class:"hidden items-center gap-2 rounded-2xl bg-slate-50 px-4 py-2 ring-1 ring-slate-200/60 md:flex"},Ze=["placeholder"],We=["aria-expanded"],Je={key:0,class:"absolute right-2.5 top-2.5 h-2 w-2 rounded-full bg-red-500"},Qe=["src"],Ye={key:1},et={class:"flex-1 px-6 py-8 md:px-10"},tt={class:"mx-auto w-full max-w-[1100px]"},X="kitamo:sidebar_collapsed:v1",at=F({__name:"DesktopShell",props:{title:{default:""},subtitle:{default:""},showSearch:{type:Boolean,default:!0},searchPlaceholder:{default:"Buscar…"},showNewAction:{type:Boolean,default:!0},newActionLabel:{default:"Nova Transação"}},emits:["add"],setup(r,{emit:d}){const v=d,c=r,m=z(),f=g(()=>String(m.props?.auth?.user?.name??"")),n=g(()=>f.value.trim().split(/\s+/)[0]??f.value),a=g(()=>m.props?.auth?.user?.avatar_url??m.props?.auth?.user?.profile_photo_url??null),w=g(()=>String(m.props?.auth?.user?.email??"")),h=g(()=>w.value.toLowerCase()==="contato@kitamo.com.br"),l=_(!1);try{l.value=localStorage.getItem(X)==="1"}catch{}const u=()=>{l.value=!l.value;try{localStorage.setItem(X,l.value?"1":"0")}catch{}},y=g(()=>{const p=f.value.trim().split(/\s+/).filter(Boolean),t=p[0]?.[0]??"K",i=p.length>1?p[p.length-1]?.[0]:"";return`${t}${i}`.toUpperCase()}),C=g(()=>[{label:"Painel",href:route("dashboard"),active:route().current("dashboard"),icon:"dashboard"},{label:"Minhas Contas",href:route("accounts.overview"),active:route().current("accounts.overview"),icon:"accounts"},{label:"Transações",href:route("accounts.index"),active:route().current("accounts.*")&&!route().current("accounts.overview"),icon:"cards"},{label:"Cartões de crédito",href:route("credit-cards.my-cards"),active:route().current("credit-cards.*"),icon:"credit"},{label:"Metas",href:route("goals.index"),active:route().current("goals.*"),icon:"target"},{label:"Relatórios",href:route("analysis"),active:route().current("analysis*"),icon:"chart"}]),k=_(!1),M=_(0),I=p=>{M.value=p},A=_(!1),R=async()=>{try{const p=await V(route("api.notifications.count-unread"));M.value=Number(p.count??0)}catch{}};let j=null;return Z(()=>{R(),j=window.setInterval(R,6e4)}),W(()=>{j&&window.clearInterval(j)}),(p,t)=>(s(),o(H,null,[e("div",xe,[e("div",ve,[e("aside",{class:B(["hidden flex-col border-r border-slate-200/70 bg-white md:flex",l.value?"w-[92px]":"w-[280px]"])},[e("div",me,[e("div",we,[e("button",{type:"button",class:"flex h-10 w-10 items-center justify-center rounded-2xl bg-slate-50 text-slate-600 ring-1 ring-slate-200/60 hover:bg-slate-100","aria-label":"Recolher/Expandir menu",onClick:u},[l.value?(s(),o("svg",ge,[...t[6]||(t[6]=[e("path",{d:"M9 18l6-6-6-6"},null,-1)])])):(s(),o("svg",be,[...t[7]||(t[7]=[e("path",{d:"M15 18l-6-6 6-6"},null,-1)])]))]),t[8]||(t[8]=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-2xl bg-[#14B8A6] text-xl font-bold text-white"}," K ",-1)),l.value?x("",!0):(s(),o("div",ye,"Kitamo"))])]),e("div",ke,[e("button",{type:"button",class:B(["flex w-full items-center justify-center gap-2 rounded-2xl bg-[#14B8A6] px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-emerald-500/25 hover:bg-emerald-600",l.value?"px-0":""]),"aria-label":"Nova movimentação",onClick:t[0]||(t[0]=i=>v("add"))},[t[9]||(t[9]=e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14"}),e("path",{d:"M5 12h14"})],-1)),l.value?x("",!0):(s(),o("span",_e,"Nova movimentação"))],2)]),e("nav",Ce,[(s(!0),o(H,null,L(C.value,i=>(s(),q(E(S),{key:i.label,href:i.href,class:B(["group flex items-center gap-4 rounded-2xl px-4 py-3.5 ring-1 ring-transparent transition",[l.value?"justify-center px-0":"",i.active?"bg-emerald-50 text-slate-900 ring-emerald-100":"text-slate-500 hover:bg-slate-50 hover:text-slate-700"]])},{default:$(()=>[e("span",{class:B(["flex h-11 w-11 items-center justify-center rounded-2xl",i.active?"bg-white text-emerald-600 ring-1 ring-emerald-100":"bg-slate-100 text-slate-400"])},[i.icon==="dashboard"?(s(),o("svg",Me,[...t[10]||(t[10]=[e("rect",{x:"3",y:"3",width:"7",height:"7",rx:"2"},null,-1),e("rect",{x:"14",y:"3",width:"7",height:"7",rx:"2"},null,-1),e("rect",{x:"3",y:"14",width:"7",height:"7",rx:"2"},null,-1),e("rect",{x:"14",y:"14",width:"7",height:"7",rx:"2"},null,-1)])])):i.icon==="cards"?(s(),o("svg",Te,[...t[11]||(t[11]=[e("rect",{x:"3",y:"5",width:"18",height:"14",rx:"3"},null,-1),e("path",{d:"M3 10h18"},null,-1)])])):i.icon==="target"?(s(),o("svg",Ee,[...t[12]||(t[12]=[e("circle",{cx:"12",cy:"12",r:"8"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1),e("path",{d:"M12 2v3"},null,-1),e("path",{d:"M22 12h-3"},null,-1),e("path",{d:"M12 22v-3"},null,-1),e("path",{d:"M2 12h3"},null,-1)])])):i.icon==="accounts"?(s(),o("svg",Se,[...t[13]||(t[13]=[e("path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4"},null,-1),e("path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5"},null,-1),e("path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z"},null,-1)])])):i.icon==="credit"?(s(),o("svg",$e,[...t[14]||(t[14]=[e("rect",{x:"2",y:"5",width:"20",height:"14",rx:"3"},null,-1),e("path",{d:"M2 10h20"},null,-1)])])):(s(),o("svg",Be,[...t[15]||(t[15]=[e("path",{d:"M4 19V5"},null,-1),e("path",{d:"M10 19V9"},null,-1),e("path",{d:"M16 19v-4"},null,-1),e("path",{d:"M22 19V7"},null,-1)])]))],2),l.value?x("",!0):(s(),o("span",Ne,b(i.label),1)),i.active&&!l.value?(s(),o("span",Ae)):x("",!0)]),_:2},1032,["href","class"]))),128)),e("button",{type:"button",class:"group flex w-full items-center gap-4 rounded-2xl px-4 py-3.5 text-slate-500 transition hover:bg-slate-50 hover:text-slate-700","aria-label":"Menu",onClick:t[1]||(t[1]=i=>A.value=!0)},[t[16]||(t[16]=J('<span class="flex h-11 w-11 items-center justify-center rounded-2xl bg-slate-100 text-slate-400"><svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 6h16"></path><path d="M4 12h16"></path><path d="M4 18h16"></path></svg></span>',1)),l.value?x("",!0):(s(),o("span",Re,"Menu"))])]),e("div",je,[e("div",qe,[e("div",He,[e("div",Pe,[a.value?(s(),o("img",{key:0,src:a.value,alt:"",class:"h-full w-full object-cover"},null,8,Ue)):(s(),o("span",Oe,b(y.value),1))]),l.value?x("",!0):(s(),o("div",Xe,[e("div",Fe,b(n.value||"Usuário"),1),t[17]||(t[17]=e("div",{class:"text-xs font-medium text-slate-400"},"Plano UI/UX",-1))]))]),T(E(S),{href:p.route("settings"),class:"flex h-10 w-10 items-center justify-center rounded-2xl bg-slate-50 text-slate-600 ring-1 ring-slate-200/60","aria-label":"Configurações"},{default:$(()=>[...t[18]||(t[18]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 15.5A3.5 3.5 0 1 0 12 8.5a3.5 3.5 0 0 0 0 7Z"}),e("path",{d:"M19.4 15a7.9 7.9 0 0 0 .1-1 7.9 7.9 0 0 0-.1-1l2-1.6-2-3.4-2.4 1a7.4 7.4 0 0 0-1.7-1l-.4-2.6H9.1L8.7 8a7.4 7.4 0 0 0-1.7 1l-2.4-1-2 3.4 2 1.6a7.9 7.9 0 0 0-.1 1 7.9 7.9 0 0 0 .1 1l-2 1.6 2 3.4 2.4-1a7.4 7.4 0 0 0 1.7 1l.4 2.6h5.8l.4-2.6a7.4 7.4 0 0 0 1.7-1l2.4 1 2-3.4-2-1.6Z"})],-1)])]),_:1},8,["href"])])])],2),e("div",De,[e("header",Le,[e("div",Ve,[e("div",null,[c.title?(s(),o("div",Ie,b(c.title),1)):x("",!0),c.subtitle?(s(),o("div",Ke,b(c.subtitle),1)):x("",!0)]),e("div",Ge,[c.showSearch?(s(),o("div",ze,[t[19]||(t[19]=e("svg",{class:"h-5 w-5 text-slate-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"11",cy:"11",r:"7"}),e("path",{d:"M21 21l-4.3-4.3"})],-1)),e("input",{type:"text",placeholder:c.searchPlaceholder,class:"w-[260px] appearance-none border-0 bg-transparent p-0 text-sm font-semibold text-slate-700 placeholder:text-slate-400 outline-none focus:outline-none focus-visible:outline-none focus:ring-0"},null,8,Ze)])):x("",!0),O(p.$slots,"headerActions"),e("button",{type:"button",class:"relative flex h-11 w-11 items-center justify-center rounded-2xl bg-white text-slate-600 ring-1 ring-slate-200/60","aria-label":"Notificações","aria-expanded":k.value?"true":"false",onClick:t[2]||(t[2]=i=>k.value=!k.value)},[t[20]||(t[20]=e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 7 3 7H3s3 0 3-7"}),e("path",{d:"M10 21a2 2 0 0 0 4 0"})],-1)),M.value>0?(s(),o("span",Je)):x("",!0)],8,We),h.value?(s(),q(E(S),{key:1,href:p.route("admin.index"),class:"hidden items-center gap-2 rounded-2xl bg-white px-4 py-2 text-sm font-semibold text-slate-600 ring-1 ring-slate-200/60 transition hover:bg-slate-50 md:inline-flex","aria-label":"Administração"},{default:$(()=>[...t[21]||(t[21]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 15.5A3.5 3.5 0 1 0 12 8.5a3.5 3.5 0 0 0 0 7Z"}),e("path",{d:"M19.4 15a7.9 7.9 0 0 0 .1-1 7.9 7.9 0 0 0-.1-1l2-1.6-2-3.4-2.4 1a7.4 7.4 0 0 0-1.7-1l-.4-2.6H9.1L8.7 8a7.4 7.4 0 0 0-1.7 1l-2.4-1-2 3.4 2 1.6a7.9 7.9 0 0 0-.1 1 7.9 7.9 0 0 0 .1 1l-2 1.6 2 3.4 2.4-1a7.4 7.4 0 0 0 1.7 1l.4 2.6h5.8l.4-2.6a7.4 7.4 0 0 0 1.7-1l2.4 1 2-3.4-2-1.6Z"})],-1),D(" Administração ",-1)])]),_:1},8,["href"])):x("",!0),T(E(S),{href:p.route("settings"),class:"flex h-11 w-11 items-center justify-center overflow-hidden rounded-2xl bg-slate-200 text-sm font-bold text-slate-700 ring-1 ring-slate-200/60","aria-label":"Perfil"},{default:$(()=>[a.value?(s(),o("img",{key:0,src:a.value,alt:"",class:"h-full w-full object-cover"},null,8,Qe)):(s(),o("span",Ye,b(y.value),1))]),_:1},8,["href"]),c.showNewAction?(s(),o("button",{key:2,type:"button",class:"h-11 w-11 items-center justify-center rounded-full bg-[#14B8A6] text-white shadow-xl shadow-emerald-500/30 ring-1 ring-emerald-400/20 md:inline-flex","aria-label":"Nova transação",onClick:t[3]||(t[3]=i=>v("add"))},[...t[22]||(t[22]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14"}),e("path",{d:"M5 12h14"})],-1)])])):x("",!0)])])]),e("main",et,[e("div",tt,[O(p.$slots,"default")])])])])]),T(pe,{open:k.value,onClose:t[4]||(t[4]=()=>{k.value=!1,R()}),onUnread:I},null,8,["open"]),T(Q,{open:A.value,onClose:t[5]||(t[5]=i=>A.value=!1)},null,8,["open"])],64))}});export{at as _,lt as a,V as r};
