import{d as C,c as p,h as S,p as B,g as o,f as x,a as L,b as g,D,w as E,e as t,x as P,I as A,i as r,t as l,o as a,F as u,r as f,n as _,m as b,G as N,H as M,C as q}from"./app-Pd0ejbZJ.js";import{u as H,_ as V}from"./useIsMobile-CRomRP0o.js";import{_ as O}from"./DesktopShell.vue_vue_type_script_setup_true_lang-CaKEcI4E.js";import{_ as $}from"./AdminHeader.vue_vue_type_script_setup_true_lang-BMtTlgrr.js";const j={class:"space-y-4"},F={class:"rounded-3xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60"},I={class:"mt-3 flex items-center gap-3 rounded-2xl bg-slate-50 px-4 py-3 ring-1 ring-slate-200/60"},R={class:"rounded-3xl bg-white p-5 shadow-sm ring-1 ring-slate-200/60"},U={class:"flex items-center justify-between"},z={class:"text-xs font-semibold text-slate-400"},G={class:"mt-4 space-y-3"},J={class:"flex flex-wrap items-center gap-2"},K={class:"text-xs font-semibold text-slate-400"},Q={key:0,class:"text-xs font-semibold text-slate-400"},W={class:"mt-2 text-sm font-semibold text-slate-900"},X={key:0,class:"mt-1 text-xs font-semibold text-slate-400"},Y={key:1,class:"mt-3 text-xs font-semibold text-slate-500"},Z={key:2,class:"mt-3"},ee={class:"mt-2 overflow-x-auto rounded-xl bg-white p-3 text-[11px] text-slate-700 ring-1 ring-slate-200/60"},te={key:0,class:"mt-6 flex flex-wrap items-center justify-center gap-2"},se=["disabled","innerHTML","onClick"],re=C({__name:"Logs",props:{q:{},logs:{}},setup(h){const i=h,m=H(),v=p(()=>m.value?V:O),y=p(()=>m.value?{showNav:!1}:{title:"Administração",showSearch:!1,showNewAction:!1}),d=S(i.q??"");B(()=>i.q,n=>d.value=n??"");let c=null;const T=()=>{c&&window.clearTimeout(c),c=window.setTimeout(()=>{b.get(route("admin.logs.index"),{q:d.value||void 0},{preserveState:!0,preserveScroll:!0,replace:!0})},250)},w=n=>{if(!n)return"";const s=new Date(n);return Number.isFinite(s.getTime())?s.toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):String(n)},k=n=>{const s=n.toUpperCase();return s==="DELETE"?"bg-red-50 text-red-700":s==="PATCH"||s==="PUT"?"bg-amber-50 text-amber-700":s==="POST"?"bg-emerald-50 text-emerald-700":"bg-slate-100 text-slate-700"};return(n,s)=>(a(),o(u,null,[x(g(D),{title:"Administração · Logs"}),(a(),L(q(v.value),N(M(y.value)),{default:E(()=>[t("div",j,[x($,{description:"Registro de ações (POST/PATCH/DELETE) no sistema."}),t("div",F,[s[2]||(s[2]=t("label",{class:"text-xs font-semibold uppercase tracking-wide text-slate-400"},"Buscar",-1)),t("div",I,[s[1]||(s[1]=t("svg",{class:"h-5 w-5 text-slate-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"11",cy:"11",r:"7"}),t("path",{d:"M21 21l-4.3-4.3"})],-1)),P(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>d.value=e),type:"text",class:"w-full appearance-none border-0 bg-transparent p-0 text-sm font-semibold text-slate-700 placeholder:text-slate-400 outline-none focus:outline-none focus-visible:outline-none",placeholder:"Ex: /api/contas, admin.users.update, email",onInput:T},null,544),[[A,d.value]])])]),t("div",R,[t("div",U,[s[3]||(s[3]=t("div",{class:"text-sm font-semibold text-slate-900"},"Logs",-1)),t("div",z,l(i.logs.data.length)+" itens",1)]),t("div",G,[(a(!0),o(u,null,f(i.logs.data,e=>(a(),o("div",{key:e.id,class:"rounded-2xl bg-slate-50 p-4 ring-1 ring-slate-200/60"},[t("div",J,[t("span",{class:_(["rounded-full px-3 py-1 text-xs font-semibold",k(e.method)])},l(e.method),3),t("span",K,l(w(e.created_at)),1),e.status_code?(a(),o("span",Q,"· "+l(e.status_code),1)):r("",!0)]),t("div",W,l(e.path),1),e.route_name?(a(),o("div",X,l(e.route_name),1)):r("",!0),e.actor?(a(),o("div",Y,l(e.actor.name)+" · "+l(e.actor.email),1)):r("",!0),e.payload&&Object.keys(e.payload).length?(a(),o("details",Z,[s[4]||(s[4]=t("summary",{class:"cursor-pointer text-xs font-semibold text-slate-500"},"Ver payload",-1)),t("pre",ee,l(JSON.stringify(e.payload,null,2)),1)])):r("",!0)]))),128))]),i.logs.links?.length?(a(),o("div",te,[(a(!0),o(u,null,f(i.logs.links,e=>(a(),o("button",{key:e.label,type:"button",class:_(["rounded-full px-4 py-2 text-xs font-semibold ring-1",e.active?"bg-[#14B8A6] text-white ring-[#14B8A6]":"bg-white text-slate-600 ring-slate-200 hover:bg-slate-50"]),disabled:!e.url,innerHTML:e.label,onClick:ae=>e.url&&g(b).visit(e.url)},null,10,se))),128))])):r("",!0)])])]),_:1},16))],64))}});export{re as default};
