import{d as Q,c as N,h as u,g as a,f as g,a as W,b as A,D as X,w as M,e,l as Y,n as v,j as b,o,t as _,x as O,I as F,F as p,r as w,i as T,k as ee,G as te,H as se,C as le}from"./app-Pd0ejbZJ.js";import{u as oe,_ as ae,a as I}from"./useIsMobile-CRomRP0o.js";import{_ as ne,r as j}from"./DesktopShell.vue_vue_type_script_setup_true_lang-CaKEcI4E.js";import{_ as ie}from"./MobileToast.vue_vue_type_script_setup_true_lang-C2MZCjF4.js";const re={class:"flex items-center justify-between pt-2"},de={class:"mt-6 flex gap-3 rounded-2xl bg-slate-100 p-1"},ue={class:"space-y-4 pb-2"},ce={class:"flex justify-center pt-2"},ve={class:"rounded-3xl bg-white p-6 shadow-sm ring-1 ring-slate-200/60"},xe={class:"flex flex-col items-center gap-3"},he={class:"h-8 w-8",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},pe=["d"],fe={class:"text-sm font-semibold text-slate-900"},me={class:"mt-3 -mx-4 flex gap-4 overflow-x-auto pb-2 px-4 scrollbar-hide"},ge=["onClick"],be={class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},we=["d"],Ce={class:"mt-3 flex gap-2"},ke=["onClick"],ye={key:0,class:"space-y-4 pb-2"},Me={class:"flex justify-center pt-2"},_e={class:"rounded-3xl bg-white p-6 shadow-sm ring-1 ring-slate-200/60"},Be={class:"flex flex-col items-center gap-3"},Ne={class:"h-8 w-8",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},je=["d"],$e={class:"text-sm font-semibold text-slate-900"},Ee={class:"mb-3 flex items-center gap-2 text-xs font-bold uppercase tracking-wide text-slate-300"},Se={class:"mt-3 -mx-4 flex gap-4 overflow-x-auto pb-2 px-4 scrollbar-hide"},Ve=["onClick"],Le={class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},De=["d"],Ze={class:"mt-3 flex gap-2"},ze=["onClick"],He={key:0,class:"mt-6 grid grid-cols-2 gap-3 pb-8"},Ae=["disabled","onClick"],Oe={class:"h-7 w-7",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Fe=["d"],Te={class:"text-sm font-semibold text-slate-900"},Ie={key:0,class:"-mt-1 inline-flex items-center gap-1 rounded-full bg-slate-100 px-2 py-1 text-[10px] font-bold text-slate-500"},Pe={key:1,class:"mt-8 rounded-3xl border border-dashed border-slate-200 bg-white px-5 py-8 text-center shadow-sm"},Ke=Q({__name:"Categories",props:{userCategories:{}},setup(P){const $=oe(),J=N(()=>$.value?ae:ne),q=N(()=>$.value?{showNav:!1}:{title:"Categorias",showSearch:!1,showNewAction:!1}),x=u(P.userCategories||[]),h=u("expense"),C=u(!1),f=u(!1),n=u(null),i=u(""),r=u("home"),d=u("#6B7280"),B=u(!1),E=u(""),c=l=>{E.value=l,B.value=!0},R=l=>String(l??"").trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),U=new Set(["alimentacao","lazer","moradia","saude","transporte"]),k=l=>U.has(R(l.name)),S=N(()=>x.value.filter(l=>l.type===h.value)),V=["cart","food","home","car","sparkles","game","pill","briefcase","heart","shirt","bolt","money","trend","gym"],L=["#6B7280","#EF4444","#F59E0B","#10B981","#3B82F6","#A855F7"],m=l=>{const t={food:"M4 3v7M8 3v7M6 3v7M14 3v7c0 2 1 3 3 3v8M20 3v7",cart:"M6 6h15l-2 7H7L6 6ZM6 6l-2-2H2M9 18a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0M17 18a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0",home:"M3 10.5L12 3l9 7.5M5 10v10h14V10",car:"M5 16l1-5 1-3h10l1 3 1 5M7 16h10M8 17a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0M16 17a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0",sparkles:"M12 2l1.6 5.2L19 9l-5.4 1.8L12 16l-1.6-5.2L5 9l5.4-1.8L12 2Z",game:"M6 7h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2ZM8 13h2M9 12v2M15 13h2",pill:"M10 14 8 16a4 4 0 0 1-6-6l2-2a4 4 0 0 1 6 6ZM14 10l2-2a4 4 0 0 1 6 6l-2 2a4 4 0 0 1-6-6ZM8 16l8-8",briefcase:"M3 10h18M5 10V8l7-5 7 5v2M6 10v9M18 10v9",heart:"M20 8c0 5-8 10-8 10S4 13 4 8a4 4 0 0 1 8 0 4 4 0 0 1 8 0Z",shirt:"M15 3H9l-2 4h10l-2-4ZM7 7v14M17 7v14",bolt:"M13 2 3 14h8l-1 8 10-12h-8l1-8Z",money:"M3 6h18v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6ZM7 10h0M17 14h0M12 10a2 2 0 1 0 0 4a2 2 0 1 0 0-4",trend:"M3 17l6-6 4 4 8-8M17 7h4v4",gym:"M6 8v8M18 8v8M8 10h8M8 14h8M4 10v4M20 10v4"};return t[l]||t.home},D=()=>{i.value="",r.value="home",d.value="#6B7280",n.value=null,C.value=!0},G=l=>{if(k(l)){c("Essa é uma categoria do sistema e não pode ser editada.");return}n.value=l,i.value=l.name,r.value=l.icon,d.value=l.color,f.value=!0},Z=async()=>{if(!i.value.trim()){c("Nome da categoria é obrigatório");return}try{if(n.value){const l=await j(`/api/categories/${n.value.id}`,{method:"PATCH",body:JSON.stringify({name:i.value.trim(),icon:r.value,color:d.value})}),t=x.value.findIndex(s=>s.id===n.value.id);t>=0&&(x.value[t]=l),f.value=!1,c("Categoria atualizada com sucesso!")}else{const l=await j("/api/categories",{method:"POST",body:JSON.stringify({name:i.value.trim(),type:h.value,icon:r.value,color:d.value})});x.value.push(l),C.value=!1,c("Categoria criada com sucesso!")}}catch{c("Erro ao salvar categoria")}},K=async()=>{if(n.value)try{await j(`/api/categories/${n.value.id}`,{method:"DELETE"}),x.value=x.value.filter(l=>l.id!==n.value.id),f.value=!1,c("Categoria excluída com sucesso!")}catch{c("Erro ao excluir categoria")}},z=()=>{C.value=!1,n.value=null},H=()=>{f.value=!1,n.value=null};return(l,t)=>(o(),a(p,null,[g(A(X),{title:"Categorias"}),(o(),W(le(J.value),te(se(q.value)),{default:M(()=>[e("header",re,[g(A(Y),{href:l.route("dashboard"),class:"flex h-10 w-10 items-center justify-center rounded-2xl bg-white text-slate-600 shadow-sm ring-1 ring-slate-200/60","aria-label":"Voltar"},{default:M(()=>[...t[5]||(t[5]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M15 18l-6-6 6-6"})],-1)])]),_:1},8,["href"]),t[7]||(t[7]=e("div",{class:"text-center"},[e("div",{class:"text-lg font-semibold text-slate-900"},"Categorias")],-1)),e("button",{type:"button",class:"flex h-10 w-10 items-center justify-center rounded-2xl bg-[#14B8A6] text-white shadow-sm","aria-label":"Criar categoria",onClick:D},[...t[6]||(t[6]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14"}),e("path",{d:"M5 12h14"})],-1)])])]),e("div",de,[e("button",{type:"button",class:v(["flex-1 rounded-xl px-4 py-2.5 text-sm font-semibold transition",h.value==="expense"?"bg-white text-slate-900 shadow-sm":"bg-transparent text-slate-400"]),onClick:t[0]||(t[0]=s=>h.value="expense")}," Despesas ",2),e("button",{type:"button",class:v(["flex-1 rounded-xl px-4 py-2.5 text-sm font-semibold transition",h.value==="income"?"bg-white text-slate-900 shadow-sm":"bg-transparent text-slate-400"]),onClick:t[1]||(t[1]=s=>h.value="income")}," Receitas ",2)]),g(I,{open:C.value,title:"Nova Categoria",onClose:z},{default:M(()=>[e("div",ue,[e("div",ce,[e("div",ve,[e("div",xe,[e("div",{class:"flex h-16 w-16 items-center justify-center rounded-2xl text-white shadow-md",style:b({backgroundColor:d.value})},[(o(),a("svg",he,[e("path",{d:m(r.value)},null,8,pe)]))],4),e("div",fe,_(i.value||"Nova..."),1)])])]),e("div",null,[t[8]||(t[8]=e("div",{class:"mb-3 flex items-center gap-2 text-xs font-bold uppercase tracking-wide text-slate-300"},[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M4 7h16M10 3v4M14 3v4M4 11h16v8H4z"})]),e("span",null,"Nome da Categoria")],-1)),O(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>i.value=s),type:"text",placeholder:"Nome da Categoria",class:"h-12 w-full rounded-2xl bg-slate-50 px-4 text-sm font-semibold text-slate-900 placeholder:text-slate-400 ring-1 ring-slate-200/60 focus:outline-none focus:ring-2 focus:ring-[#14B8A6]"},null,512),[[F,i.value]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-xs font-bold uppercase tracking-wide text-slate-300"},"Ícone",-1)),e("div",me,[(o(),a(p,null,w(V,s=>e("button",{key:s,type:"button",class:v(["flex h-12 w-[38px] items-center justify-center rounded-2xl bg-slate-800 text-white transition",r.value===s?"ring-2 ring-offset-2 ring-slate-900":""]),onClick:y=>r.value=s},[(o(),a("svg",be,[e("path",{d:m(s)},null,8,we)]))],10,ge)),64))])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-xs font-bold uppercase tracking-wide text-slate-300"},"Cor",-1)),e("div",Ce,[(o(),a(p,null,w(L,s=>e("button",{key:s,type:"button",class:v(["h-10 w-10 rounded-full transition",d.value===s?"ring-2 ring-offset-2 ring-slate-900":""]),style:b({backgroundColor:s}),onClick:y=>d.value=s},null,14,ke)),64))])]),e("div",{class:"flex gap-3 pt-4"},[e("button",{type:"button",class:"flex-1 h-12 rounded-2xl bg-slate-100 text-sm font-semibold text-slate-600 transition hover:bg-slate-200",onClick:z}," Cancelar "),e("button",{type:"button",class:"flex-1 h-12 rounded-2xl bg-[#14B8A6] text-sm font-semibold text-white transition hover:bg-[#0D9488]",onClick:Z}," Salvar ")])])]),_:1},8,["open"]),g(I,{open:f.value,title:"Editar Categoria",onClose:H},{default:M(()=>[n.value?(o(),a("div",ye,[e("div",Me,[e("div",_e,[e("div",Be,[e("div",{class:"flex h-16 w-16 items-center justify-center rounded-2xl text-white shadow-md",style:b({backgroundColor:d.value})},[(o(),a("svg",Ne,[e("path",{d:m(r.value)},null,8,je)]))],4),e("div",$e,_(i.value||n.value.name),1)])])]),e("div",null,[e("div",Ee,[t[11]||(t[11]=e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 20h9"}),e("path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z"})],-1)),e("span",null,_(i.value||n.value.name),1)]),O(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>i.value=s),type:"text",class:"h-12 w-full rounded-2xl bg-slate-50 px-4 text-sm font-semibold text-slate-900 ring-1 ring-slate-200/60 focus:outline-none focus:ring-2 focus:ring-[#14B8A6]"},null,512),[[F,i.value]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-xs font-bold uppercase tracking-wide text-slate-300"},"Ícone",-1)),e("div",Se,[(o(),a(p,null,w(V,s=>e("button",{key:s,type:"button",class:v(["flex h-12 w-[38px] items-center justify-center rounded-2xl bg-slate-800 text-white transition",r.value===s?"ring-2 ring-offset-2 ring-slate-900":""]),onClick:y=>r.value=s},[(o(),a("svg",Le,[e("path",{d:m(s)},null,8,De)]))],10,Ve)),64))])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-xs font-bold uppercase tracking-wide text-slate-300"},"Cor",-1)),e("div",Ze,[(o(),a(p,null,w(L,s=>e("button",{key:s,type:"button",class:v(["h-10 w-10 rounded-full transition",d.value===s?"ring-2 ring-offset-2 ring-slate-900":""]),style:b({backgroundColor:s}),onClick:y=>d.value=s},null,14,ze)),64))])]),e("div",{class:"flex gap-3 pt-4"},[e("button",{type:"button",class:"flex-1 h-12 rounded-2xl bg-slate-100 text-sm font-semibold text-slate-600 transition hover:bg-slate-200",onClick:H}," Cancelar "),e("button",{type:"button",class:"flex-1 h-12 rounded-2xl bg-[#14B8A6] text-sm font-semibold text-white transition hover:bg-[#0D9488]",onClick:Z}," Salvar ")]),e("button",{type:"button",class:"w-full py-2 text-center text-sm font-semibold text-red-500 transition hover:text-red-600",onClick:K}," Excluir Categoria ")])):T("",!0)]),_:1},8,["open"]),S.value.length>0?(o(),a("div",He,[(o(!0),a(p,null,w(S.value,s=>(o(),a("button",{key:s.id,type:"button",class:v(["flex flex-col items-center gap-3 rounded-3xl bg-white px-4 py-6 shadow-sm ring-1 ring-slate-200/60 transition hover:shadow-md",k(s)?"cursor-not-allowed opacity-80":""]),disabled:k(s),onClick:y=>G(s)},[e("div",{class:"flex h-14 w-14 items-center justify-center rounded-2xl text-white shadow-sm",style:b({backgroundColor:s.color})},[(o(),a("svg",Oe,[e("path",{d:m(s.icon)},null,8,Fe)]))],4),e("div",Te,_(s.name),1),k(s)?(o(),a("div",Ie,[...t[14]||(t[14]=[e("svg",{class:"h-3.5 w-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M7 11V8a5 5 0 0 1 10 0v3"}),e("rect",{x:"5",y:"11",width:"14",height:"10",rx:"2"})],-1),ee(" Bloqueada ",-1)])])):T("",!0)],10,Ae))),128)),e("button",{type:"button",class:"flex flex-col items-center justify-center gap-3 rounded-3xl border-2 border-dashed border-slate-200 bg-white px-4 py-6 transition hover:border-slate-300",onClick:D},[...t[15]||(t[15]=[e("div",{class:"flex h-14 w-14 items-center justify-center text-slate-300"},[e("svg",{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14"}),e("path",{d:"M5 12h14"})])],-1),e("div",{class:"text-sm font-semibold text-slate-400"},"Nova Categoria",-1)])])])):(o(),a("div",Pe,[...t[16]||(t[16]=[e("div",{class:"mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-slate-50 text-slate-400"},[e("svg",{class:"h-8 w-8",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 3h7l1 2h10v14H3z"})])],-1),e("div",{class:"mt-4 text-base font-semibold text-slate-900"},"Nenhuma categoria",-1),e("div",{class:"mt-2 text-sm text-slate-500"},"Crie sua primeira categoria para começar.",-1)])])),g(ie,{show:B.value,message:E.value,onDismiss:t[4]||(t[4]=s=>B.value=!1)},null,8,["show","message"])]),_:1},16))],64))}});export{Ke as default};
