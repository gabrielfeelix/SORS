import{d as S,c as u,u as $,h as m,g as a,f as y,a as P,b as r,D as F,w as k,i as T,e as t,o as s,l as L,x as M,I as C,F as B,r as H,n as K,G as R,H as Z,C as J,m as U}from"./app-DvJ-vTb0.js";import{_ as q,r as G}from"./DesktopShell.vue_vue_type_script_setup_true_lang-BVoVaQ94.js";import{u as O,_ as Q}from"./useIsMobile-CMH_TBsk.js";import{p as I,f as W,m as X}from"./inputGuards-BTKUKM9N.js";const Y={key:0,class:"relative flex items-center justify-center pt-2"},tt={class:"mt-8 space-y-5 pb-[calc(6rem+env(safe-area-inset-bottom))] md:mx-auto md:max-w-md md:rounded-3xl md:bg-white md:p-6 md:pb-6 md:shadow-sm md:ring-1 md:ring-slate-200/60"},et={class:"flex flex-wrap gap-3"},ot=["onClick","aria-label"],lt={key:0,class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},st={key:1,class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},at={key:2,class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},nt={key:3,class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},rt={key:4,class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},it={key:5,class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},dt=["value"],ft=S({__name:"Edit",props:{goalId:{}},setup(g){const p=O(),_=u(()=>p.value?Q:q),j=u(()=>p.value?{showNav:!1}:{title:"Editar meta",showSearch:!1,showNewAction:!1}),N=$(),D=u(()=>N.props.bootstrap??{entries:[],goals:[],accounts:[],categories:[],tags:[]}),c=g,i=u(()=>{const l=D.value.goals.find(n=>n.id===c.goalId);if(!l)return{name:"Meta",icon:"home",target:"0,00",due:"Dezembro 2026"};const e=l.icon==="plane"?"plane":l.icon==="car"?"car":"home",o=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(l.target);return{name:l.title,icon:e,target:o,due:l.due}}),f=m(i.value.name),d=m(i.value.icon),v=m(i.value.target),x=m(i.value.due),V=l=>{const e=l.target;v.value=W(e.value)},A=l=>{const e=l.trim().toLowerCase();if(!e)return null;const o={jan:1,janeiro:1,fev:2,fevereiro:2,mar:3,março:3,marco:3,abr:4,abril:4,mai:5,maio:5,jun:6,junho:6,jul:7,julho:7,ago:8,agosto:8,set:9,setembro:9,out:10,outubro:10,nov:11,novembro:11,dez:12,dezembro:12},n=e.split(/\s+/),h=n.find(b=>b.match(/^\d{4}$/)),w=n.find(b=>o[b]);if(!h||!w)return null;const E=o[w];return`${h}-${String(E).padStart(2,"0")}-01`},z=async()=>{const l=X(v.value);await G(route("goals.update",c.goalId),{method:"PATCH",body:JSON.stringify({title:f.value.trim()||"Meta",target_amount:l,due_date:A(x.value),icon:d.value==="plane"?"plane":d.value==="car"?"car":"home"})}),U.visit(route("goals.show",{goalId:c.goalId}))};return(l,e)=>(s(),a(B,null,[y(r(F),{title:"Editar meta"}),(s(),P(J(_.value),R(Z(j.value)),{default:k(()=>[r(p)?(s(),a("header",Y,[y(r(L),{href:l.route("goals.show",{goalId:g.goalId}),class:"absolute left-0 flex h-10 w-10 items-center justify-center rounded-2xl bg-white text-slate-600 shadow-sm ring-1 ring-slate-200/60","aria-label":"Voltar"},{default:k(()=>[...e[3]||(e[3]=[t("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M15 18l-6-6 6-6"})],-1)])]),_:1},8,["href"]),e[4]||(e[4]=t("div",{class:"text-xl font-semibold tracking-tight text-slate-900"},"Editar meta",-1))])):T("",!0),t("div",tt,[t("div",null,[e[5]||(e[5]=t("div",{class:"mb-2 text-sm font-semibold text-slate-700"},"Nome da meta",-1)),M(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>f.value=o),type:"text",placeholder:"Ex: Casa própria...",class:"h-12 w-full rounded-2xl border border-slate-200 bg-white px-4 text-sm font-semibold text-slate-700 placeholder:text-slate-300 focus:border-[#14B8A6] focus:outline-none focus:ring-0"},null,512),[[C,f.value]])]),t("div",null,[e[12]||(e[12]=t("div",{class:"mb-2 text-sm font-semibold text-slate-700"},"Ícone",-1)),t("div",et,[(s(),a(B,null,H(["home","car","plane","cap","bag","laptop"],o=>t("button",{key:o,type:"button",class:K(["flex h-12 w-12 items-center justify-center rounded-full bg-slate-50 ring-1 ring-slate-200",d.value===o?"ring-2 ring-[#14B8A6] bg-emerald-50 text-[#14B8A6]":"text-slate-500"]),onClick:n=>d.value=o,"aria-label":o},[o==="home"?(s(),a("svg",lt,[...e[6]||(e[6]=[t("path",{d:"M3 10.5L12 3l9 7.5"},null,-1),t("path",{d:"M5 10v10h14V10"},null,-1)])])):o==="car"?(s(),a("svg",st,[...e[7]||(e[7]=[t("path",{d:"M5 16l1-5 1-3h10l1 3 1 5"},null,-1),t("path",{d:"M7 16h10"},null,-1),t("circle",{cx:"8",cy:"17",r:"1.5"},null,-1),t("circle",{cx:"16",cy:"17",r:"1.5"},null,-1)])])):o==="plane"?(s(),a("svg",at,[...e[8]||(e[8]=[t("path",{d:"M2 16l20-8-20-8 6 8-6 8Z"},null,-1),t("path",{d:"M6 16v6l4-4"},null,-1)])])):o==="cap"?(s(),a("svg",nt,[...e[9]||(e[9]=[t("path",{d:"M22 10 12 5 2 10l10 5 10-5Z"},null,-1),t("path",{d:"M6 12v5c0 1.7 2.7 3 6 3s6-1.3 6-3v-5"},null,-1)])])):o==="bag"?(s(),a("svg",rt,[...e[10]||(e[10]=[t("path",{d:"M6 8h12l-1 13H7L6 8Z"},null,-1),t("path",{d:"M9 8V6a3 3 0 0 1 6 0v2"},null,-1)])])):(s(),a("svg",it,[...e[11]||(e[11]=[t("rect",{x:"3",y:"4",width:"18",height:"12",rx:"2"},null,-1),t("path",{d:"M8 20h8"},null,-1),t("path",{d:"M12 16v4"},null,-1)])]))],10,ot)),64))])]),t("div",null,[e[13]||(e[13]=t("div",{class:"mb-2 text-sm font-semibold text-slate-700"},"Valor objetivo",-1)),t("input",{type:"text",inputmode:"numeric",pattern:"[0-9]*",value:v.value,onInput:V,placeholder:"0,00",class:"h-12 w-full rounded-2xl border border-slate-200 bg-white px-4 text-sm font-semibold text-slate-700 focus:border-[#14B8A6] focus:outline-none focus:ring-0",onKeydown:e[1]||(e[1]=(...o)=>r(I)&&r(I)(...o))},null,40,dt)]),t("div",null,[e[14]||(e[14]=t("div",{class:"mb-2 text-sm font-semibold text-slate-700"},"Prazo",-1)),M(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>x.value=o),type:"text",class:"h-12 w-full rounded-2xl border border-slate-200 bg-white px-4 text-sm font-semibold text-slate-700 focus:border-[#14B8A6] focus:outline-none focus:ring-0"},null,512),[[C,x.value]])]),e[15]||(e[15]=t("div",{class:"rounded-2xl border border-blue-100 bg-blue-50 px-4 py-4 text-sm font-semibold text-blue-700"},[t("div",{class:"flex items-start gap-3"},[t("span",{class:"flex h-8 w-8 items-center justify-center rounded-full bg-blue-100 text-blue-600"},[t("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"12",cy:"12",r:"9"}),t("path",{d:"M12 10v6"}),t("path",{d:"M12 8h.01"})])]),t("div",null,"R$ 500/mês para atingir a meta no prazo.")])],-1))]),t("div",{class:"fixed inset-x-0 bottom-0 bg-white px-5 pb-[calc(1rem+env(safe-area-inset-bottom))] pt-3 shadow-[0_-18px_40px_-32px_rgba(15,23,42,0.45)] md:static md:bg-transparent md:px-0 md:pb-0 md:pt-6 md:shadow-none"},[t("div",{class:"mx-auto w-full max-w-md md:mx-auto"},[t("button",{type:"button",class:"h-[52px] w-full rounded-2xl bg-[#14B8A6] text-base font-bold text-white shadow-[0_2px_8px_rgba(20,184,166,0.25)]",onClick:z}," Salvar alterações ")])])]),_:1},16))],64))}});export{ft as default};
