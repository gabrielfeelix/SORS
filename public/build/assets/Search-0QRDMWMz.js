import{d as L,c as i,h as S,u as D,g as l,f as g,a as h,b as u,D as M,w as x,e,l as w,x as N,I as $,o as a,F as m,r as _,t as n,n as j,G as R,H as F,C as P}from"./app-Pd0ejbZJ.js";import{u as V,_ as z}from"./useIsMobile-CRomRP0o.js";import{_ as I}from"./DesktopShell.vue_vue_type_script_setup_true_lang-CaKEcI4E.js";const q={class:"flex items-center gap-3 pt-2"},T={class:"flex-1"},U={class:"flex h-11 items-center gap-2 rounded-2xl bg-white px-4 shadow-sm ring-1 ring-slate-200/60"},A={class:"mt-8"},E={key:0,class:"mt-4 space-y-4"},G=["onClick"],H={class:"text-sm font-semibold text-slate-500"},Q={key:1,class:"mt-4 rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-6 text-center"},J={class:"mt-8"},K={class:"flex items-center justify-between"},O={class:"text-xs font-semibold text-slate-400"},W={key:0,class:"mt-4 rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-6 text-center"},X={key:1,class:"mt-4 rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-6 text-center"},Y={key:2,class:"mt-4 space-y-3"},Z={class:"min-w-0 flex-1"},ee={class:"truncate text-sm font-semibold text-slate-900"},te={class:"mt-1 flex flex-wrap items-center gap-x-3 gap-y-1 text-xs font-semibold text-slate-400"},se={class:"shrink-0 text-right"},ie=L({__name:"Search",setup(ae){const f=V(),k=i(()=>f.value?z:I),y=i(()=>f.value?{showNav:!1}:{title:"Buscar",showSearch:!1,showNewAction:!1}),d=S(""),B=D(),C=i(()=>B.props.bootstrap??{entries:[],goals:[],accounts:[],categories:[],tags:[]}),p=i(()=>C.value.entries??[]),v=i(()=>d.value.trim().toLowerCase()),c=i(()=>{const o=v.value;return o?p.value.filter(t=>[t.title,t.subtitle,t.categoryLabel,t.accountLabel,t.dateLabel,t.dayLabel].filter(Boolean).join(" ").toLowerCase().includes(o)).slice(0,30):[]}),b=i(()=>{const o=new Set,t=[];for(const s of p.value){const r=String(s.title??"").trim();if(!(!r||o.has(r))&&(o.add(r),t.push(r),t.length>=3))break}return t});return(o,t)=>(a(),l(m,null,[g(u(M),{title:"Buscar"}),(a(),h(P(k.value),R(F(y.value)),{default:x(()=>[e("header",q,[g(u(w),{href:o.route("accounts.index"),class:"flex h-10 w-10 items-center justify-center rounded-2xl bg-white text-slate-600 shadow-sm ring-1 ring-slate-200/60","aria-label":"Voltar"},{default:x(()=>[...t[1]||(t[1]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M15 18l-6-6 6-6"})],-1)])]),_:1},8,["href"]),e("div",T,[e("div",U,[t[2]||(t[2]=e("svg",{class:"h-5 w-5 text-slate-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"11",cy:"11",r:"7"}),e("path",{d:"M20 20l-3.5-3.5"})],-1)),N(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>d.value=s),type:"text",placeholder:"Buscar transações...",class:"w-full appearance-none border-0 bg-transparent text-sm font-semibold text-slate-700 placeholder:text-slate-300 outline-none focus:outline-none focus:ring-0 focus-visible:outline-none","aria-label":"Buscar transações"},null,512),[[$,d.value]])])])]),e("div",A,[t[5]||(t[5]=e("div",{class:"text-sm font-bold text-slate-900"},"Buscas recentes",-1)),b.value.length?(a(),l("div",E,[(a(!0),l(m,null,_(b.value,s=>(a(),l("button",{key:s,type:"button",class:"flex items-center gap-3 text-left",onClick:r=>d.value=s},[t[3]||(t[3]=e("span",{class:"flex h-8 w-8 items-center justify-center rounded-full bg-slate-100 text-slate-500"},[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 7v6l4 2"}),e("circle",{cx:"12",cy:"12",r:"9"})])],-1)),e("div",H,n(s),1)],8,G))),128))])):(a(),l("div",Q,[...t[4]||(t[4]=[e("div",{class:"text-sm font-semibold text-slate-900"},"Sem buscas recentes",-1),e("div",{class:"mt-1 text-xs text-slate-500"},"Suas buscas vão aparecer aqui.",-1)])]))]),e("div",J,[e("div",K,[t[6]||(t[6]=e("div",{class:"text-sm font-bold text-slate-900"},"Resultados",-1)),e("div",O,n(c.value.length),1)]),v.value?c.value.length===0?(a(),l("div",X,[...t[8]||(t[8]=[e("div",{class:"text-sm font-semibold text-slate-900"},"Nada encontrado",-1),e("div",{class:"mt-1 text-xs text-slate-500"},"Tente outro termo.",-1)])])):(a(),l("div",Y,[(a(!0),l(m,null,_(c.value,s=>(a(),h(u(w),{key:s.id,href:`${o.route("accounts.index")}?open=${encodeURIComponent(s.id)}`,class:"flex items-center justify-between gap-4 rounded-2xl bg-white px-4 py-4 shadow-sm ring-1 ring-slate-200/60"},{default:x(()=>[e("div",Z,[e("div",ee,n(s.title),1),e("div",te,[e("span",null,n(s.categoryLabel),1),t[9]||(t[9]=e("span",{class:"text-slate-200"},"•",-1)),e("span",null,n(s.accountLabel),1),t[10]||(t[10]=e("span",{class:"text-slate-200"},"•",-1)),e("span",null,n(s.dayLabel),1)])]),e("div",se,[e("div",{class:j(["text-sm font-semibold",s.kind==="income"?"text-emerald-600":"text-red-500"])},n(s.kind==="income"?"+":"-")+" R$ "+n(s.amount.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})),3),t[11]||(t[11]=e("div",{class:"mt-1 text-[10px] font-semibold uppercase tracking-wide text-slate-300"},"Detalhes",-1))])]),_:2},1032,["href"]))),128))])):(a(),l("div",W,[...t[7]||(t[7]=[e("div",{class:"text-sm font-semibold text-slate-900"},"Digite para buscar",-1),e("div",{class:"mt-1 text-xs text-slate-500"},"Nome, categoria, conta ou data.",-1)])]))])]),_:1},16))],64))}});export{ie as default};
