import{d as V,c as y,h as x,J as _,g as r,f as b,a as F,b as a,D as I,w,e,t as d,o as i,F as k,r as L,n as z,i as C,G as P,H as T,C as U,x as f,I as S,K as q,m as v}from"./app-Pd0ejbZJ.js";import{u as O,_ as R}from"./useIsMobile-CRomRP0o.js";import{_ as G}from"./DesktopShell.vue_vue_type_script_setup_true_lang-CaKEcI4E.js";import{_ as H}from"./AdminHeader.vue_vue_type_script_setup_true_lang-BMtTlgrr.js";import{_ as J}from"./Modal.vue_vue_type_script_setup_true_lang-DjEikzG1.js";const K={class:"space-y-4"},Q={class:"rounded-3xl bg-white p-6 shadow-sm ring-1 ring-slate-200/60"},W={class:"flex flex-wrap items-center justify-between gap-3"},X={class:"mt-1 text-xs font-semibold text-slate-400"},Y={key:0,class:"mt-6 rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-10 text-center"},Z={key:1,class:"mt-6 overflow-hidden rounded-2xl ring-1 ring-slate-200/60"},ee={class:"min-w-full text-left text-sm"},te={class:"divide-y divide-slate-100"},se={class:"px-4 py-3 font-semibold text-slate-900"},le={class:"px-4 py-3 text-slate-700"},oe={class:"px-4 py-3"},ae={class:"hidden px-4 py-3 text-slate-500 md:table-cell"},ne={class:"hidden px-4 py-3 text-slate-500 md:table-cell"},de={class:"px-4 py-3 text-right"},ie={class:"flex justify-end gap-2"},re=["onClick"],ue=["onClick"],ce={key:0,class:"mt-2 rounded-xl bg-red-50 p-3 text-left ring-1 ring-red-100"},me={class:"mt-2 flex justify-end gap-2"},pe=["disabled","onClick"],xe={class:"p-6"},be={class:"flex items-start justify-between gap-4"},fe={class:"text-lg font-semibold text-slate-900"},ve={class:"mt-5 grid gap-4 md:grid-cols-2"},ge={class:"block"},he={class:"block"},ye={class:"block md:col-span-2"},_e={key:0,class:"mt-4 rounded-2xl bg-red-50 p-4 text-sm font-semibold text-red-700"},we={class:"mt-6 flex items-center justify-end gap-2"},ke=["disabled"],$e=V({__name:"Leads",props:{leads:{}},setup(E){const m=E,g=O(),D=y(()=>g.value?R:G),N=y(()=>g.value?{showNav:!1}:{title:"Administração",showSearch:!1,showNewAction:!1}),$=o=>{if(!o)return"";const t=new Date(o);return Number.isFinite(t.getTime())?t.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}):String(o)},n=x(!1),u=x(null),l=_({name:"",email:"",status:"subscribed"}),A=()=>{u.value=null,l.reset(),l.clearErrors(),n.value=!0},B=o=>{u.value=o.id,l.reset(),l.clearErrors(),l.name=o.name??"",l.email=o.email,l.status=o.status,n.value=!0},j=()=>{if(u.value){l.patch(route("admin.leads.update",u.value),{preserveScroll:!0,onSuccess:()=>{n.value=!1,v.reload({only:["leads"]})}});return}l.post(route("admin.leads.store"),{preserveScroll:!0,onSuccess:()=>{n.value=!1,v.reload({only:["leads"]})}})},c=x(null),h=_({}),M=o=>{h.delete(route("admin.leads.destroy",o),{preserveScroll:!0,onSuccess:()=>{c.value=null,v.reload({only:["leads"]})}})};return(o,t)=>(i(),r(k,null,[b(a(I),{title:"Administração · Leads"}),(i(),F(U(D.value),P(T(N.value)),{default:w(()=>[e("div",K,[b(H,{title:"Administração",description:"Leads capturados pela newsletter (landing page)."}),e("div",Q,[e("div",W,[e("div",null,[t[7]||(t[7]=e("div",{class:"text-sm font-semibold text-slate-900"},"Leads",-1)),e("div",X,d(m.leads.length)+" no total",1)]),e("button",{type:"button",class:"inline-flex items-center justify-center rounded-2xl bg-[#14B8A6] px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-emerald-500/20",onClick:A}," + Adicionar lead ")]),m.leads.length===0?(i(),r("div",Y,[...t[8]||(t[8]=[e("div",{class:"text-sm font-semibold text-slate-900"},"Nenhum lead ainda",-1),e("div",{class:"mt-2 text-xs font-semibold text-slate-500"},"Quando alguém se inscrever na newsletter, aparece aqui.",-1)])])):(i(),r("div",Z,[e("table",ee,[t[10]||(t[10]=e("thead",{class:"bg-slate-50 text-xs font-bold uppercase tracking-wide text-slate-400"},[e("tr",null,[e("th",{class:"px-4 py-3"},"Nome"),e("th",{class:"px-4 py-3"},"E-mail"),e("th",{class:"px-4 py-3"},"Status"),e("th",{class:"hidden px-4 py-3 md:table-cell"},"Origem"),e("th",{class:"hidden px-4 py-3 md:table-cell"},"Data"),e("th",{class:"px-4 py-3 text-right"},"Ações")])],-1)),e("tbody",te,[(i(!0),r(k,null,L(m.leads,s=>(i(),r("tr",{key:s.id,class:"bg-white"},[e("td",se,d(s.name||"—"),1),e("td",le,d(s.email),1),e("td",oe,[e("span",{class:z(["inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold",s.status==="subscribed"?"bg-emerald-50 text-emerald-700":"bg-slate-100 text-slate-600"])},d(s.status==="subscribed"?"Inscrito":"Descadastrado"),3)]),e("td",ae,d(s.source||"—"),1),e("td",ne,d($(s.subscribed_at||s.created_at)),1),e("td",de,[e("div",ie,[e("button",{type:"button",class:"rounded-xl bg-slate-50 px-3 py-2 text-xs font-semibold text-slate-700 ring-1 ring-slate-200/60 hover:bg-slate-100",onClick:p=>B(s)}," Editar ",8,re),e("button",{type:"button",class:"rounded-xl bg-red-50 px-3 py-2 text-xs font-semibold text-red-700 ring-1 ring-red-100 hover:bg-red-100",onClick:p=>c.value=c.value===s.id?null:s.id}," Excluir ",8,ue)]),c.value===s.id?(i(),r("div",ce,[t[9]||(t[9]=e("div",{class:"text-xs font-semibold text-red-700"},"Tem certeza?",-1)),e("div",me,[e("button",{type:"button",class:"px-3 py-2 text-xs font-semibold text-slate-600",onClick:t[0]||(t[0]=p=>c.value=null)},"Cancelar"),e("button",{type:"button",class:"rounded-xl bg-red-600 px-3 py-2 text-xs font-semibold text-white disabled:opacity-60",disabled:a(h).processing,onClick:p=>M(s.id)}," Excluir agora ",8,pe)])])):C("",!0)])]))),128))])])]))])])]),_:1},16)),b(J,{show:n.value,maxWidth:"lg",onClose:t[6]||(t[6]=s=>n.value=!1)},{default:w(()=>[e("div",xe,[e("div",be,[e("div",null,[e("div",fe,d(u.value?"Editar lead":"Novo lead"),1),t[11]||(t[11]=e("div",{class:"mt-1 text-sm text-slate-500"},"Cadastro usado para newsletters (inscritos da landing page).",-1))]),e("button",{type:"button",class:"flex h-10 w-10 items-center justify-center rounded-2xl bg-slate-50 text-slate-600 ring-1 ring-slate-200/60","aria-label":"Fechar",onClick:t[1]||(t[1]=s=>n.value=!1)},[...t[12]||(t[12]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M6 6l12 12"}),e("path",{d:"M18 6l-12 12"})],-1)])])]),e("div",ve,[e("label",ge,[t[13]||(t[13]=e("div",{class:"text-xs font-semibold text-slate-500"},"Nome (opcional)",-1)),f(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>a(l).name=s),type:"text",class:"mt-2 h-11 w-full appearance-none rounded-xl border border-slate-200 bg-white px-4 text-sm font-semibold text-slate-800 placeholder:text-slate-400",placeholder:"Ex.: Maria"},null,512),[[S,a(l).name]])]),e("label",he,[t[14]||(t[14]=e("div",{class:"text-xs font-semibold text-slate-500"},"E-mail",-1)),f(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>a(l).email=s),type:"email",class:"mt-2 h-11 w-full appearance-none rounded-xl border border-slate-200 bg-white px-4 text-sm font-semibold text-slate-800 placeholder:text-slate-400",placeholder:"nome@exemplo.com"},null,512),[[S,a(l).email]])]),e("label",ye,[t[16]||(t[16]=e("div",{class:"text-xs font-semibold text-slate-500"},"Status",-1)),f(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>a(l).status=s),class:"mt-2 h-11 w-full appearance-none rounded-xl border border-slate-200 bg-white px-4 pr-10 text-sm font-semibold text-slate-800"},[...t[15]||(t[15]=[e("option",{value:"subscribed"},"Inscrito",-1),e("option",{value:"unsubscribed"},"Descadastrado",-1)])],512),[[q,a(l).status]])])]),a(l).hasErrors?(i(),r("div",_e," Não foi possível salvar. Verifique os campos. ")):C("",!0),e("div",we,[e("button",{type:"button",class:"rounded-xl px-4 py-2 text-sm font-semibold text-slate-600",onClick:t[5]||(t[5]=s=>n.value=!1)},"Cancelar"),e("button",{type:"button",class:"rounded-xl bg-[#14B8A6] px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-emerald-500/20 disabled:opacity-60",disabled:a(l).processing,onClick:j},d(a(l).processing?"Salvando…":"Salvar"),9,ke)])])]),_:1},8,["show"])],64))}});export{$e as default};
